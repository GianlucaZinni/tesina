(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function X1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var og={exports:{}},gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function V1(){if(Dy)return gu;Dy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var d in o)d!=="key"&&(u[d]=o[d])}else u=o;return o=u.ref,{$$typeof:a,type:s,key:f,ref:o!==void 0?o:null,props:u}}return gu.Fragment=t,gu.jsx=i,gu.jsxs=i,gu}var Py;function q1(){return Py||(Py=1,og.exports=V1()),og.exports}var K=q1(),lg={exports:{}},Zt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function K1(){if(zy)return Zt;zy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function w(A){return A===null||typeof A!="object"?null:(A=E&&A[E]||A["@@iterator"],typeof A=="function"?A:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,O={};function D(A,U,G){this.props=A,this.context=U,this.refs=O,this.updater=G||T}D.prototype.isReactComponent={},D.prototype.setState=function(A,U){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,U,"setState")},D.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function P(){}P.prototype=D.prototype;function k(A,U,G){this.props=A,this.context=U,this.refs=O,this.updater=G||T}var z=k.prototype=new P;z.constructor=k,b(z,D.prototype),z.isPureReactComponent=!0;var j=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function it(A,U,G,st,lt,gt){return G=gt.ref,{$$typeof:a,type:A,key:U,ref:G!==void 0?G:null,props:gt}}function rt(A,U){return it(A.type,U,void 0,void 0,void 0,A.props)}function dt(A){return typeof A=="object"&&A!==null&&A.$$typeof===a}function pt(A){var U={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(G){return U[G]})}var _t=/\/+/g;function nt(A,U){return typeof A=="object"&&A!==null&&A.key!=null?pt(""+A.key):U.toString(36)}function ot(){}function vt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(ot,ot):(A.status="pending",A.then(function(U){A.status==="pending"&&(A.status="fulfilled",A.value=U)},function(U){A.status==="pending"&&(A.status="rejected",A.reason=U)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function ht(A,U,G,st,lt){var gt=typeof A;(gt==="undefined"||gt==="boolean")&&(A=null);var mt=!1;if(A===null)mt=!0;else switch(gt){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(A.$$typeof){case a:case t:mt=!0;break;case v:return mt=A._init,ht(mt(A._payload),U,G,st,lt)}}if(mt)return lt=lt(A),mt=st===""?"."+nt(A,0):st,j(lt)?(G="",mt!=null&&(G=mt.replace(_t,"$&/")+"/"),ht(lt,U,G,"",function(Et){return Et})):lt!=null&&(dt(lt)&&(lt=rt(lt,G+(lt.key==null||A&&A.key===lt.key?"":(""+lt.key).replace(_t,"$&/")+"/")+mt)),U.push(lt)),1;mt=0;var jt=st===""?".":st+":";if(j(A))for(var Lt=0;Lt<A.length;Lt++)st=A[Lt],gt=jt+nt(st,Lt),mt+=ht(st,U,G,gt,lt);else if(Lt=w(A),typeof Lt=="function")for(A=Lt.call(A),Lt=0;!(st=A.next()).done;)st=st.value,gt=jt+nt(st,Lt++),mt+=ht(st,U,G,gt,lt);else if(gt==="object"){if(typeof A.then=="function")return ht(vt(A),U,G,st,lt);throw U=String(A),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return mt}function F(A,U,G){if(A==null)return A;var st=[],lt=0;return ht(A,st,"","",function(gt){return U.call(G,gt,lt++)}),st}function H(A){if(A._status===-1){var U=A._result;U=U(),U.then(function(G){(A._status===0||A._status===-1)&&(A._status=1,A._result=G)},function(G){(A._status===0||A._status===-1)&&(A._status=2,A._result=G)}),A._status===-1&&(A._status=0,A._result=U)}if(A._status===1)return A._result.default;throw A._result}var Q=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function yt(){}return Zt.Children={map:F,forEach:function(A,U,G){F(A,function(){U.apply(this,arguments)},G)},count:function(A){var U=0;return F(A,function(){U++}),U},toArray:function(A){return F(A,function(U){return U})||[]},only:function(A){if(!dt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Zt.Component=D,Zt.Fragment=i,Zt.Profiler=o,Zt.PureComponent=k,Zt.StrictMode=s,Zt.Suspense=g,Zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Zt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return X.H.useMemoCache(A)}},Zt.cache=function(A){return function(){return A.apply(null,arguments)}},Zt.cloneElement=function(A,U,G){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var st=b({},A.props),lt=A.key,gt=void 0;if(U!=null)for(mt in U.ref!==void 0&&(gt=void 0),U.key!==void 0&&(lt=""+U.key),U)!$.call(U,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&U.ref===void 0||(st[mt]=U[mt]);var mt=arguments.length-2;if(mt===1)st.children=G;else if(1<mt){for(var jt=Array(mt),Lt=0;Lt<mt;Lt++)jt[Lt]=arguments[Lt+2];st.children=jt}return it(A.type,lt,void 0,void 0,gt,st)},Zt.createContext=function(A){return A={$$typeof:f,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:u,_context:A},A},Zt.createElement=function(A,U,G){var st,lt={},gt=null;if(U!=null)for(st in U.key!==void 0&&(gt=""+U.key),U)$.call(U,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(lt[st]=U[st]);var mt=arguments.length-2;if(mt===1)lt.children=G;else if(1<mt){for(var jt=Array(mt),Lt=0;Lt<mt;Lt++)jt[Lt]=arguments[Lt+2];lt.children=jt}if(A&&A.defaultProps)for(st in mt=A.defaultProps,mt)lt[st]===void 0&&(lt[st]=mt[st]);return it(A,gt,void 0,void 0,null,lt)},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(A){return{$$typeof:d,render:A}},Zt.isValidElement=dt,Zt.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:H}},Zt.memo=function(A,U){return{$$typeof:p,type:A,compare:U===void 0?null:U}},Zt.startTransition=function(A){var U=X.T,G={};X.T=G;try{var st=A(),lt=X.S;lt!==null&&lt(G,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(yt,Q)}catch(gt){Q(gt)}finally{X.T=U}},Zt.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Zt.use=function(A){return X.H.use(A)},Zt.useActionState=function(A,U,G){return X.H.useActionState(A,U,G)},Zt.useCallback=function(A,U){return X.H.useCallback(A,U)},Zt.useContext=function(A){return X.H.useContext(A)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(A,U){return X.H.useDeferredValue(A,U)},Zt.useEffect=function(A,U,G){var st=X.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(A,U)},Zt.useId=function(){return X.H.useId()},Zt.useImperativeHandle=function(A,U,G){return X.H.useImperativeHandle(A,U,G)},Zt.useInsertionEffect=function(A,U){return X.H.useInsertionEffect(A,U)},Zt.useLayoutEffect=function(A,U){return X.H.useLayoutEffect(A,U)},Zt.useMemo=function(A,U){return X.H.useMemo(A,U)},Zt.useOptimistic=function(A,U){return X.H.useOptimistic(A,U)},Zt.useReducer=function(A,U,G){return X.H.useReducer(A,U,G)},Zt.useRef=function(A){return X.H.useRef(A)},Zt.useState=function(A){return X.H.useState(A)},Zt.useSyncExternalStore=function(A,U,G){return X.H.useSyncExternalStore(A,U,G)},Zt.useTransition=function(){return X.H.useTransition()},Zt.version="19.1.0",Zt}var Ny;function em(){return Ny||(Ny=1,lg.exports=K1()),lg.exports}var Z=em(),ug={exports:{}},mu={},cg={exports:{}},hg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function W1(){return Iy||(Iy=1,function(a){function t(F,H){var Q=F.length;F.push(H);t:for(;0<Q;){var yt=Q-1>>>1,A=F[yt];if(0<o(A,H))F[yt]=H,F[Q]=A,Q=yt;else break t}}function i(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var H=F[0],Q=F.pop();if(Q!==H){F[0]=Q;t:for(var yt=0,A=F.length,U=A>>>1;yt<U;){var G=2*(yt+1)-1,st=F[G],lt=G+1,gt=F[lt];if(0>o(st,Q))lt<A&&0>o(gt,st)?(F[yt]=gt,F[lt]=Q,yt=lt):(F[yt]=st,F[G]=Q,yt=G);else if(lt<A&&0>o(gt,Q))F[yt]=gt,F[lt]=Q,yt=lt;else break t}}return H}function o(F,H){var Q=F.sortIndex-H.sortIndex;return Q!==0?Q:F.id-H.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var f=Date,d=f.now();a.unstable_now=function(){return f.now()-d}}var g=[],p=[],v=1,E=null,w=3,T=!1,b=!1,O=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function j(F){for(var H=i(p);H!==null;){if(H.callback===null)s(p);else if(H.startTime<=F)s(p),H.sortIndex=H.expirationTime,t(g,H);else break;H=i(p)}}function X(F){if(O=!1,j(F),!b)if(i(g)!==null)b=!0,$||($=!0,nt());else{var H=i(p);H!==null&&ht(X,H.startTime-F)}}var $=!1,it=-1,rt=5,dt=-1;function pt(){return D?!0:!(a.unstable_now()-dt<rt)}function _t(){if(D=!1,$){var F=a.unstable_now();dt=F;var H=!0;try{t:{b=!1,O&&(O=!1,k(it),it=-1),T=!0;var Q=w;try{e:{for(j(F),E=i(g);E!==null&&!(E.expirationTime>F&&pt());){var yt=E.callback;if(typeof yt=="function"){E.callback=null,w=E.priorityLevel;var A=yt(E.expirationTime<=F);if(F=a.unstable_now(),typeof A=="function"){E.callback=A,j(F),H=!0;break e}E===i(g)&&s(g),j(F)}else s(g);E=i(g)}if(E!==null)H=!0;else{var U=i(p);U!==null&&ht(X,U.startTime-F),H=!1}}break t}finally{E=null,w=Q,T=!1}H=void 0}}finally{H?nt():$=!1}}}var nt;if(typeof z=="function")nt=function(){z(_t)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,vt=ot.port2;ot.port1.onmessage=_t,nt=function(){vt.postMessage(null)}}else nt=function(){P(_t,0)};function ht(F,H){it=P(function(){F(a.unstable_now())},H)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(F){F.callback=null},a.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<F?Math.floor(1e3/F):5},a.unstable_getCurrentPriorityLevel=function(){return w},a.unstable_next=function(F){switch(w){case 1:case 2:case 3:var H=3;break;default:H=w}var Q=w;w=H;try{return F()}finally{w=Q}},a.unstable_requestPaint=function(){D=!0},a.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=w;w=F;try{return H()}finally{w=Q}},a.unstable_scheduleCallback=function(F,H,Q){var yt=a.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?yt+Q:yt):Q=yt,F){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=Q+A,F={id:v++,callback:H,priorityLevel:F,startTime:Q,expirationTime:A,sortIndex:-1},Q>yt?(F.sortIndex=Q,t(p,F),i(g)===null&&F===i(p)&&(O?(k(it),it=-1):O=!0,ht(X,Q-yt))):(F.sortIndex=A,t(g,F),b||T||(b=!0,$||($=!0,nt()))),F},a.unstable_shouldYield=pt,a.unstable_wrapCallback=function(F){var H=w;return function(){var Q=w;w=H;try{return F.apply(this,arguments)}finally{w=Q}}}}(hg)),hg}var ky;function Q1(){return ky||(ky=1,cg.exports=W1()),cg.exports}var fg={exports:{}},bi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function J1(){if(Fy)return bi;Fy=1;var a=em();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bi.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,v)},bi.flushSync=function(g){var p=f.T,v=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=p,s.p=v,s.d.f()}},bi.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},bi.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},bi.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:T}):v==="script"&&s.d.X(g,{crossOrigin:E,integrity:w,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bi.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},bi.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=d(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bi.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=d(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},bi.requestFormReset=function(g){s.d.r(g)},bi.unstable_batchedUpdates=function(g,p){return g(p)},bi.useFormState=function(g,p,v){return f.H.useFormState(g,p,v)},bi.useFormStatus=function(){return f.H.useHostTransitionStatus()},bi.version="19.1.0",bi}var Gy;function $1(){if(Gy)return fg.exports;Gy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),fg.exports=J1(),fg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function tE(){if(By)return mu;By=1;var a=Q1(),t=em(),i=$1();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,l=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(l=n.return),e=n.return;while(e)}return n.tag===3?l:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(u(e)!==e)throw Error(s(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(s(188));return n!==e?null:e}for(var l=e,h=n;;){var _=l.return;if(_===null)break;var y=_.alternate;if(y===null){if(h=_.return,h!==null){l=h;continue}break}if(_.child===y.child){for(y=_.child;y;){if(y===l)return d(_),e;if(y===h)return d(_),n;y=y.sibling}throw Error(s(188))}if(l.return!==h.return)l=_,h=y;else{for(var C=!1,M=_.child;M;){if(M===l){C=!0,l=_,h=y;break}if(M===h){C=!0,h=_,l=y;break}M=M.sibling}if(!C){for(M=y.child;M;){if(M===l){C=!0,l=y,h=_;break}if(M===h){C=!0,h=y,l=_;break}M=M.sibling}if(!C)throw Error(s(189))}}if(l.alternate!==h)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),z=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),dt=Symbol.for("react.activity"),pt=Symbol.for("react.memo_cache_sentinel"),_t=Symbol.iterator;function nt(e){return e===null||typeof e!="object"?null:(e=_t&&e[_t]||e["@@iterator"],typeof e=="function"?e:null)}var ot=Symbol.for("react.client.reference");function vt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ot?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case b:return"Fragment";case D:return"Profiler";case O:return"StrictMode";case X:return"Suspense";case $:return"SuspenseList";case dt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case z:return(e.displayName||"Context")+".Provider";case k:return(e._context.displayName||"Context")+".Consumer";case j:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case it:return n=e.displayName||null,n!==null?n:vt(e.type)||"Memo";case rt:n=e._payload,e=e._init;try{return vt(e(n))}catch{}}return null}var ht=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},yt=[],A=-1;function U(e){return{current:e}}function G(e){0>A||(e.current=yt[A],yt[A]=null,A--)}function st(e,n){A++,yt[A]=e.current,e.current=n}var lt=U(null),gt=U(null),mt=U(null),jt=U(null);function Lt(e,n){switch(st(mt,n),st(gt,e),st(lt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?ay(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=ay(n),e=oy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(lt),st(lt,e)}function Et(){G(lt),G(gt),G(mt)}function Mt(e){e.memoizedState!==null&&st(jt,e);var n=lt.current,l=oy(n,e.type);n!==l&&(st(gt,e),st(lt,l))}function se(e){gt.current===e&&(G(lt),G(gt)),jt.current===e&&(G(jt),uu._currentValue=Q)}var me=Object.prototype.hasOwnProperty,_i=a.unstable_scheduleCallback,Qe=a.unstable_cancelCallback,ai=a.unstable_shouldYield,Ae=a.unstable_requestPaint,Ct=a.unstable_now,Ut=a.unstable_getCurrentPriorityLevel,Jt=a.unstable_ImmediatePriority,Ce=a.unstable_UserBlockingPriority,Je=a.unstable_NormalPriority,Wt=a.unstable_LowPriority,Qt=a.unstable_IdlePriority,Fe=a.log,_e=a.unstable_setDisableYieldValue,Te=null,ae=null;function be(e){if(typeof Fe=="function"&&_e(e),ae&&typeof ae.setStrictMode=="function")try{ae.setStrictMode(Te,e)}catch{}}var Se=Math.clz32?Math.clz32:Hi,Oi=Math.log,Oe=Math.LN2;function Hi(e){return e>>>=0,e===0?32:31-(Oi(e)/Oe|0)|0}var gs=256,qn=4194304;function Ji(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ms(e,n,l){var h=e.pendingLanes;if(h===0)return 0;var _=0,y=e.suspendedLanes,C=e.pingedLanes;e=e.warmLanes;var M=h&134217727;return M!==0?(h=M&~y,h!==0?_=Ji(h):(C&=M,C!==0?_=Ji(C):l||(l=M&~e,l!==0&&(_=Ji(l))))):(M=h&~y,M!==0?_=Ji(M):C!==0?_=Ji(C):l||(l=h&~e,l!==0&&(_=Ji(l)))),_===0?0:n!==0&&n!==_&&(n&y)===0&&(y=_&-_,l=n&-n,y>=l||y===32&&(l&4194048)!==0)?n:_}function Di(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function to(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var e=gs;return gs<<=1,(gs&4194048)===0&&(gs=256),e}function Dn(){var e=qn;return qn<<=1,(qn&62914560)===0&&(qn=4194304),e}function pn(e){for(var n=[],l=0;31>l;l++)n.push(e);return n}function Yi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function eo(e,n,l,h,_,y){var C=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var M=e.entanglements,I=e.expirationTimes,W=e.hiddenUpdates;for(l=C&~l;0<l;){var at=31-Se(l),ct=1<<at;M[at]=0,I[at]=-1;var J=W[at];if(J!==null)for(W[at]=null,at=0;at<J.length;at++){var tt=J[at];tt!==null&&(tt.lane&=-536870913)}l&=~ct}h!==0&&ra(e,h,0),y!==0&&_===0&&e.tag!==0&&(e.suspendedLanes|=y&~(C&~n))}function ra(e,n,l){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-Se(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|l&4194090}function oi(e,n){var l=e.entangledLanes|=n;for(e=e.entanglements;l;){var h=31-Se(l),_=1<<h;_&n|e[h]&n&&(e[h]|=n),l&=~_}}function yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function li(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Xi(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:by(e.type))}function $e(e,n){var l=H.p;try{return H.p=e,n()}finally{H.p=l}}var Pi=Math.random().toString(36).slice(2),De="__reactFiber$"+Pi,re="__reactProps$"+Pi,Ze="__reactContainer$"+Pi,Re="__reactEvents$"+Pi,bt="__reactListeners$"+Pi,Qu="__reactHandles$"+Pi,pl="__reactResources$"+Pi,ir="__reactMarker$"+Pi;function io(e){delete e[De],delete e[re],delete e[Re],delete e[bt],delete e[Qu]}function Kn(e){var n=e[De];if(n)return n;for(var l=e.parentNode;l;){if(n=l[Ze]||l[De]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(e=hy(e);e!==null;){if(l=e[De])return l;e=hy(e)}return n}e=l,l=e.parentNode}return null}function _s(e){if(e=e[De]||e[Ze]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function vn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function ps(e){var n=e[pl];return n||(n=e[pl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function He(e){e[ir]=!0}var Ju=new Set,$u={};function ys(e,n){vs(e,n),vs(e+"Capture",n)}function vs(e,n){for($u[e]=n,e=0;e<n.length;e++)Ju.add(n[e])}var pf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),aa={},tc={};function yf(e){return me.call(tc,e)?!0:me.call(aa,e)?!1:pf.test(e)?tc[e]=!0:(aa[e]=!0,!1)}function no(e,n,l){if(yf(n))if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+l)}}function so(e,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+l)}}function Pn(e,n,l,h){if(h===null)e.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(n,l,""+h)}}var oa,nr;function xs(e){if(oa===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);oa=n&&n[1]||"",nr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oa+e+nr}var ro=!1;function Es(e,n){if(!e||ro)return"";ro=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(tt){var J=tt}Reflect.construct(e,[],ct)}else{try{ct.call()}catch(tt){J=tt}e.call(ct.prototype)}}else{try{throw Error()}catch(tt){J=tt}(ct=e())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(tt){if(tt&&J&&typeof tt.stack=="string")return[tt.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),C=y[0],M=y[1];if(C&&M){var I=C.split(`
`),W=M.split(`
`);for(_=h=0;h<I.length&&!I[h].includes("DetermineComponentFrameRoot");)h++;for(;_<W.length&&!W[_].includes("DetermineComponentFrameRoot");)_++;if(h===I.length||_===W.length)for(h=I.length-1,_=W.length-1;1<=h&&0<=_&&I[h]!==W[_];)_--;for(;1<=h&&0<=_;h--,_--)if(I[h]!==W[_]){if(h!==1||_!==1)do if(h--,_--,0>_||I[h]!==W[_]){var at=`
`+I[h].replace(" at new "," at ");return e.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",e.displayName)),at}while(1<=h&&0<=_);break}}}finally{ro=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?xs(l):""}function $t(e){switch(e.tag){case 26:case 27:case 5:return xs(e.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 15:return Es(e.type,!1);case 11:return Es(e.type.render,!1);case 1:return Es(e.type,!0);case 31:return xs("Activity");default:return""}}function pe(e){try{var n="";do n+=$t(e),e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function pi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ss(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function sr(e){var n=Ss(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),h=""+e[n];if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var _=l.get,y=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return _.call(this)},set:function(C){h=""+C,y.call(this,C)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function rr(e){e._valueTracker||(e._valueTracker=sr(e))}function Ft(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var l=n.getValue(),h="";return e&&(h=Ss(e)?e.checked?"true":"false":e.value),e=h,e!==l?(n.setValue(e),!0):!1}function ye(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yl=/[\n"\\]/g;function yi(e){return e.replace(yl,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function wi(e,n,l,h,_,y,C,M){e.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.type=C:e.removeAttribute("type"),n!=null?C==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+pi(n)):e.value!==""+pi(n)&&(e.value=""+pi(n)):C!=="submit"&&C!=="reset"||e.removeAttribute("value"),n!=null?ar(e,C,pi(n)):l!=null?ar(e,C,pi(l)):h!=null&&e.removeAttribute("value"),_==null&&y!=null&&(e.defaultChecked=!!y),_!=null&&(e.checked=_&&typeof _!="function"&&typeof _!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.name=""+pi(M):e.removeAttribute("name")}function ec(e,n,l,h,_,y,C,M){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.type=y),n!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||n!=null))return;l=l!=null?""+pi(l):"",n=n!=null?""+pi(n):l,M||n===e.value||(e.value=n),e.defaultValue=n}h=h??_,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=M?e.checked:!!h,e.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.name=C)}function ar(e,n,l){n==="number"&&ye(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Vi(e,n,l,h){if(e=e.options,n){n={};for(var _=0;_<l.length;_++)n["$"+l[_]]=!0;for(l=0;l<e.length;l++)_=n.hasOwnProperty("$"+e[l].value),e[l].selected!==_&&(e[l].selected=_),_&&h&&(e[l].defaultSelected=!0)}else{for(l=""+pi(l),n=null,_=0;_<e.length;_++){if(e[_].value===l){e[_].selected=!0,h&&(e[_].defaultSelected=!0);return}n!==null||e[_].disabled||(n=e[_])}n!==null&&(n.selected=!0)}}function Pe(e,n,l){if(n!=null&&(n=""+pi(n),n!==e.value&&(e.value=n),l==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=l!=null?""+pi(l):""}function Wn(e,n,l,h){if(n==null){if(h!=null){if(l!=null)throw Error(s(92));if(ht(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),n=l}l=pi(n),e.defaultValue=l,h=e.textContent,h===l&&h!==""&&h!==null&&(e.value=h)}function xn(e,n){if(n){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=n;return}}e.textContent=n}var la=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ao(e,n,l){var h=n.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,l):typeof l!="number"||l===0||la.has(n)?n==="float"?e.cssFloat=l:e[n]=(""+l).trim():e[n]=l+"px"}function or(e,n,l){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var _ in n)h=n[_],n.hasOwnProperty(_)&&l[_]!==h&&ao(e,_,h)}else for(var y in n)n.hasOwnProperty(y)&&ao(e,y,n[y])}function ua(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lr(e){return oo.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ca=null;function ur(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ws=null,Qn=null;function ic(e){var n=_s(e);if(n&&(e=n.stateNode)){var l=e[re]||null;t:switch(e=n.stateNode,n.type){case"input":if(wi(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),n=l.name,l.type==="radio"&&n!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yi(""+n)+'"][type="radio"]'),n=0;n<l.length;n++){var h=l[n];if(h!==e&&h.form===e.form){var _=h[re]||null;if(!_)throw Error(s(90));wi(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(n=0;n<l.length;n++)h=l[n],h.form===e.form&&Ft(h)}break t;case"textarea":Pe(e,l.value,l.defaultValue);break t;case"select":n=l.value,n!=null&&Vi(e,!!l.multiple,n,!1)}}}var kt=!1;function $i(e,n,l){if(kt)return e(n,l);kt=!0;try{var h=e(n);return h}finally{if(kt=!1,(ws!==null||Qn!==null)&&(Wc(),ws&&(n=ws,e=Qn,Qn=ws=null,ic(n),e)))for(n=0;n<e.length;n++)ic(e[n])}}function ie(e,n){var l=e.stateNode;if(l===null)return null;var h=l[re]||null;if(h===null)return null;l=h[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break t;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(s(231,n,typeof l));return l}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(En)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){ha=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{ha=!1}var Sn=null,zn=null,cr=null;function hr(){if(cr)return cr;var e,n=zn,l=n.length,h,_="value"in Sn?Sn.value:Sn.textContent,y=_.length;for(e=0;e<l&&n[e]===_[e];e++);var C=l-e;for(h=1;h<=C&&n[l-h]===_[y-h];h++);return cr=_.slice(e,1<h?1-h:void 0)}function Ge(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function wn(){return!0}function xl(){return!1}function vi(e){function n(l,h,_,y,C){this._reactName=l,this._targetInst=_,this.type=h,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(l=e[M],this[M]=l?l(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wn:xl,this.isPropagationStopped=xl,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wn)},persist:function(){},isPersistent:wn}),n}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=vi(Ts),bs=v({},Ts,{view:0,detail:0}),vf=vi(bs),lo,Yt,da,Ci=v({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==da&&(da&&e.type==="mousemove"?(lo=e.screenX-da.screenX,Yt=e.screenY-da.screenY):Yt=lo=0,da=e),lo)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),fr=vi(Ci),nc=v({},Ci,{dataTransfer:0}),xf=vi(nc),El=v({},bs,{relatedTarget:0}),Sl=vi(El),sc=v({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Ef=vi(sc),Sf=v({},Ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wl=vi(Sf),wf=v({},Ts,{data:0}),tn=vi(wf),Cf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ac(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Jn[e])?!!n[e]:!1}function uo(){return ac}var Cl=v({},bs,{key:function(e){if(e.key){var n=Cf[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ge(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uo,charCode:function(e){return e.type==="keypress"?Ge(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ge(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tf=vi(Cl),oc=v({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tl=vi(oc),bf=v({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uo}),Rf=vi(bf),bl=v({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lf=vi(bl),lc=v({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uc=vi(lc),co=v({},Ts,{newState:0,oldState:0}),Rs=vi(co),Mf=[9,13,27,32],Ls=En&&"CompositionEvent"in window,ui=null;En&&"documentMode"in document&&(ui=document.documentMode);var cc=En&&"TextEvent"in window&&!ui,Rl=En&&(!Ls||ui&&8<ui&&11>=ui),hc=" ",ho=!1;function fo(e,n){switch(e){case"keyup":return Mf.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dr=!1;function dc(e,n){switch(e){case"compositionend":return fc(n);case"keypress":return n.which!==32?null:(ho=!0,hc);case"textInput":return e=n.data,e===hc&&ho?null:e;default:return null}}function Af(e,n){if(dr)return e==="compositionend"||!Ls&&fo(e,n)?(e=hr(),cr=zn=Sn=null,dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Rl&&n.locale!=="ko"?null:n.data;default:return null}}var en={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ms(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!en[e.type]:n==="textarea"}function gc(e,n,l,h){ws?Qn?Qn.push(h):Qn=[h]:ws=h,n=ih(n,"onChange"),0<n.length&&(l=new fa("onChange","change",null,l,h),e.push({event:l,listeners:n}))}var zi=null,ga=null;function gr(e){ey(e,0)}function go(e){var n=vn(e);if(Ft(n))return e}function mr(e,n){if(e==="change")return n}var Ll=!1;if(En){var _r;if(En){var Ml="oninput"in document;if(!Ml){var Nn=document.createElement("div");Nn.setAttribute("oninput","return;"),Ml=typeof Nn.oninput=="function"}_r=Ml}else _r=!1;Ll=_r&&(!document.documentMode||9<document.documentMode)}function ma(){zi&&(zi.detachEvent("onpropertychange",mc),ga=zi=null)}function mc(e){if(e.propertyName==="value"&&go(ga)){var n=[];gc(n,ga,e,ur(e)),$i(gr,n)}}function Al(e,n,l){e==="focusin"?(ma(),zi=n,ga=l,zi.attachEvent("onpropertychange",mc)):e==="focusout"&&ma()}function Of(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return go(ga)}function In(e,n){if(e==="click")return go(n)}function Df(e,n){if(e==="input"||e==="change")return go(n)}function pr(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ni=typeof Object.is=="function"?Object.is:pr;function Ii(e,n){if(Ni(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var l=Object.keys(e),h=Object.keys(n);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var _=l[h];if(!me.call(n,_)||!Ni(e[_],n[_]))return!1}return!0}function _a(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ol(e,n){var l=_a(e);e=0;for(var h;l;){if(l.nodeType===3){if(h=e+l.textContent.length,e<=n&&h>=n)return{node:l,offset:n-e};e=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=_a(l)}}function mo(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?mo(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function pa(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ye(e.document);n instanceof e.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)e=n.contentWindow;else break;n=ye(e.document)}return n}function ya(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var _o=En&&"documentMode"in document&&11>=document.documentMode,nn=null,yr=null,As=null,po=!1;function _c(e,n,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;po||nn==null||nn!==ye(h)||(h=nn,"selectionStart"in h&&ya(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),As&&Ii(As,h)||(As=h,h=ih(yr,"onSelect"),0<h.length&&(n=new fa("onSelect","select",null,n,l),e.push({event:n,listeners:h}),n.target=nn)))}function Cn(e,n){var l={};return l[e.toLowerCase()]=n.toLowerCase(),l["Webkit"+e]="webkit"+n,l["Moz"+e]="moz"+n,l}var vr={animationend:Cn("Animation","AnimationEnd"),animationiteration:Cn("Animation","AnimationIteration"),animationstart:Cn("Animation","AnimationStart"),transitionrun:Cn("Transition","TransitionRun"),transitionstart:Cn("Transition","TransitionStart"),transitioncancel:Cn("Transition","TransitionCancel"),transitionend:Cn("Transition","TransitionEnd")},yo={},pc={};En&&(pc=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function $n(e){if(yo[e])return yo[e];if(!vr[e])return e;var n=vr[e],l;for(l in n)if(n.hasOwnProperty(l)&&l in pc)return yo[e]=n[l];return e}var yc=$n("animationend"),sn=$n("animationiteration"),va=$n("animationstart"),Pf=$n("transitionrun"),vo=$n("transitionstart"),zf=$n("transitioncancel"),Dl=$n("transitionend"),vc=new Map,Os="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Os.push("scrollEnd");function rn(e,n){vc.set(e,n),ys(n,[e])}var Ds=new WeakMap;function ki(e,n){if(typeof e=="object"&&e!==null){var l=Ds.get(e);return l!==void 0?l:(n={value:e,source:n,stack:pe(n)},Ds.set(e,n),n)}return{value:e,source:n,stack:pe(n)}}var Fi=[],xr=0,an=0;function xa(){for(var e=xr,n=an=xr=0;n<e;){var l=Fi[n];Fi[n++]=null;var h=Fi[n];Fi[n++]=null;var _=Fi[n];Fi[n++]=null;var y=Fi[n];if(Fi[n++]=null,h!==null&&_!==null){var C=h.pending;C===null?_.next=_:(_.next=C.next,C.next=_),h.pending=_}y!==0&&Sa(l,_,y)}}function Ea(e,n,l,h){Fi[xr++]=e,Fi[xr++]=n,Fi[xr++]=l,Fi[xr++]=h,an|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Ps(e,n,l,h){return Ea(e,n,l,h),ts(e)}function Er(e,n){return Ea(e,null,null,n),ts(e)}function Sa(e,n,l){e.lanes|=l;var h=e.alternate;h!==null&&(h.lanes|=l);for(var _=!1,y=e.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(e=y.stateNode,e===null||e._visibility&1||(_=!0)),e=y,y=y.return;return e.tag===3?(y=e.stateNode,_&&n!==null&&(_=31-Se(l),e=y.hiddenUpdates,h=e[_],h===null?e[_]=[n]:h.push(n),n.lane=l|536870912),y):null}function ts(e){if(50<eu)throw eu=0,Od=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var zs={};function xc(e,n,l,h){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(e,n,l,h){return new xc(e,n,l,h)}function xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tn(e,n){var l=e.alternate;return l===null?(l=Gi(e.tag,n,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=n,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,n=e.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Pl(e,n){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,n=l.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function wa(e,n,l,h,_,y){var C=0;if(h=e,typeof e=="function")xo(e)&&(C=1);else if(typeof e=="string")C=P1(e,l,lt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case dt:return e=Gi(31,l,n,_),e.elementType=dt,e.lanes=y,e;case b:return es(l.children,_,y,n);case O:C=8,_|=24;break;case D:return e=Gi(12,l,n,_|2),e.elementType=D,e.lanes=y,e;case X:return e=Gi(13,l,n,_),e.elementType=X,e.lanes=y,e;case $:return e=Gi(19,l,n,_),e.elementType=$,e.lanes=y,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:case z:C=10;break t;case k:C=9;break t;case j:C=11;break t;case it:C=14;break t;case rt:C=16,h=null;break t}C=29,l=Error(s(130,e===null?"null":typeof e,"")),h=null}return n=Gi(C,l,n,_),n.elementType=e,n.type=h,n.lanes=y,n}function es(e,n,l,h){return e=Gi(7,e,h,n),e.lanes=l,e}function zl(e,n,l){return e=Gi(6,e,null,n),e.lanes=l,e}function Eo(e,n,l){return n=Gi(4,e.children!==null?e.children:[],e.key,n),n.lanes=l,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Ns=[],Sr=0,r=null,c=0,m=[],x=0,S=null,R=1,N="";function V(e,n){Ns[Sr++]=c,Ns[Sr++]=r,r=e,c=n}function et(e,n,l){m[x++]=R,m[x++]=N,m[x++]=S,S=e;var h=R;e=N;var _=32-Se(h)-1;h&=~(1<<_),l+=1;var y=32-Se(n)+_;if(30<y){var C=_-_%5;y=(h&(1<<C)-1).toString(32),h>>=C,_-=C,R=1<<32-Se(n)+_|l<<_|h,N=y+e}else R=1<<y|l<<_|h,N=e}function ft(e){e.return!==null&&(V(e,1),et(e,1,0))}function xt(e){for(;e===r;)r=Ns[--Sr],Ns[Sr]=null,c=Ns[--Sr],Ns[Sr]=null;for(;e===S;)S=m[--x],m[x]=null,N=m[--x],m[x]=null,R=m[--x],m[x]=null}var St=null,Tt=null,Nt=!1,ve=null,ze=!1,ci=Error(s(519));function qi(e){var n=Error(s(418,""));throw Cr(ki(n,e)),ci}function Ec(e){var n=e.stateNode,l=e.type,h=e.memoizedProps;switch(n[De]=e,n[re]=h,l){case"dialog":Kt("cancel",n),Kt("close",n);break;case"iframe":case"object":case"embed":Kt("load",n);break;case"video":case"audio":for(l=0;l<nu.length;l++)Kt(nu[l],n);break;case"source":Kt("error",n);break;case"img":case"image":case"link":Kt("error",n),Kt("load",n);break;case"details":Kt("toggle",n);break;case"input":Kt("invalid",n),ec(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),rr(n);break;case"select":Kt("invalid",n);break;case"textarea":Kt("invalid",n),Wn(n,h.value,h.defaultValue,h.children),rr(n)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||n.textContent===""+l||h.suppressHydrationWarning===!0||ry(n.textContent,l)?(h.popover!=null&&(Kt("beforetoggle",n),Kt("toggle",n)),h.onScroll!=null&&Kt("scroll",n),h.onScrollEnd!=null&&Kt("scrollend",n),h.onClick!=null&&(n.onclick=nh),n=!0):n=!1,n||qi(e)}function Sc(e){for(St=e.return;St;)switch(St.tag){case 5:case 13:ze=!1;return;case 27:case 3:ze=!0;return;default:St=St.return}}function Ca(e){if(e!==St)return!1;if(!Nt)return Sc(e),Nt=!0,!1;var n=e.tag,l;if((l=n!==3&&n!==27)&&((l=n===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Vd(e.type,e.memoizedProps)),l=!l),l&&Tt&&qi(e),Sc(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(l=e.data,l==="/$"){if(n===0){Tt=Bn(e.nextSibling);break t}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++;e=e.nextSibling}Tt=null}}else n===27?(n=Tt,Gr(e.type)?(e=Qd,Qd=null,Tt=e):Tt=n):Tt=St?Bn(e.stateNode.nextSibling):null;return!0}function wr(){Tt=St=null,Nt=!1}function wc(){var e=ve;return e!==null&&(Qi===null?Qi=e:Qi.push.apply(Qi,e),ve=null),e}function Cr(e){ve===null?ve=[e]:ve.push(e)}var Le=U(null),bn=null,kn=null;function is(e,n,l){st(Le,n._currentValue),n._currentValue=l}function Fn(e){e._currentValue=Le.current,G(Le)}function Ta(e,n,l){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===l)break;e=e.return}}function So(e,n,l,h){var _=e.child;for(_!==null&&(_.return=e);_!==null;){var y=_.dependencies;if(y!==null){var C=_.child;y=y.firstContext;t:for(;y!==null;){var M=y;y=_;for(var I=0;I<n.length;I++)if(M.context===n[I]){y.lanes|=l,M=y.alternate,M!==null&&(M.lanes|=l),Ta(y.return,l,e),h||(C=null);break t}y=M.next}}else if(_.tag===18){if(C=_.return,C===null)throw Error(s(341));C.lanes|=l,y=C.alternate,y!==null&&(y.lanes|=l),Ta(C,l,e),C=null}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===e){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}}function ba(e,n,l,h){e=null;for(var _=n,y=!1;_!==null;){if(!y){if((_.flags&524288)!==0)y=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var C=_.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var M=_.type;Ni(_.pendingProps.value,C.value)||(e!==null?e.push(M):e=[M])}}else if(_===jt.current){if(C=_.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(e!==null?e.push(uu):e=[uu])}_=_.return}e!==null&&So(n,e,l,h),n.flags|=262144}function Cc(e){for(e=e.firstContext;e!==null;){if(!Ni(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ra(e){bn=e,kn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ti(e){return Ym(bn,e)}function Tc(e,n){return bn===null&&Ra(e),Ym(e,n)}function Ym(e,n){var l=n._currentValue;if(n={context:n,memoizedValue:l,next:null},kn===null){if(e===null)throw Error(s(308));kn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else kn=kn.next=n;return l}var Dx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(l,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(l){return l()})}},Px=a.unstable_scheduleCallback,zx=a.unstable_NormalPriority,ti={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nf(){return{controller:new Dx,data:new Map,refCount:0}}function Nl(e){e.refCount--,e.refCount===0&&Px(zx,function(){e.controller.abort()})}var Il=null,If=0,wo=0,Co=null;function Nx(e,n){if(Il===null){var l=Il=[];If=0,wo=Fd(),Co={status:"pending",value:void 0,then:function(h){l.push(h)}}}return If++,n.then(Xm,Xm),n}function Xm(){if(--If===0&&Il!==null){Co!==null&&(Co.status="fulfilled");var e=Il;Il=null,wo=0,Co=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Ix(e,n){var l=[],h={status:"pending",value:null,reason:null,then:function(_){l.push(_)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var _=0;_<l.length;_++)(0,l[_])(n)},function(_){for(h.status="rejected",h.reason=_,_=0;_<l.length;_++)(0,l[_])(void 0)}),h}var Vm=F.S;F.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Nx(e,n),Vm!==null&&Vm(e,n)};var La=U(null);function kf(){var e=La.current;return e!==null?e:xe.pooledCache}function bc(e,n){n===null?st(La,La.current):st(La,n.pool)}function qm(){var e=kf();return e===null?null:{parent:ti._currentValue,pool:e}}var kl=Error(s(460)),Km=Error(s(474)),Rc=Error(s(542)),Ff={then:function(){}};function Wm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Lc(){}function Qm(e,n,l){switch(l=e[l],l===void 0?e.push(n):l!==n&&(n.then(Lc,Lc),n=l),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,$m(e),e;default:if(typeof n.status=="string")n.then(Lc,Lc);else{if(e=xe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var _=n;_.status="fulfilled",_.value=h}},function(h){if(n.status==="pending"){var _=n;_.status="rejected",_.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,$m(e),e}throw Fl=n,kl}}var Fl=null;function Jm(){if(Fl===null)throw Error(s(459));var e=Fl;return Fl=null,e}function $m(e){if(e===kl||e===Rc)throw Error(s(483))}var Tr=!1;function Gf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function br(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Rr(e,n,l){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(oe&2)!==0){var _=h.pending;return _===null?n.next=n:(n.next=_.next,_.next=n),h.pending=n,n=ts(e),Sa(e,null,l),n}return Ea(e,h,n,l),ts(e)}function Gl(e,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,l|=h,n.lanes=l,oi(e,l)}}function Zf(e,n){var l=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var _=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?_=y=C:y=y.next=C,l=l.next}while(l!==null);y===null?_=y=n:y=y.next=n}else _=y=n;l={baseState:h.baseState,firstBaseUpdate:_,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=n:e.next=n,l.lastBaseUpdate=n}var jf=!1;function Bl(){if(jf){var e=Co;if(e!==null)throw e}}function Zl(e,n,l,h){jf=!1;var _=e.updateQueue;Tr=!1;var y=_.firstBaseUpdate,C=_.lastBaseUpdate,M=_.shared.pending;if(M!==null){_.shared.pending=null;var I=M,W=I.next;I.next=null,C===null?y=W:C.next=W,C=I;var at=e.alternate;at!==null&&(at=at.updateQueue,M=at.lastBaseUpdate,M!==C&&(M===null?at.firstBaseUpdate=W:M.next=W,at.lastBaseUpdate=I))}if(y!==null){var ct=_.baseState;C=0,at=W=I=null,M=y;do{var J=M.lane&-536870913,tt=J!==M.lane;if(tt?(te&J)===J:(h&J)===J){J!==0&&J===wo&&(jf=!0),at!==null&&(at=at.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var zt=e,Dt=M;J=n;var fe=l;switch(Dt.tag){case 1:if(zt=Dt.payload,typeof zt=="function"){ct=zt.call(fe,ct,J);break t}ct=zt;break t;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Dt.payload,J=typeof zt=="function"?zt.call(fe,ct,J):zt,J==null)break t;ct=v({},ct,J);break t;case 2:Tr=!0}}J=M.callback,J!==null&&(e.flags|=64,tt&&(e.flags|=8192),tt=_.callbacks,tt===null?_.callbacks=[J]:tt.push(J))}else tt={lane:J,tag:M.tag,payload:M.payload,callback:M.callback,next:null},at===null?(W=at=tt,I=ct):at=at.next=tt,C|=J;if(M=M.next,M===null){if(M=_.shared.pending,M===null)break;tt=M,M=tt.next,tt.next=null,_.lastBaseUpdate=tt,_.shared.pending=null}}while(!0);at===null&&(I=ct),_.baseState=I,_.firstBaseUpdate=W,_.lastBaseUpdate=at,y===null&&(_.shared.lanes=0),Nr|=C,e.lanes=C,e.memoizedState=ct}}function t_(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function e_(e,n){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)t_(l[e],n)}var To=U(null),Mc=U(0);function i_(e,n){e=js,st(Mc,e),st(To,n),js=e|n.baseLanes}function Uf(){st(Mc,js),st(To,To.current)}function Hf(){js=Mc.current,G(To),G(Mc)}var Lr=0,Ht=null,ce=null,Ye=null,Ac=!1,bo=!1,Ma=!1,Oc=0,jl=0,Ro=null,kx=0;function je(){throw Error(s(321))}function Yf(e,n){if(n===null)return!1;for(var l=0;l<n.length&&l<e.length;l++)if(!Ni(e[l],n[l]))return!1;return!0}function Xf(e,n,l,h,_,y){return Lr=y,Ht=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=e===null||e.memoizedState===null?G_:B_,Ma=!1,y=l(h,_),Ma=!1,bo&&(y=s_(n,l,h,_)),n_(e),y}function n_(e){F.H=kc;var n=ce!==null&&ce.next!==null;if(Lr=0,Ye=ce=Ht=null,Ac=!1,jl=0,Ro=null,n)throw Error(s(300));e===null||hi||(e=e.dependencies,e!==null&&Cc(e)&&(hi=!0))}function s_(e,n,l,h){Ht=e;var _=0;do{if(bo&&(Ro=null),jl=0,bo=!1,25<=_)throw Error(s(301));if(_+=1,Ye=ce=null,e.updateQueue!=null){var y=e.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}F.H=Hx,y=n(l,h)}while(bo);return y}function Fx(){var e=F.H,n=e.useState()[0];return n=typeof n.then=="function"?Ul(n):n,e=e.useState()[0],(ce!==null?ce.memoizedState:null)!==e&&(Ht.flags|=1024),n}function Vf(){var e=Oc!==0;return Oc=0,e}function qf(e,n,l){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l}function Kf(e){if(Ac){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Ac=!1}Lr=0,Ye=ce=Ht=null,bo=!1,jl=Oc=0,Ro=null}function Ki(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ht.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Xe(){if(ce===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=ce.next;var n=Ye===null?Ht.memoizedState:Ye.next;if(n!==null)Ye=n,ce=e;else{if(e===null)throw Ht.alternate===null?Error(s(467)):Error(s(310));ce=e,e={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},Ye===null?Ht.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(e){var n=jl;return jl+=1,Ro===null&&(Ro=[]),e=Qm(Ro,e,n),n=Ht,(Ye===null?n.memoizedState:Ye.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?G_:B_),e}function Dc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ul(e);if(e.$$typeof===z)return Ti(e)}throw Error(s(438,String(e)))}function Qf(e){var n=null,l=Ht.updateQueue;if(l!==null&&(n=l.memoCache),n==null){var h=Ht.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(_){return _.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),l===null&&(l=Wf(),Ht.updateQueue=l),l.memoCache=n,l=n.data[n.index],l===void 0)for(l=n.data[n.index]=Array(e),h=0;h<e;h++)l[h]=pt;return n.index++,l}function Is(e,n){return typeof n=="function"?n(e):n}function Pc(e){var n=Xe();return Jf(n,ce,e)}function Jf(e,n,l){var h=e.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var _=e.baseQueue,y=h.pending;if(y!==null){if(_!==null){var C=_.next;_.next=y.next,y.next=C}n.baseQueue=_=y,h.pending=null}if(y=e.baseState,_===null)e.memoizedState=y;else{n=_.next;var M=C=null,I=null,W=n,at=!1;do{var ct=W.lane&-536870913;if(ct!==W.lane?(te&ct)===ct:(Lr&ct)===ct){var J=W.revertLane;if(J===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ct===wo&&(at=!0);else if((Lr&J)===J){W=W.next,J===wo&&(at=!0);continue}else ct={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},I===null?(M=I=ct,C=y):I=I.next=ct,Ht.lanes|=J,Nr|=J;ct=W.action,Ma&&l(y,ct),y=W.hasEagerState?W.eagerState:l(y,ct)}else J={lane:ct,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},I===null?(M=I=J,C=y):I=I.next=J,Ht.lanes|=ct,Nr|=ct;W=W.next}while(W!==null&&W!==n);if(I===null?C=y:I.next=M,!Ni(y,e.memoizedState)&&(hi=!0,at&&(l=Co,l!==null)))throw l;e.memoizedState=y,e.baseState=C,e.baseQueue=I,h.lastRenderedState=y}return _===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function $f(e){var n=Xe(),l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=e;var h=l.dispatch,_=l.pending,y=n.memoizedState;if(_!==null){l.pending=null;var C=_=_.next;do y=e(y,C.action),C=C.next;while(C!==_);Ni(y,n.memoizedState)||(hi=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),l.lastRenderedState=y}return[y,h]}function r_(e,n,l){var h=Ht,_=Xe(),y=Nt;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=n();var C=!Ni((ce||_).memoizedState,l);C&&(_.memoizedState=l,hi=!0),_=_.queue;var M=l_.bind(null,h,_,e);if(Hl(2048,8,M,[e]),_.getSnapshot!==n||C||Ye!==null&&Ye.memoizedState.tag&1){if(h.flags|=2048,Lo(9,zc(),o_.bind(null,h,_,l,n),null),xe===null)throw Error(s(349));y||(Lr&124)!==0||a_(h,n,l)}return l}function a_(e,n,l){e.flags|=16384,e={getSnapshot:n,value:l},n=Ht.updateQueue,n===null?(n=Wf(),Ht.updateQueue=n,n.stores=[e]):(l=n.stores,l===null?n.stores=[e]:l.push(e))}function o_(e,n,l,h){n.value=l,n.getSnapshot=h,u_(n)&&c_(e)}function l_(e,n,l){return l(function(){u_(n)&&c_(e)})}function u_(e){var n=e.getSnapshot;e=e.value;try{var l=n();return!Ni(e,l)}catch{return!0}}function c_(e){var n=Er(e,2);n!==null&&hn(n,e,2)}function td(e){var n=Ki();if(typeof e=="function"){var l=e;if(e=l(),Ma){be(!0);try{l()}finally{be(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},n}function h_(e,n,l,h){return e.baseState=l,Jf(e,ce,typeof h=="function"?h:Is)}function Gx(e,n,l,h,_){if(Ic(e))throw Error(s(485));if(e=n.action,e!==null){var y={payload:_,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};F.T!==null?l(!0):y.isTransition=!1,h(y),l=n.pending,l===null?(y.next=n.pending=y,f_(n,y)):(y.next=l.next,n.pending=l.next=y)}}function f_(e,n){var l=n.action,h=n.payload,_=e.state;if(n.isTransition){var y=F.T,C={};F.T=C;try{var M=l(_,h),I=F.S;I!==null&&I(C,M),d_(e,n,M)}catch(W){ed(e,n,W)}finally{F.T=y}}else try{y=l(_,h),d_(e,n,y)}catch(W){ed(e,n,W)}}function d_(e,n,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){g_(e,n,h)},function(h){return ed(e,n,h)}):g_(e,n,l)}function g_(e,n,l){n.status="fulfilled",n.value=l,m_(n),e.state=l,n=e.pending,n!==null&&(l=n.next,l===n?e.pending=null:(l=l.next,n.next=l,f_(e,l)))}function ed(e,n,l){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=l,m_(n),n=n.next;while(n!==h)}e.action=null}function m_(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function __(e,n){return n}function p_(e,n){if(Nt){var l=xe.formState;if(l!==null){t:{var h=Ht;if(Nt){if(Tt){e:{for(var _=Tt,y=ze;_.nodeType!==8;){if(!y){_=null;break e}if(_=Bn(_.nextSibling),_===null){_=null;break e}}y=_.data,_=y==="F!"||y==="F"?_:null}if(_){Tt=Bn(_.nextSibling),h=_.data==="F!";break t}}qi(h)}h=!1}h&&(n=l[0])}}return l=Ki(),l.memoizedState=l.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:__,lastRenderedState:n},l.queue=h,l=I_.bind(null,Ht,h),h.dispatch=l,h=td(!1),y=ad.bind(null,Ht,!1,h.queue),h=Ki(),_={state:n,dispatch:null,action:e,pending:null},h.queue=_,l=Gx.bind(null,Ht,_,y,l),_.dispatch=l,h.memoizedState=e,[n,l,!1]}function y_(e){var n=Xe();return v_(n,ce,e)}function v_(e,n,l){if(n=Jf(e,n,__)[0],e=Pc(Is)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=Ul(n)}catch(C){throw C===kl?Rc:C}else h=n;n=Xe();var _=n.queue,y=_.dispatch;return l!==n.memoizedState&&(Ht.flags|=2048,Lo(9,zc(),Bx.bind(null,_,l),null)),[h,y,e]}function Bx(e,n){e.action=n}function x_(e){var n=Xe(),l=ce;if(l!==null)return v_(n,l,e);Xe(),n=n.memoizedState,l=Xe();var h=l.queue.dispatch;return l.memoizedState=e,[n,h,!1]}function Lo(e,n,l,h){return e={tag:e,create:l,deps:h,inst:n,next:null},n=Ht.updateQueue,n===null&&(n=Wf(),Ht.updateQueue=n),l=n.lastEffect,l===null?n.lastEffect=e.next=e:(h=l.next,l.next=e,e.next=h,n.lastEffect=e),e}function zc(){return{destroy:void 0,resource:void 0}}function E_(){return Xe().memoizedState}function Nc(e,n,l,h){var _=Ki();h=h===void 0?null:h,Ht.flags|=e,_.memoizedState=Lo(1|n,zc(),l,h)}function Hl(e,n,l,h){var _=Xe();h=h===void 0?null:h;var y=_.memoizedState.inst;ce!==null&&h!==null&&Yf(h,ce.memoizedState.deps)?_.memoizedState=Lo(n,y,l,h):(Ht.flags|=e,_.memoizedState=Lo(1|n,y,l,h))}function S_(e,n){Nc(8390656,8,e,n)}function w_(e,n){Hl(2048,8,e,n)}function C_(e,n){return Hl(4,2,e,n)}function T_(e,n){return Hl(4,4,e,n)}function b_(e,n){if(typeof n=="function"){e=e();var l=n(e);return function(){typeof l=="function"?l():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function R_(e,n,l){l=l!=null?l.concat([e]):null,Hl(4,4,b_.bind(null,n,e),l)}function id(){}function L_(e,n){var l=Xe();n=n===void 0?null:n;var h=l.memoizedState;return n!==null&&Yf(n,h[1])?h[0]:(l.memoizedState=[e,n],e)}function M_(e,n){var l=Xe();n=n===void 0?null:n;var h=l.memoizedState;if(n!==null&&Yf(n,h[1]))return h[0];if(h=e(),Ma){be(!0);try{e()}finally{be(!1)}}return l.memoizedState=[h,n],h}function nd(e,n,l){return l===void 0||(Lr&1073741824)!==0?e.memoizedState=n:(e.memoizedState=l,e=Dp(),Ht.lanes|=e,Nr|=e,l)}function A_(e,n,l,h){return Ni(l,n)?l:To.current!==null?(e=nd(e,l,h),Ni(e,n)||(hi=!0),e):(Lr&42)===0?(hi=!0,e.memoizedState=l):(e=Dp(),Ht.lanes|=e,Nr|=e,n)}function O_(e,n,l,h,_){var y=H.p;H.p=y!==0&&8>y?y:8;var C=F.T,M={};F.T=M,ad(e,!1,n,l);try{var I=_(),W=F.S;if(W!==null&&W(M,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var at=Ix(I,h);Yl(e,n,at,cn(e))}else Yl(e,n,h,cn(e))}catch(ct){Yl(e,n,{then:function(){},status:"rejected",reason:ct},cn())}finally{H.p=y,F.T=C}}function Zx(){}function sd(e,n,l,h){if(e.tag!==5)throw Error(s(476));var _=D_(e).queue;O_(e,_,n,Q,l===null?Zx:function(){return P_(e),l(h)})}function D_(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:Q},next:null};var l={};return n.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:l},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function P_(e){var n=D_(e).next.queue;Yl(e,n,{},cn())}function rd(){return Ti(uu)}function z_(){return Xe().memoizedState}function N_(){return Xe().memoizedState}function jx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var l=cn();e=br(l);var h=Rr(n,e,l);h!==null&&(hn(h,n,l),Gl(h,n,l)),n={cache:Nf()},e.payload=n;return}n=n.return}}function Ux(e,n,l){var h=cn();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ic(e)?k_(n,l):(l=Ps(e,n,l,h),l!==null&&(hn(l,e,h),F_(l,n,h)))}function I_(e,n,l){var h=cn();Yl(e,n,l,h)}function Yl(e,n,l,h){var _={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ic(e))k_(n,_);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var C=n.lastRenderedState,M=y(C,l);if(_.hasEagerState=!0,_.eagerState=M,Ni(M,C))return Ea(e,n,_,0),xe===null&&xa(),!1}catch{}finally{}if(l=Ps(e,n,_,h),l!==null)return hn(l,e,h),F_(l,n,h),!0}return!1}function ad(e,n,l,h){if(h={lane:2,revertLane:Fd(),action:h,hasEagerState:!1,eagerState:null,next:null},Ic(e)){if(n)throw Error(s(479))}else n=Ps(e,l,h,2),n!==null&&hn(n,e,2)}function Ic(e){var n=e.alternate;return e===Ht||n!==null&&n===Ht}function k_(e,n){bo=Ac=!0;var l=e.pending;l===null?n.next=n:(n.next=l.next,l.next=n),e.pending=n}function F_(e,n,l){if((l&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,l|=h,n.lanes=l,oi(e,l)}}var kc={readContext:Ti,use:Dc,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useLayoutEffect:je,useInsertionEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useSyncExternalStore:je,useId:je,useHostTransitionStatus:je,useFormState:je,useActionState:je,useOptimistic:je,useMemoCache:je,useCacheRefresh:je},G_={readContext:Ti,use:Dc,useCallback:function(e,n){return Ki().memoizedState=[e,n===void 0?null:n],e},useContext:Ti,useEffect:S_,useImperativeHandle:function(e,n,l){l=l!=null?l.concat([e]):null,Nc(4194308,4,b_.bind(null,n,e),l)},useLayoutEffect:function(e,n){return Nc(4194308,4,e,n)},useInsertionEffect:function(e,n){Nc(4,2,e,n)},useMemo:function(e,n){var l=Ki();n=n===void 0?null:n;var h=e();if(Ma){be(!0);try{e()}finally{be(!1)}}return l.memoizedState=[h,n],h},useReducer:function(e,n,l){var h=Ki();if(l!==void 0){var _=l(n);if(Ma){be(!0);try{l(n)}finally{be(!1)}}}else _=n;return h.memoizedState=h.baseState=_,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:_},h.queue=e,e=e.dispatch=Ux.bind(null,Ht,e),[h.memoizedState,e]},useRef:function(e){var n=Ki();return e={current:e},n.memoizedState=e},useState:function(e){e=td(e);var n=e.queue,l=I_.bind(null,Ht,n);return n.dispatch=l,[e.memoizedState,l]},useDebugValue:id,useDeferredValue:function(e,n){var l=Ki();return nd(l,e,n)},useTransition:function(){var e=td(!1);return e=O_.bind(null,Ht,e.queue,!0,!1),Ki().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,l){var h=Ht,_=Ki();if(Nt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=n(),xe===null)throw Error(s(349));(te&124)!==0||a_(h,n,l)}_.memoizedState=l;var y={value:l,getSnapshot:n};return _.queue=y,S_(l_.bind(null,h,y,e),[e]),h.flags|=2048,Lo(9,zc(),o_.bind(null,h,y,l,n),null),l},useId:function(){var e=Ki(),n=xe.identifierPrefix;if(Nt){var l=N,h=R;l=(h&~(1<<32-Se(h)-1)).toString(32)+l,n=""+n+"R"+l,l=Oc++,0<l&&(n+="H"+l.toString(32)),n+=""}else l=kx++,n=""+n+"r"+l.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:rd,useFormState:p_,useActionState:p_,useOptimistic:function(e){var n=Ki();n.memoizedState=n.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=l,n=ad.bind(null,Ht,!0,l),l.dispatch=n,[e,n]},useMemoCache:Qf,useCacheRefresh:function(){return Ki().memoizedState=jx.bind(null,Ht)}},B_={readContext:Ti,use:Dc,useCallback:L_,useContext:Ti,useEffect:w_,useImperativeHandle:R_,useInsertionEffect:C_,useLayoutEffect:T_,useMemo:M_,useReducer:Pc,useRef:E_,useState:function(){return Pc(Is)},useDebugValue:id,useDeferredValue:function(e,n){var l=Xe();return A_(l,ce.memoizedState,e,n)},useTransition:function(){var e=Pc(Is)[0],n=Xe().memoizedState;return[typeof e=="boolean"?e:Ul(e),n]},useSyncExternalStore:r_,useId:z_,useHostTransitionStatus:rd,useFormState:y_,useActionState:y_,useOptimistic:function(e,n){var l=Xe();return h_(l,ce,e,n)},useMemoCache:Qf,useCacheRefresh:N_},Hx={readContext:Ti,use:Dc,useCallback:L_,useContext:Ti,useEffect:w_,useImperativeHandle:R_,useInsertionEffect:C_,useLayoutEffect:T_,useMemo:M_,useReducer:$f,useRef:E_,useState:function(){return $f(Is)},useDebugValue:id,useDeferredValue:function(e,n){var l=Xe();return ce===null?nd(l,e,n):A_(l,ce.memoizedState,e,n)},useTransition:function(){var e=$f(Is)[0],n=Xe().memoizedState;return[typeof e=="boolean"?e:Ul(e),n]},useSyncExternalStore:r_,useId:z_,useHostTransitionStatus:rd,useFormState:x_,useActionState:x_,useOptimistic:function(e,n){var l=Xe();return ce!==null?h_(l,ce,e,n):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:N_},Mo=null,Xl=0;function Fc(e){var n=Xl;return Xl+=1,Mo===null&&(Mo=[]),Qm(Mo,e,n)}function Vl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Gc(e,n){throw n.$$typeof===E?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Z_(e){var n=e._init;return n(e._payload)}function j_(e){function n(Y,B){if(e){var q=Y.deletions;q===null?(Y.deletions=[B],Y.flags|=16):q.push(B)}}function l(Y,B){if(!e)return null;for(;B!==null;)n(Y,B),B=B.sibling;return null}function h(Y){for(var B=new Map;Y!==null;)Y.key!==null?B.set(Y.key,Y):B.set(Y.index,Y),Y=Y.sibling;return B}function _(Y,B){return Y=Tn(Y,B),Y.index=0,Y.sibling=null,Y}function y(Y,B,q){return Y.index=q,e?(q=Y.alternate,q!==null?(q=q.index,q<B?(Y.flags|=67108866,B):q):(Y.flags|=67108866,B)):(Y.flags|=1048576,B)}function C(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function M(Y,B,q,ut){return B===null||B.tag!==6?(B=zl(q,Y.mode,ut),B.return=Y,B):(B=_(B,q),B.return=Y,B)}function I(Y,B,q,ut){var wt=q.type;return wt===b?at(Y,B,q.props.children,ut,q.key):B!==null&&(B.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===rt&&Z_(wt)===B.type)?(B=_(B,q.props),Vl(B,q),B.return=Y,B):(B=wa(q.type,q.key,q.props,null,Y.mode,ut),Vl(B,q),B.return=Y,B)}function W(Y,B,q,ut){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=Eo(q,Y.mode,ut),B.return=Y,B):(B=_(B,q.children||[]),B.return=Y,B)}function at(Y,B,q,ut,wt){return B===null||B.tag!==7?(B=es(q,Y.mode,ut,wt),B.return=Y,B):(B=_(B,q),B.return=Y,B)}function ct(Y,B,q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=zl(""+B,Y.mode,q),B.return=Y,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return q=wa(B.type,B.key,B.props,null,Y.mode,q),Vl(q,B),q.return=Y,q;case T:return B=Eo(B,Y.mode,q),B.return=Y,B;case rt:var ut=B._init;return B=ut(B._payload),ct(Y,B,q)}if(ht(B)||nt(B))return B=es(B,Y.mode,q,null),B.return=Y,B;if(typeof B.then=="function")return ct(Y,Fc(B),q);if(B.$$typeof===z)return ct(Y,Tc(Y,B),q);Gc(Y,B)}return null}function J(Y,B,q,ut){var wt=B!==null?B.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return wt!==null?null:M(Y,B,""+q,ut);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return q.key===wt?I(Y,B,q,ut):null;case T:return q.key===wt?W(Y,B,q,ut):null;case rt:return wt=q._init,q=wt(q._payload),J(Y,B,q,ut)}if(ht(q)||nt(q))return wt!==null?null:at(Y,B,q,ut,null);if(typeof q.then=="function")return J(Y,B,Fc(q),ut);if(q.$$typeof===z)return J(Y,B,Tc(Y,q),ut);Gc(Y,q)}return null}function tt(Y,B,q,ut,wt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Y=Y.get(q)||null,M(B,Y,""+ut,wt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case w:return Y=Y.get(ut.key===null?q:ut.key)||null,I(B,Y,ut,wt);case T:return Y=Y.get(ut.key===null?q:ut.key)||null,W(B,Y,ut,wt);case rt:var Xt=ut._init;return ut=Xt(ut._payload),tt(Y,B,q,ut,wt)}if(ht(ut)||nt(ut))return Y=Y.get(q)||null,at(B,Y,ut,wt,null);if(typeof ut.then=="function")return tt(Y,B,q,Fc(ut),wt);if(ut.$$typeof===z)return tt(Y,B,q,Tc(B,ut),wt);Gc(B,ut)}return null}function zt(Y,B,q,ut){for(var wt=null,Xt=null,Rt=B,Pt=B=0,di=null;Rt!==null&&Pt<q.length;Pt++){Rt.index>Pt?(di=Rt,Rt=null):di=Rt.sibling;var ne=J(Y,Rt,q[Pt],ut);if(ne===null){Rt===null&&(Rt=di);break}e&&Rt&&ne.alternate===null&&n(Y,Rt),B=y(ne,B,Pt),Xt===null?wt=ne:Xt.sibling=ne,Xt=ne,Rt=di}if(Pt===q.length)return l(Y,Rt),Nt&&V(Y,Pt),wt;if(Rt===null){for(;Pt<q.length;Pt++)Rt=ct(Y,q[Pt],ut),Rt!==null&&(B=y(Rt,B,Pt),Xt===null?wt=Rt:Xt.sibling=Rt,Xt=Rt);return Nt&&V(Y,Pt),wt}for(Rt=h(Rt);Pt<q.length;Pt++)di=tt(Rt,Y,Pt,q[Pt],ut),di!==null&&(e&&di.alternate!==null&&Rt.delete(di.key===null?Pt:di.key),B=y(di,B,Pt),Xt===null?wt=di:Xt.sibling=di,Xt=di);return e&&Rt.forEach(function(Hr){return n(Y,Hr)}),Nt&&V(Y,Pt),wt}function Dt(Y,B,q,ut){if(q==null)throw Error(s(151));for(var wt=null,Xt=null,Rt=B,Pt=B=0,di=null,ne=q.next();Rt!==null&&!ne.done;Pt++,ne=q.next()){Rt.index>Pt?(di=Rt,Rt=null):di=Rt.sibling;var Hr=J(Y,Rt,ne.value,ut);if(Hr===null){Rt===null&&(Rt=di);break}e&&Rt&&Hr.alternate===null&&n(Y,Rt),B=y(Hr,B,Pt),Xt===null?wt=Hr:Xt.sibling=Hr,Xt=Hr,Rt=di}if(ne.done)return l(Y,Rt),Nt&&V(Y,Pt),wt;if(Rt===null){for(;!ne.done;Pt++,ne=q.next())ne=ct(Y,ne.value,ut),ne!==null&&(B=y(ne,B,Pt),Xt===null?wt=ne:Xt.sibling=ne,Xt=ne);return Nt&&V(Y,Pt),wt}for(Rt=h(Rt);!ne.done;Pt++,ne=q.next())ne=tt(Rt,Y,Pt,ne.value,ut),ne!==null&&(e&&ne.alternate!==null&&Rt.delete(ne.key===null?Pt:ne.key),B=y(ne,B,Pt),Xt===null?wt=ne:Xt.sibling=ne,Xt=ne);return e&&Rt.forEach(function(Y1){return n(Y,Y1)}),Nt&&V(Y,Pt),wt}function fe(Y,B,q,ut){if(typeof q=="object"&&q!==null&&q.type===b&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case w:t:{for(var wt=q.key;B!==null;){if(B.key===wt){if(wt=q.type,wt===b){if(B.tag===7){l(Y,B.sibling),ut=_(B,q.props.children),ut.return=Y,Y=ut;break t}}else if(B.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===rt&&Z_(wt)===B.type){l(Y,B.sibling),ut=_(B,q.props),Vl(ut,q),ut.return=Y,Y=ut;break t}l(Y,B);break}else n(Y,B);B=B.sibling}q.type===b?(ut=es(q.props.children,Y.mode,ut,q.key),ut.return=Y,Y=ut):(ut=wa(q.type,q.key,q.props,null,Y.mode,ut),Vl(ut,q),ut.return=Y,Y=ut)}return C(Y);case T:t:{for(wt=q.key;B!==null;){if(B.key===wt)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){l(Y,B.sibling),ut=_(B,q.children||[]),ut.return=Y,Y=ut;break t}else{l(Y,B);break}else n(Y,B);B=B.sibling}ut=Eo(q,Y.mode,ut),ut.return=Y,Y=ut}return C(Y);case rt:return wt=q._init,q=wt(q._payload),fe(Y,B,q,ut)}if(ht(q))return zt(Y,B,q,ut);if(nt(q)){if(wt=nt(q),typeof wt!="function")throw Error(s(150));return q=wt.call(q),Dt(Y,B,q,ut)}if(typeof q.then=="function")return fe(Y,B,Fc(q),ut);if(q.$$typeof===z)return fe(Y,B,Tc(Y,q),ut);Gc(Y,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,B!==null&&B.tag===6?(l(Y,B.sibling),ut=_(B,q),ut.return=Y,Y=ut):(l(Y,B),ut=zl(q,Y.mode,ut),ut.return=Y,Y=ut),C(Y)):l(Y,B)}return function(Y,B,q,ut){try{Xl=0;var wt=fe(Y,B,q,ut);return Mo=null,wt}catch(Rt){if(Rt===kl||Rt===Rc)throw Rt;var Xt=Gi(29,Rt,null,Y.mode);return Xt.lanes=ut,Xt.return=Y,Xt}finally{}}}var Ao=j_(!0),U_=j_(!1),Rn=U(null),ns=null;function Mr(e){var n=e.alternate;st(ei,ei.current&1),st(Rn,e),ns===null&&(n===null||To.current!==null||n.memoizedState!==null)&&(ns=e)}function H_(e){if(e.tag===22){if(st(ei,ei.current),st(Rn,e),ns===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ns=e)}}else Ar()}function Ar(){st(ei,ei.current),st(Rn,Rn.current)}function ks(e){G(Rn),ns===e&&(ns=null),G(ei)}var ei=U(0);function Bc(e){for(var n=e;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Wd(l)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function od(e,n,l,h){n=e.memoizedState,l=l(h,n),l=l==null?n:v({},n,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var ld={enqueueSetState:function(e,n,l){e=e._reactInternals;var h=cn(),_=br(h);_.payload=n,l!=null&&(_.callback=l),n=Rr(e,_,h),n!==null&&(hn(n,e,h),Gl(n,e,h))},enqueueReplaceState:function(e,n,l){e=e._reactInternals;var h=cn(),_=br(h);_.tag=1,_.payload=n,l!=null&&(_.callback=l),n=Rr(e,_,h),n!==null&&(hn(n,e,h),Gl(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var l=cn(),h=br(l);h.tag=2,n!=null&&(h.callback=n),n=Rr(e,h,l),n!==null&&(hn(n,e,l),Gl(n,e,l))}};function Y_(e,n,l,h,_,y,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,y,C):n.prototype&&n.prototype.isPureReactComponent?!Ii(l,h)||!Ii(_,y):!0}function X_(e,n,l,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,h),n.state!==e&&ld.enqueueReplaceState(n,n.state,null)}function Aa(e,n){var l=n;if("ref"in n){l={};for(var h in n)h!=="ref"&&(l[h]=n[h])}if(e=e.defaultProps){l===n&&(l=v({},l));for(var _ in e)l[_]===void 0&&(l[_]=e[_])}return l}var Zc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function V_(e){Zc(e)}function q_(e){console.error(e)}function K_(e){Zc(e)}function jc(e,n){try{var l=e.onUncaughtError;l(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function W_(e,n,l){try{var h=e.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function ud(e,n,l){return l=br(l),l.tag=3,l.payload={element:null},l.callback=function(){jc(e,n)},l}function Q_(e){return e=br(e),e.tag=3,e}function J_(e,n,l,h){var _=l.type.getDerivedStateFromError;if(typeof _=="function"){var y=h.value;e.payload=function(){return _(y)},e.callback=function(){W_(n,l,h)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(e.callback=function(){W_(n,l,h),typeof _!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function Yx(e,n,l,h,_){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=l.alternate,n!==null&&ba(n,l,_,!0),l=Rn.current,l!==null){switch(l.tag){case 13:return ns===null?Pd():l.alternate===null&&Be===0&&(Be=3),l.flags&=-257,l.flags|=65536,l.lanes=_,h===Ff?l.flags|=16384:(n=l.updateQueue,n===null?l.updateQueue=new Set([h]):n.add(h),Nd(e,h,_)),!1;case 22:return l.flags|=65536,h===Ff?l.flags|=16384:(n=l.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=n):(l=n.retryQueue,l===null?n.retryQueue=new Set([h]):l.add(h)),Nd(e,h,_)),!1}throw Error(s(435,l.tag))}return Nd(e,h,_),Pd(),!1}if(Nt)return n=Rn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=_,h!==ci&&(e=Error(s(422),{cause:h}),Cr(ki(e,l)))):(h!==ci&&(n=Error(s(423),{cause:h}),Cr(ki(n,l))),e=e.current.alternate,e.flags|=65536,_&=-_,e.lanes|=_,h=ki(h,l),_=ud(e.stateNode,h,_),Zf(e,_),Be!==4&&(Be=2)),!1;var y=Error(s(520),{cause:h});if(y=ki(y,l),tu===null?tu=[y]:tu.push(y),Be!==4&&(Be=2),n===null)return!0;h=ki(h,l),l=n;do{switch(l.tag){case 3:return l.flags|=65536,e=_&-_,l.lanes|=e,e=ud(l.stateNode,h,e),Zf(l,e),!1;case 1:if(n=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ir===null||!Ir.has(y))))return l.flags|=65536,_&=-_,l.lanes|=_,_=Q_(_),J_(_,e,l,h),Zf(l,_),!1}l=l.return}while(l!==null);return!1}var $_=Error(s(461)),hi=!1;function xi(e,n,l,h){n.child=e===null?U_(n,null,l,h):Ao(n,e.child,l,h)}function tp(e,n,l,h,_){l=l.render;var y=n.ref;if("ref"in h){var C={};for(var M in h)M!=="ref"&&(C[M]=h[M])}else C=h;return Ra(n),h=Xf(e,n,l,C,y,_),M=Vf(),e!==null&&!hi?(qf(e,n,_),Fs(e,n,_)):(Nt&&M&&ft(n),n.flags|=1,xi(e,n,h,_),n.child)}function ep(e,n,l,h,_){if(e===null){var y=l.type;return typeof y=="function"&&!xo(y)&&y.defaultProps===void 0&&l.compare===null?(n.tag=15,n.type=y,ip(e,n,y,h,_)):(e=wa(l.type,null,h,n,n.mode,_),e.ref=n.ref,e.return=n,n.child=e)}if(y=e.child,!pd(e,_)){var C=y.memoizedProps;if(l=l.compare,l=l!==null?l:Ii,l(C,h)&&e.ref===n.ref)return Fs(e,n,_)}return n.flags|=1,e=Tn(y,h),e.ref=n.ref,e.return=n,n.child=e}function ip(e,n,l,h,_){if(e!==null){var y=e.memoizedProps;if(Ii(y,h)&&e.ref===n.ref)if(hi=!1,n.pendingProps=h=y,pd(e,_))(e.flags&131072)!==0&&(hi=!0);else return n.lanes=e.lanes,Fs(e,n,_)}return cd(e,n,l,h,_)}function np(e,n,l){var h=n.pendingProps,_=h.children,y=e!==null?e.memoizedState:null;if(h.mode==="hidden"){if((n.flags&128)!==0){if(h=y!==null?y.baseLanes|l:l,e!==null){for(_=n.child=e.child,y=0;_!==null;)y=y|_.lanes|_.childLanes,_=_.sibling;n.childLanes=y&~h}else n.childLanes=0,n.child=null;return sp(e,n,h,l)}if((l&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&bc(n,y!==null?y.cachePool:null),y!==null?i_(n,y):Uf(),H_(n);else return n.lanes=n.childLanes=536870912,sp(e,n,y!==null?y.baseLanes|l:l,l)}else y!==null?(bc(n,y.cachePool),i_(n,y),Ar(),n.memoizedState=null):(e!==null&&bc(n,null),Uf(),Ar());return xi(e,n,_,l),n.child}function sp(e,n,l,h){var _=kf();return _=_===null?null:{parent:ti._currentValue,pool:_},n.memoizedState={baseLanes:l,cachePool:_},e!==null&&bc(n,null),Uf(),H_(n),e!==null&&ba(e,n,h,!0),null}function Uc(e,n){var l=n.ref;if(l===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(e===null||e.ref!==l)&&(n.flags|=4194816)}}function cd(e,n,l,h,_){return Ra(n),l=Xf(e,n,l,h,void 0,_),h=Vf(),e!==null&&!hi?(qf(e,n,_),Fs(e,n,_)):(Nt&&h&&ft(n),n.flags|=1,xi(e,n,l,_),n.child)}function rp(e,n,l,h,_,y){return Ra(n),n.updateQueue=null,l=s_(n,h,l,_),n_(e),h=Vf(),e!==null&&!hi?(qf(e,n,y),Fs(e,n,y)):(Nt&&h&&ft(n),n.flags|=1,xi(e,n,l,y),n.child)}function ap(e,n,l,h,_){if(Ra(n),n.stateNode===null){var y=zs,C=l.contextType;typeof C=="object"&&C!==null&&(y=Ti(C)),y=new l(h,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ld,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=h,y.state=n.memoizedState,y.refs={},Gf(n),C=l.contextType,y.context=typeof C=="object"&&C!==null?Ti(C):zs,y.state=n.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(od(n,l,C,h),y.state=n.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&ld.enqueueReplaceState(y,y.state,null),Zl(n,h,y,_),Bl(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){y=n.stateNode;var M=n.memoizedProps,I=Aa(l,M);y.props=I;var W=y.context,at=l.contextType;C=zs,typeof at=="object"&&at!==null&&(C=Ti(at));var ct=l.getDerivedStateFromProps;at=typeof ct=="function"||typeof y.getSnapshotBeforeUpdate=="function",M=n.pendingProps!==M,at||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M||W!==C)&&X_(n,y,h,C),Tr=!1;var J=n.memoizedState;y.state=J,Zl(n,h,y,_),Bl(),W=n.memoizedState,M||J!==W||Tr?(typeof ct=="function"&&(od(n,l,ct,h),W=n.memoizedState),(I=Tr||Y_(n,l,I,h,J,W,C))?(at||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=W),y.props=h,y.state=W,y.context=C,h=I):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{y=n.stateNode,Bf(e,n),C=n.memoizedProps,at=Aa(l,C),y.props=at,ct=n.pendingProps,J=y.context,W=l.contextType,I=zs,typeof W=="object"&&W!==null&&(I=Ti(W)),M=l.getDerivedStateFromProps,(W=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==ct||J!==I)&&X_(n,y,h,I),Tr=!1,J=n.memoizedState,y.state=J,Zl(n,h,y,_),Bl();var tt=n.memoizedState;C!==ct||J!==tt||Tr||e!==null&&e.dependencies!==null&&Cc(e.dependencies)?(typeof M=="function"&&(od(n,l,M,h),tt=n.memoizedState),(at=Tr||Y_(n,l,at,h,J,tt,I)||e!==null&&e.dependencies!==null&&Cc(e.dependencies))?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,tt,I),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,tt,I)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=tt),y.props=h,y.state=tt,y.context=I,h=at):(typeof y.componentDidUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),h=!1)}return y=h,Uc(e,n),h=(n.flags&128)!==0,y||h?(y=n.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,e!==null&&h?(n.child=Ao(n,e.child,null,_),n.child=Ao(n,null,l,_)):xi(e,n,l,_),n.memoizedState=y.state,e=n.child):e=Fs(e,n,_),e}function op(e,n,l,h){return wr(),n.flags|=256,xi(e,n,l,h),n.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(e){return{baseLanes:e,cachePool:qm()}}function dd(e,n,l){return e=e!==null?e.childLanes&~l:0,n&&(e|=Ln),e}function lp(e,n,l){var h=n.pendingProps,_=!1,y=(n.flags&128)!==0,C;if((C=y)||(C=e!==null&&e.memoizedState===null?!1:(ei.current&2)!==0),C&&(_=!0,n.flags&=-129),C=(n.flags&32)!==0,n.flags&=-33,e===null){if(Nt){if(_?Mr(n):Ar(),Nt){var M=Tt,I;if(I=M){t:{for(I=M,M=ze;I.nodeType!==8;){if(!M){M=null;break t}if(I=Bn(I.nextSibling),I===null){M=null;break t}}M=I}M!==null?(n.memoizedState={dehydrated:M,treeContext:S!==null?{id:R,overflow:N}:null,retryLane:536870912,hydrationErrors:null},I=Gi(18,null,null,0),I.stateNode=M,I.return=n,n.child=I,St=n,Tt=null,I=!0):I=!1}I||qi(n)}if(M=n.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Wd(M)?n.lanes=32:n.lanes=536870912,null;ks(n)}return M=h.children,h=h.fallback,_?(Ar(),_=n.mode,M=Hc({mode:"hidden",children:M},_),h=es(h,_,l,null),M.return=n,h.return=n,M.sibling=h,n.child=M,_=n.child,_.memoizedState=fd(l),_.childLanes=dd(e,C,l),n.memoizedState=hd,h):(Mr(n),gd(n,M))}if(I=e.memoizedState,I!==null&&(M=I.dehydrated,M!==null)){if(y)n.flags&256?(Mr(n),n.flags&=-257,n=md(e,n,l)):n.memoizedState!==null?(Ar(),n.child=e.child,n.flags|=128,n=null):(Ar(),_=h.fallback,M=n.mode,h=Hc({mode:"visible",children:h.children},M),_=es(_,M,l,null),_.flags|=2,h.return=n,_.return=n,h.sibling=_,n.child=h,Ao(n,e.child,null,l),h=n.child,h.memoizedState=fd(l),h.childLanes=dd(e,C,l),n.memoizedState=hd,n=_);else if(Mr(n),Wd(M)){if(C=M.nextSibling&&M.nextSibling.dataset,C)var W=C.dgst;C=W,h=Error(s(419)),h.stack="",h.digest=C,Cr({value:h,source:null,stack:null}),n=md(e,n,l)}else if(hi||ba(e,n,l,!1),C=(l&e.childLanes)!==0,hi||C){if(C=xe,C!==null&&(h=l&-l,h=(h&42)!==0?1:yn(h),h=(h&(C.suspendedLanes|l))!==0?0:h,h!==0&&h!==I.retryLane))throw I.retryLane=h,Er(e,h),hn(C,e,h),$_;M.data==="$?"||Pd(),n=md(e,n,l)}else M.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,Tt=Bn(M.nextSibling),St=n,Nt=!0,ve=null,ze=!1,e!==null&&(m[x++]=R,m[x++]=N,m[x++]=S,R=e.id,N=e.overflow,S=n),n=gd(n,h.children),n.flags|=4096);return n}return _?(Ar(),_=h.fallback,M=n.mode,I=e.child,W=I.sibling,h=Tn(I,{mode:"hidden",children:h.children}),h.subtreeFlags=I.subtreeFlags&65011712,W!==null?_=Tn(W,_):(_=es(_,M,l,null),_.flags|=2),_.return=n,h.return=n,h.sibling=_,n.child=h,h=_,_=n.child,M=e.child.memoizedState,M===null?M=fd(l):(I=M.cachePool,I!==null?(W=ti._currentValue,I=I.parent!==W?{parent:W,pool:W}:I):I=qm(),M={baseLanes:M.baseLanes|l,cachePool:I}),_.memoizedState=M,_.childLanes=dd(e,C,l),n.memoizedState=hd,h):(Mr(n),l=e.child,e=l.sibling,l=Tn(l,{mode:"visible",children:h.children}),l.return=n,l.sibling=null,e!==null&&(C=n.deletions,C===null?(n.deletions=[e],n.flags|=16):C.push(e)),n.child=l,n.memoizedState=null,l)}function gd(e,n){return n=Hc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Hc(e,n){return e=Gi(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function md(e,n,l){return Ao(n,e.child,null,l),e=gd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function up(e,n,l){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),Ta(e.return,n,l)}function _d(e,n,l,h,_){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:_}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=_)}function cp(e,n,l){var h=n.pendingProps,_=h.revealOrder,y=h.tail;if(xi(e,n,h.children,l),h=ei.current,(h&2)!==0)h=h&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&up(e,l,n);else if(e.tag===19)up(e,l,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}switch(st(ei,h),_){case"forwards":for(l=n.child,_=null;l!==null;)e=l.alternate,e!==null&&Bc(e)===null&&(_=l),l=l.sibling;l=_,l===null?(_=n.child,n.child=null):(_=l.sibling,l.sibling=null),_d(n,!1,_,l,y);break;case"backwards":for(l=null,_=n.child,n.child=null;_!==null;){if(e=_.alternate,e!==null&&Bc(e)===null){n.child=_;break}e=_.sibling,_.sibling=l,l=_,_=e}_d(n,!0,l,null,y);break;case"together":_d(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Fs(e,n,l){if(e!==null&&(n.dependencies=e.dependencies),Nr|=n.lanes,(l&n.childLanes)===0)if(e!==null){if(ba(e,n,l,!1),(l&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,l=Tn(e,e.pendingProps),n.child=l,l.return=n;e.sibling!==null;)e=e.sibling,l=l.sibling=Tn(e,e.pendingProps),l.return=n;l.sibling=null}return n.child}function pd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Cc(e)))}function Xx(e,n,l){switch(n.tag){case 3:Lt(n,n.stateNode.containerInfo),is(n,ti,e.memoizedState.cache),wr();break;case 27:case 5:Mt(n);break;case 4:Lt(n,n.stateNode.containerInfo);break;case 10:is(n,n.type,n.memoizedProps.value);break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(Mr(n),n.flags|=128,null):(l&n.child.childLanes)!==0?lp(e,n,l):(Mr(n),e=Fs(e,n,l),e!==null?e.sibling:null);Mr(n);break;case 19:var _=(e.flags&128)!==0;if(h=(l&n.childLanes)!==0,h||(ba(e,n,l,!1),h=(l&n.childLanes)!==0),_){if(h)return cp(e,n,l);n.flags|=128}if(_=n.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),st(ei,ei.current),h)break;return null;case 22:case 23:return n.lanes=0,np(e,n,l);case 24:is(n,ti,e.memoizedState.cache)}return Fs(e,n,l)}function hp(e,n,l){if(e!==null)if(e.memoizedProps!==n.pendingProps)hi=!0;else{if(!pd(e,l)&&(n.flags&128)===0)return hi=!1,Xx(e,n,l);hi=(e.flags&131072)!==0}else hi=!1,Nt&&(n.flags&1048576)!==0&&et(n,c,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var h=n.elementType,_=h._init;if(h=_(h._payload),n.type=h,typeof h=="function")xo(h)?(e=Aa(h,e),n.tag=1,n=ap(null,n,h,e,l)):(n.tag=0,n=cd(null,n,h,e,l));else{if(h!=null){if(_=h.$$typeof,_===j){n.tag=11,n=tp(null,n,h,e,l);break t}else if(_===it){n.tag=14,n=ep(null,n,h,e,l);break t}}throw n=vt(h)||h,Error(s(306,n,""))}}return n;case 0:return cd(e,n,n.type,n.pendingProps,l);case 1:return h=n.type,_=Aa(h,n.pendingProps),ap(e,n,h,_,l);case 3:t:{if(Lt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));h=n.pendingProps;var y=n.memoizedState;_=y.element,Bf(e,n),Zl(n,h,null,l);var C=n.memoizedState;if(h=C.cache,is(n,ti,h),h!==y.cache&&So(n,[ti],l,!0),Bl(),h=C.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:C.cache},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){n=op(e,n,h,l);break t}else if(h!==_){_=ki(Error(s(424)),n),Cr(_),n=op(e,n,h,l);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tt=Bn(e.firstChild),St=n,Nt=!0,ve=null,ze=!0,l=U_(n,null,h,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(wr(),h===_){n=Fs(e,n,l);break t}xi(e,n,h,l)}n=n.child}return n;case 26:return Uc(e,n),e===null?(l=my(n.type,null,n.pendingProps,null))?n.memoizedState=l:Nt||(l=n.type,e=n.pendingProps,h=sh(mt.current).createElement(l),h[De]=n,h[re]=e,Si(h,l,e),He(h),n.stateNode=h):n.memoizedState=my(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Mt(n),e===null&&Nt&&(h=n.stateNode=fy(n.type,n.pendingProps,mt.current),St=n,ze=!0,_=Tt,Gr(n.type)?(Qd=_,Tt=Bn(h.firstChild)):Tt=_),xi(e,n,n.pendingProps.children,l),Uc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Nt&&((_=h=Tt)&&(h=x1(h,n.type,n.pendingProps,ze),h!==null?(n.stateNode=h,St=n,Tt=Bn(h.firstChild),ze=!1,_=!0):_=!1),_||qi(n)),Mt(n),_=n.type,y=n.pendingProps,C=e!==null?e.memoizedProps:null,h=y.children,Vd(_,y)?h=null:C!==null&&Vd(_,C)&&(n.flags|=32),n.memoizedState!==null&&(_=Xf(e,n,Fx,null,null,l),uu._currentValue=_),Uc(e,n),xi(e,n,h,l),n.child;case 6:return e===null&&Nt&&((e=l=Tt)&&(l=E1(l,n.pendingProps,ze),l!==null?(n.stateNode=l,St=n,Tt=null,e=!0):e=!1),e||qi(n)),null;case 13:return lp(e,n,l);case 4:return Lt(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Ao(n,null,h,l):xi(e,n,h,l),n.child;case 11:return tp(e,n,n.type,n.pendingProps,l);case 7:return xi(e,n,n.pendingProps,l),n.child;case 8:return xi(e,n,n.pendingProps.children,l),n.child;case 12:return xi(e,n,n.pendingProps.children,l),n.child;case 10:return h=n.pendingProps,is(n,n.type,h.value),xi(e,n,h.children,l),n.child;case 9:return _=n.type._context,h=n.pendingProps.children,Ra(n),_=Ti(_),h=h(_),n.flags|=1,xi(e,n,h,l),n.child;case 14:return ep(e,n,n.type,n.pendingProps,l);case 15:return ip(e,n,n.type,n.pendingProps,l);case 19:return cp(e,n,l);case 31:return h=n.pendingProps,l=n.mode,h={mode:h.mode,children:h.children},e===null?(l=Hc(h,l),l.ref=n.ref,n.child=l,l.return=n,n=l):(l=Tn(e.child,h),l.ref=n.ref,n.child=l,l.return=n,n=l),n;case 22:return np(e,n,l);case 24:return Ra(n),h=Ti(ti),e===null?(_=kf(),_===null&&(_=xe,y=Nf(),_.pooledCache=y,y.refCount++,y!==null&&(_.pooledCacheLanes|=l),_=y),n.memoizedState={parent:h,cache:_},Gf(n),is(n,ti,_)):((e.lanes&l)!==0&&(Bf(e,n),Zl(n,null,null,l),Bl()),_=e.memoizedState,y=n.memoizedState,_.parent!==h?(_={parent:h,cache:h},n.memoizedState=_,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=_),is(n,ti,h)):(h=y.cache,is(n,ti,h),h!==_.cache&&So(n,[ti],l,!0))),xi(e,n,n.pendingProps.children,l),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Gs(e){e.flags|=4}function fp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!xy(n)){if(n=Rn.current,n!==null&&((te&4194048)===te?ns!==null:(te&62914560)!==te&&(te&536870912)===0||n!==ns))throw Fl=Ff,Km;e.flags|=8192}}function Yc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Dn():536870912,e.lanes|=n,zo|=n)}function ql(e,n){if(!Nt)switch(e.tailMode){case"hidden":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Ne(e){var n=e.alternate!==null&&e.alternate.child===e.child,l=0,h=0;if(n)for(var _=e.child;_!==null;)l|=_.lanes|_.childLanes,h|=_.subtreeFlags&65011712,h|=_.flags&65011712,_.return=e,_=_.sibling;else for(_=e.child;_!==null;)l|=_.lanes|_.childLanes,h|=_.subtreeFlags,h|=_.flags,_.return=e,_=_.sibling;return e.subtreeFlags|=h,e.childLanes=l,n}function Vx(e,n,l){var h=n.pendingProps;switch(xt(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(n),null;case 1:return Ne(n),null;case 3:return l=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),Fn(ti),Et(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Ca(n)?Gs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,wc())),Ne(n),null;case 26:return l=n.memoizedState,e===null?(Gs(n),l!==null?(Ne(n),fp(n,l)):(Ne(n),n.flags&=-16777217)):l?l!==e.memoizedState?(Gs(n),Ne(n),fp(n,l)):(Ne(n),n.flags&=-16777217):(e.memoizedProps!==h&&Gs(n),Ne(n),n.flags&=-16777217),null;case 27:se(n),l=mt.current;var _=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Gs(n);else{if(!h){if(n.stateNode===null)throw Error(s(166));return Ne(n),null}e=lt.current,Ca(n)?Ec(n):(e=fy(_,h,l),n.stateNode=e,Gs(n))}return Ne(n),null;case 5:if(se(n),l=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Gs(n);else{if(!h){if(n.stateNode===null)throw Error(s(166));return Ne(n),null}if(e=lt.current,Ca(n))Ec(n);else{switch(_=sh(mt.current),e){case 1:e=_.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:e=_.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":e=_.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":e=_.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?e.multiple=!0:h.size&&(e.size=h.size);break;default:e=typeof h.is=="string"?_.createElement(l,{is:h.is}):_.createElement(l)}}e[De]=n,e[re]=h;t:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)e.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break t;for(;_.sibling===null;){if(_.return===null||_.return===n)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=e;t:switch(Si(e,l,h),l){case"button":case"input":case"select":case"textarea":e=!!h.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Gs(n)}}return Ne(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&Gs(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(s(166));if(e=mt.current,Ca(n)){if(e=n.stateNode,l=n.memoizedProps,h=null,_=St,_!==null)switch(_.tag){case 27:case 5:h=_.memoizedProps}e[De]=n,e=!!(e.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||ry(e.nodeValue,l)),e||qi(n)}else e=sh(e).createTextNode(h),e[De]=n,n.stateNode=e}return Ne(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_=Ca(n),h!==null&&h.dehydrated!==null){if(e===null){if(!_)throw Error(s(318));if(_=n.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));_[De]=n}else wr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ne(n),_=!1}else _=wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=_),_=!0;if(!_)return n.flags&256?(ks(n),n):(ks(n),null)}if(ks(n),(n.flags&128)!==0)return n.lanes=l,n;if(l=h!==null,e=e!==null&&e.memoizedState!==null,l){h=n.child,_=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(_=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==_&&(h.flags|=2048)}return l!==e&&l&&(n.child.flags|=8192),Yc(n,n.updateQueue),Ne(n),null;case 4:return Et(),e===null&&jd(n.stateNode.containerInfo),Ne(n),null;case 10:return Fn(n.type),Ne(n),null;case 19:if(G(ei),_=n.memoizedState,_===null)return Ne(n),null;if(h=(n.flags&128)!==0,y=_.rendering,y===null)if(h)ql(_,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(y=Bc(e),y!==null){for(n.flags|=128,ql(_,!1),e=y.updateQueue,n.updateQueue=e,Yc(n,e),n.subtreeFlags=0,e=l,l=n.child;l!==null;)Pl(l,e),l=l.sibling;return st(ei,ei.current&1|2),n.child}e=e.sibling}_.tail!==null&&Ct()>qc&&(n.flags|=128,h=!0,ql(_,!1),n.lanes=4194304)}else{if(!h)if(e=Bc(y),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Yc(n,e),ql(_,!0),_.tail===null&&_.tailMode==="hidden"&&!y.alternate&&!Nt)return Ne(n),null}else 2*Ct()-_.renderingStartTime>qc&&l!==536870912&&(n.flags|=128,h=!0,ql(_,!1),n.lanes=4194304);_.isBackwards?(y.sibling=n.child,n.child=y):(e=_.last,e!==null?e.sibling=y:n.child=y,_.last=y)}return _.tail!==null?(n=_.tail,_.rendering=n,_.tail=n.sibling,_.renderingStartTime=Ct(),n.sibling=null,e=ei.current,st(ei,h?e&1|2:e&1),n):(Ne(n),null);case 22:case 23:return ks(n),Hf(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(l&536870912)!==0&&(n.flags&128)===0&&(Ne(n),n.subtreeFlags&6&&(n.flags|=8192)):Ne(n),l=n.updateQueue,l!==null&&Yc(n,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==l&&(n.flags|=2048),e!==null&&G(La),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Fn(ti),Ne(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function qx(e,n){switch(xt(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Fn(ti),Et(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return se(n),null;case 13:if(ks(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));wr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return G(ei),null;case 4:return Et(),null;case 10:return Fn(n.type),null;case 22:case 23:return ks(n),Hf(),e!==null&&G(La),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Fn(ti),null;case 25:return null;default:return null}}function dp(e,n){switch(xt(n),n.tag){case 3:Fn(ti),Et();break;case 26:case 27:case 5:se(n);break;case 4:Et();break;case 13:ks(n);break;case 19:G(ei);break;case 10:Fn(n.type);break;case 22:case 23:ks(n),Hf(),e!==null&&G(La);break;case 24:Fn(ti)}}function Kl(e,n){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var _=h.next;l=_;do{if((l.tag&e)===e){h=void 0;var y=l.create,C=l.inst;h=y(),C.destroy=h}l=l.next}while(l!==_)}}catch(M){ge(n,n.return,M)}}function Or(e,n,l){try{var h=n.updateQueue,_=h!==null?h.lastEffect:null;if(_!==null){var y=_.next;h=y;do{if((h.tag&e)===e){var C=h.inst,M=C.destroy;if(M!==void 0){C.destroy=void 0,_=n;var I=l,W=M;try{W()}catch(at){ge(_,I,at)}}}h=h.next}while(h!==y)}}catch(at){ge(n,n.return,at)}}function gp(e){var n=e.updateQueue;if(n!==null){var l=e.stateNode;try{e_(n,l)}catch(h){ge(e,e.return,h)}}}function mp(e,n,l){l.props=Aa(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(h){ge(e,n,h)}}function Wl(e,n){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof l=="function"?e.refCleanup=l(h):l.current=h}}catch(_){ge(e,n,_)}}function ss(e,n){var l=e.ref,h=e.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(_){ge(e,n,_)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(_){ge(e,n,_)}else l.current=null}function _p(e){var n=e.type,l=e.memoizedProps,h=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(_){ge(e,e.return,_)}}function yd(e,n,l){try{var h=e.stateNode;m1(h,e.type,l,n),h[re]=n}catch(_){ge(e,e.return,_)}}function pp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Gr(e.type)||e.tag===4}function vd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||pp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Gr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xd(e,n,l){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,n):(n=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,n.appendChild(e),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=nh));else if(h!==4&&(h===27&&Gr(e.type)&&(l=e.stateNode,n=null),e=e.child,e!==null))for(xd(e,n,l),e=e.sibling;e!==null;)xd(e,n,l),e=e.sibling}function Xc(e,n,l){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?l.insertBefore(e,n):l.appendChild(e);else if(h!==4&&(h===27&&Gr(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Xc(e,n,l),e=e.sibling;e!==null;)Xc(e,n,l),e=e.sibling}function yp(e){var n=e.stateNode,l=e.memoizedProps;try{for(var h=e.type,_=n.attributes;_.length;)n.removeAttributeNode(_[0]);Si(n,h,l),n[De]=e,n[re]=l}catch(y){ge(e,e.return,y)}}var Bs=!1,Ue=!1,Ed=!1,vp=typeof WeakSet=="function"?WeakSet:Set,fi=null;function Kx(e,n){if(e=e.containerInfo,Yd=ch,e=pa(e),ya(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else t:{l=(l=e.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var _=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var C=0,M=-1,I=-1,W=0,at=0,ct=e,J=null;e:for(;;){for(var tt;ct!==l||_!==0&&ct.nodeType!==3||(M=C+_),ct!==y||h!==0&&ct.nodeType!==3||(I=C+h),ct.nodeType===3&&(C+=ct.nodeValue.length),(tt=ct.firstChild)!==null;)J=ct,ct=tt;for(;;){if(ct===e)break e;if(J===l&&++W===_&&(M=C),J===y&&++at===h&&(I=C),(tt=ct.nextSibling)!==null)break;ct=J,J=ct.parentNode}ct=tt}l=M===-1||I===-1?null:{start:M,end:I}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xd={focusedElem:e,selectionRange:l},ch=!1,fi=n;fi!==null;)if(n=fi,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,fi=e;else for(;fi!==null;){switch(n=fi,y=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&y!==null){e=void 0,l=n,_=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var zt=Aa(l.type,_,l.elementType===l.type);e=h.getSnapshotBeforeUpdate(zt,y),h.__reactInternalSnapshotBeforeUpdate=e}catch(Dt){ge(l,l.return,Dt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,l=e.nodeType,l===9)Kd(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,fi=e;break}fi=n.return}}function xp(e,n,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Dr(e,l),h&4&&Kl(5,l);break;case 1:if(Dr(e,l),h&4)if(e=l.stateNode,n===null)try{e.componentDidMount()}catch(C){ge(l,l.return,C)}else{var _=Aa(l.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(_,n,e.__reactInternalSnapshotBeforeUpdate)}catch(C){ge(l,l.return,C)}}h&64&&gp(l),h&512&&Wl(l,l.return);break;case 3:if(Dr(e,l),h&64&&(e=l.updateQueue,e!==null)){if(n=null,l.child!==null)switch(l.child.tag){case 27:case 5:n=l.child.stateNode;break;case 1:n=l.child.stateNode}try{e_(e,n)}catch(C){ge(l,l.return,C)}}break;case 27:n===null&&h&4&&yp(l);case 26:case 5:Dr(e,l),n===null&&h&4&&_p(l),h&512&&Wl(l,l.return);break;case 12:Dr(e,l);break;case 13:Dr(e,l),h&4&&wp(e,l),h&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=s1.bind(null,l),S1(e,l))));break;case 22:if(h=l.memoizedState!==null||Bs,!h){n=n!==null&&n.memoizedState!==null||Ue,_=Bs;var y=Ue;Bs=h,(Ue=n)&&!y?Pr(e,l,(l.subtreeFlags&8772)!==0):Dr(e,l),Bs=_,Ue=y}break;case 30:break;default:Dr(e,l)}}function Ep(e){var n=e.alternate;n!==null&&(e.alternate=null,Ep(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&io(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Me=null,Wi=!1;function Zs(e,n,l){for(l=l.child;l!==null;)Sp(e,n,l),l=l.sibling}function Sp(e,n,l){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(Te,l)}catch{}switch(l.tag){case 26:Ue||ss(l,n),Zs(e,n,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ue||ss(l,n);var h=Me,_=Wi;Gr(l.type)&&(Me=l.stateNode,Wi=!1),Zs(e,n,l),ru(l.stateNode),Me=h,Wi=_;break;case 5:Ue||ss(l,n);case 6:if(h=Me,_=Wi,Me=null,Zs(e,n,l),Me=h,Wi=_,Me!==null)if(Wi)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(l.stateNode)}catch(y){ge(l,n,y)}else try{Me.removeChild(l.stateNode)}catch(y){ge(l,n,y)}break;case 18:Me!==null&&(Wi?(e=Me,cy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),du(e)):cy(Me,l.stateNode));break;case 4:h=Me,_=Wi,Me=l.stateNode.containerInfo,Wi=!0,Zs(e,n,l),Me=h,Wi=_;break;case 0:case 11:case 14:case 15:Ue||Or(2,l,n),Ue||Or(4,l,n),Zs(e,n,l);break;case 1:Ue||(ss(l,n),h=l.stateNode,typeof h.componentWillUnmount=="function"&&mp(l,n,h)),Zs(e,n,l);break;case 21:Zs(e,n,l);break;case 22:Ue=(h=Ue)||l.memoizedState!==null,Zs(e,n,l),Ue=h;break;default:Zs(e,n,l)}}function wp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{du(e)}catch(l){ge(n,n.return,l)}}function Wx(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new vp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new vp),n;default:throw Error(s(435,e.tag))}}function Sd(e,n){var l=Wx(e);n.forEach(function(h){var _=r1.bind(null,e,h);l.has(h)||(l.add(h),h.then(_,_))})}function on(e,n){var l=n.deletions;if(l!==null)for(var h=0;h<l.length;h++){var _=l[h],y=e,C=n,M=C;t:for(;M!==null;){switch(M.tag){case 27:if(Gr(M.type)){Me=M.stateNode,Wi=!1;break t}break;case 5:Me=M.stateNode,Wi=!1;break t;case 3:case 4:Me=M.stateNode.containerInfo,Wi=!0;break t}M=M.return}if(Me===null)throw Error(s(160));Sp(y,C,_),Me=null,Wi=!1,y=_.alternate,y!==null&&(y.return=null),_.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Cp(n,e),n=n.sibling}var Gn=null;function Cp(e,n){var l=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:on(n,e),ln(e),h&4&&(Or(3,e,e.return),Kl(3,e),Or(5,e,e.return));break;case 1:on(n,e),ln(e),h&512&&(Ue||l===null||ss(l,l.return)),h&64&&Bs&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var _=Gn;if(on(n,e),ln(e),h&512&&(Ue||l===null||ss(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=e.memoizedState,l===null)if(h===null)if(e.stateNode===null){t:{h=e.type,l=e.memoizedProps,_=_.ownerDocument||_;e:switch(h){case"title":y=_.getElementsByTagName("title")[0],(!y||y[ir]||y[De]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=_.createElement(h),_.head.insertBefore(y,_.querySelector("head > title"))),Si(y,h,l),y[De]=e,He(y),h=y;break t;case"link":var C=yy("link","href",_).get(h+(l.href||""));if(C){for(var M=0;M<C.length;M++)if(y=C[M],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(M,1);break e}}y=_.createElement(h),Si(y,h,l),_.head.appendChild(y);break;case"meta":if(C=yy("meta","content",_).get(h+(l.content||""))){for(M=0;M<C.length;M++)if(y=C[M],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(M,1);break e}}y=_.createElement(h),Si(y,h,l),_.head.appendChild(y);break;default:throw Error(s(468,h))}y[De]=e,He(y),h=y}e.stateNode=h}else vy(_,e.type,e.stateNode);else e.stateNode=py(_,h,e.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?vy(_,e.type,e.stateNode):py(_,h,e.memoizedProps)):h===null&&e.stateNode!==null&&yd(e,e.memoizedProps,l.memoizedProps)}break;case 27:on(n,e),ln(e),h&512&&(Ue||l===null||ss(l,l.return)),l!==null&&h&4&&yd(e,e.memoizedProps,l.memoizedProps);break;case 5:if(on(n,e),ln(e),h&512&&(Ue||l===null||ss(l,l.return)),e.flags&32){_=e.stateNode;try{xn(_,"")}catch(tt){ge(e,e.return,tt)}}h&4&&e.stateNode!=null&&(_=e.memoizedProps,yd(e,_,l!==null?l.memoizedProps:_)),h&1024&&(Ed=!0);break;case 6:if(on(n,e),ln(e),h&4){if(e.stateNode===null)throw Error(s(162));h=e.memoizedProps,l=e.stateNode;try{l.nodeValue=h}catch(tt){ge(e,e.return,tt)}}break;case 3:if(oh=null,_=Gn,Gn=rh(n.containerInfo),on(n,e),Gn=_,ln(e),h&4&&l!==null&&l.memoizedState.isDehydrated)try{du(n.containerInfo)}catch(tt){ge(e,e.return,tt)}Ed&&(Ed=!1,Tp(e));break;case 4:h=Gn,Gn=rh(e.stateNode.containerInfo),on(n,e),ln(e),Gn=h;break;case 12:on(n,e),ln(e);break;case 13:on(n,e),ln(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ld=Ct()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Sd(e,h)));break;case 22:_=e.memoizedState!==null;var I=l!==null&&l.memoizedState!==null,W=Bs,at=Ue;if(Bs=W||_,Ue=at||I,on(n,e),Ue=at,Bs=W,ln(e),h&8192)t:for(n=e.stateNode,n._visibility=_?n._visibility&-2:n._visibility|1,_&&(l===null||I||Bs||Ue||Oa(e)),l=null,n=e;;){if(n.tag===5||n.tag===26){if(l===null){I=l=n;try{if(y=I.stateNode,_)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{M=I.stateNode;var ct=I.memoizedProps.style,J=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;M.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(tt){ge(I,I.return,tt)}}}else if(n.tag===6){if(l===null){I=n;try{I.stateNode.nodeValue=_?"":I.memoizedProps}catch(tt){ge(I,I.return,tt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;l===n&&(l=null),n=n.return}l===n&&(l=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Sd(e,l))));break;case 19:on(n,e),ln(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Sd(e,h)));break;case 30:break;case 21:break;default:on(n,e),ln(e)}}function ln(e){var n=e.flags;if(n&2){try{for(var l,h=e.return;h!==null;){if(pp(h)){l=h;break}h=h.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var _=l.stateNode,y=vd(e);Xc(e,y,_);break;case 5:var C=l.stateNode;l.flags&32&&(xn(C,""),l.flags&=-33);var M=vd(e);Xc(e,M,C);break;case 3:case 4:var I=l.stateNode.containerInfo,W=vd(e);xd(e,W,I);break;default:throw Error(s(161))}}catch(at){ge(e,e.return,at)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Tp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Tp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Dr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)xp(e,n.alternate,n),n=n.sibling}function Oa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Or(4,n,n.return),Oa(n);break;case 1:ss(n,n.return);var l=n.stateNode;typeof l.componentWillUnmount=="function"&&mp(n,n.return,l),Oa(n);break;case 27:ru(n.stateNode);case 26:case 5:ss(n,n.return),Oa(n);break;case 22:n.memoizedState===null&&Oa(n);break;case 30:Oa(n);break;default:Oa(n)}e=e.sibling}}function Pr(e,n,l){for(l=l&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,_=e,y=n,C=y.flags;switch(y.tag){case 0:case 11:case 15:Pr(_,y,l),Kl(4,y);break;case 1:if(Pr(_,y,l),h=y,_=h.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(W){ge(h,h.return,W)}if(h=y,_=h.updateQueue,_!==null){var M=h.stateNode;try{var I=_.shared.hiddenCallbacks;if(I!==null)for(_.shared.hiddenCallbacks=null,_=0;_<I.length;_++)t_(I[_],M)}catch(W){ge(h,h.return,W)}}l&&C&64&&gp(y),Wl(y,y.return);break;case 27:yp(y);case 26:case 5:Pr(_,y,l),l&&h===null&&C&4&&_p(y),Wl(y,y.return);break;case 12:Pr(_,y,l);break;case 13:Pr(_,y,l),l&&C&4&&wp(_,y);break;case 22:y.memoizedState===null&&Pr(_,y,l),Wl(y,y.return);break;case 30:break;default:Pr(_,y,l)}n=n.sibling}}function wd(e,n){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Nl(l))}function Cd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Nl(e))}function rs(e,n,l,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)bp(e,n,l,h),n=n.sibling}function bp(e,n,l,h){var _=n.flags;switch(n.tag){case 0:case 11:case 15:rs(e,n,l,h),_&2048&&Kl(9,n);break;case 1:rs(e,n,l,h);break;case 3:rs(e,n,l,h),_&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Nl(e)));break;case 12:if(_&2048){rs(e,n,l,h),e=n.stateNode;try{var y=n.memoizedProps,C=y.id,M=y.onPostCommit;typeof M=="function"&&M(C,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){ge(n,n.return,I)}}else rs(e,n,l,h);break;case 13:rs(e,n,l,h);break;case 23:break;case 22:y=n.stateNode,C=n.alternate,n.memoizedState!==null?y._visibility&2?rs(e,n,l,h):Ql(e,n):y._visibility&2?rs(e,n,l,h):(y._visibility|=2,Oo(e,n,l,h,(n.subtreeFlags&10256)!==0)),_&2048&&wd(C,n);break;case 24:rs(e,n,l,h),_&2048&&Cd(n.alternate,n);break;default:rs(e,n,l,h)}}function Oo(e,n,l,h,_){for(_=_&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var y=e,C=n,M=l,I=h,W=C.flags;switch(C.tag){case 0:case 11:case 15:Oo(y,C,M,I,_),Kl(8,C);break;case 23:break;case 22:var at=C.stateNode;C.memoizedState!==null?at._visibility&2?Oo(y,C,M,I,_):Ql(y,C):(at._visibility|=2,Oo(y,C,M,I,_)),_&&W&2048&&wd(C.alternate,C);break;case 24:Oo(y,C,M,I,_),_&&W&2048&&Cd(C.alternate,C);break;default:Oo(y,C,M,I,_)}n=n.sibling}}function Ql(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var l=e,h=n,_=h.flags;switch(h.tag){case 22:Ql(l,h),_&2048&&wd(h.alternate,h);break;case 24:Ql(l,h),_&2048&&Cd(h.alternate,h);break;default:Ql(l,h)}n=n.sibling}}var Jl=8192;function Do(e){if(e.subtreeFlags&Jl)for(e=e.child;e!==null;)Rp(e),e=e.sibling}function Rp(e){switch(e.tag){case 26:Do(e),e.flags&Jl&&e.memoizedState!==null&&N1(Gn,e.memoizedState,e.memoizedProps);break;case 5:Do(e);break;case 3:case 4:var n=Gn;Gn=rh(e.stateNode.containerInfo),Do(e),Gn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Jl,Jl=16777216,Do(e),Jl=n):Do(e));break;default:Do(e)}}function Lp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function $l(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var h=n[l];fi=h,Ap(h,e)}Lp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mp(e),e=e.sibling}function Mp(e){switch(e.tag){case 0:case 11:case 15:$l(e),e.flags&2048&&Or(9,e,e.return);break;case 3:$l(e);break;case 12:$l(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Vc(e)):$l(e);break;default:$l(e)}}function Vc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var h=n[l];fi=h,Ap(h,e)}Lp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Or(8,n,n.return),Vc(n);break;case 22:l=n.stateNode,l._visibility&2&&(l._visibility&=-3,Vc(n));break;default:Vc(n)}e=e.sibling}}function Ap(e,n){for(;fi!==null;){var l=fi;switch(l.tag){case 0:case 11:case 15:Or(8,l,n);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Nl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,fi=h;else t:for(l=e;fi!==null;){h=fi;var _=h.sibling,y=h.return;if(Ep(h),h===l){fi=null;break t}if(_!==null){_.return=y,fi=_;break t}fi=y}}}var Qx={getCacheForType:function(e){var n=Ti(ti),l=n.data.get(e);return l===void 0&&(l=e(),n.data.set(e,l)),l}},Jx=typeof WeakMap=="function"?WeakMap:Map,oe=0,xe=null,qt=null,te=0,le=0,un=null,zr=!1,Po=!1,Td=!1,js=0,Be=0,Nr=0,Da=0,bd=0,Ln=0,zo=0,tu=null,Qi=null,Rd=!1,Ld=0,qc=1/0,Kc=null,Ir=null,Ei=0,kr=null,No=null,Io=0,Md=0,Ad=null,Op=null,eu=0,Od=null;function cn(){if((oe&2)!==0&&te!==0)return te&-te;if(F.T!==null){var e=wo;return e!==0?e:Fd()}return Xi()}function Dp(){Ln===0&&(Ln=(te&536870912)===0||Nt?er():536870912);var e=Rn.current;return e!==null&&(e.flags|=32),Ln}function hn(e,n,l){(e===xe&&(le===2||le===9)||e.cancelPendingCommit!==null)&&(ko(e,0),Fr(e,te,Ln,!1)),Yi(e,l),((oe&2)===0||e!==xe)&&(e===xe&&((oe&2)===0&&(Da|=l),Be===4&&Fr(e,te,Ln,!1)),as(e))}function Pp(e,n,l){if((oe&6)!==0)throw Error(s(327));var h=!l&&(n&124)===0&&(n&e.expiredLanes)===0||Di(e,n),_=h?e1(e,n):zd(e,n,!0),y=h;do{if(_===0){Po&&!h&&Fr(e,n,0,!1);break}else{if(l=e.current.alternate,y&&!$x(l)){_=zd(e,n,!1),y=!1;continue}if(_===2){if(y=n,e.errorRecoveryDisabledLanes&y)var C=0;else C=e.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){n=C;t:{var M=e;_=tu;var I=M.current.memoizedState.isDehydrated;if(I&&(ko(M,C).flags|=256),C=zd(M,C,!1),C!==2){if(Td&&!I){M.errorRecoveryDisabledLanes|=y,Da|=y,_=4;break t}y=Qi,Qi=_,y!==null&&(Qi===null?Qi=y:Qi.push.apply(Qi,y))}_=C}if(y=!1,_!==2)continue}}if(_===1){ko(e,0),Fr(e,n,0,!0);break}t:{switch(h=e,y=_,y){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Fr(h,n,Ln,!zr);break t;case 2:Qi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(_=Ld+300-Ct(),10<_)){if(Fr(h,n,Ln,!zr),ms(h,0,!0)!==0)break t;h.timeoutHandle=ly(zp.bind(null,h,l,Qi,Kc,Rd,n,Ln,Da,zo,zr,y,2,-0,0),_);break t}zp(h,l,Qi,Kc,Rd,n,Ln,Da,zo,zr,y,0,-0,0)}}break}while(!0);as(e)}function zp(e,n,l,h,_,y,C,M,I,W,at,ct,J,tt){if(e.timeoutHandle=-1,ct=n.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(lu={stylesheets:null,count:0,unsuspend:z1},Rp(n),ct=I1(),ct!==null)){e.cancelPendingCommit=ct(Zp.bind(null,e,n,y,l,h,_,C,M,I,at,1,J,tt)),Fr(e,y,C,!W);return}Zp(e,n,y,l,h,_,C,M,I)}function $x(e){for(var n=e;;){var l=n.tag;if((l===0||l===11||l===15)&&n.flags&16384&&(l=n.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var _=l[h],y=_.getSnapshot;_=_.value;try{if(!Ni(y(),_))return!1}catch{return!1}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Fr(e,n,l,h){n&=~bd,n&=~Da,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var _=n;0<_;){var y=31-Se(_),C=1<<y;h[y]=-1,_&=~C}l!==0&&ra(e,l,n)}function Wc(){return(oe&6)===0?(iu(0),!1):!0}function Dd(){if(qt!==null){if(le===0)var e=qt.return;else e=qt,kn=bn=null,Kf(e),Mo=null,Xl=0,e=qt;for(;e!==null;)dp(e.alternate,e),e=e.return;qt=null}}function ko(e,n){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,p1(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Dd(),xe=e,qt=l=Tn(e.current,null),te=n,le=0,un=null,zr=!1,Po=Di(e,n),Td=!1,zo=Ln=bd=Da=Nr=Be=0,Qi=tu=null,Rd=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var _=31-Se(h),y=1<<_;n|=e[_],h&=~y}return js=n,xa(),l}function Np(e,n){Ht=null,F.H=kc,n===kl||n===Rc?(n=Jm(),le=3):n===Km?(n=Jm(),le=4):le=n===$_?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,un=n,qt===null&&(Be=1,jc(e,ki(n,e.current)))}function Ip(){var e=F.H;return F.H=kc,e===null?kc:e}function kp(){var e=F.A;return F.A=Qx,e}function Pd(){Be=4,zr||(te&4194048)!==te&&Rn.current!==null||(Po=!0),(Nr&134217727)===0&&(Da&134217727)===0||xe===null||Fr(xe,te,Ln,!1)}function zd(e,n,l){var h=oe;oe|=2;var _=Ip(),y=kp();(xe!==e||te!==n)&&(Kc=null,ko(e,n)),n=!1;var C=Be;t:do try{if(le!==0&&qt!==null){var M=qt,I=un;switch(le){case 8:Dd(),C=6;break t;case 3:case 2:case 9:case 6:Rn.current===null&&(n=!0);var W=le;if(le=0,un=null,Fo(e,M,I,W),l&&Po){C=0;break t}break;default:W=le,le=0,un=null,Fo(e,M,I,W)}}t1(),C=Be;break}catch(at){Np(e,at)}while(!0);return n&&e.shellSuspendCounter++,kn=bn=null,oe=h,F.H=_,F.A=y,qt===null&&(xe=null,te=0,xa()),C}function t1(){for(;qt!==null;)Fp(qt)}function e1(e,n){var l=oe;oe|=2;var h=Ip(),_=kp();xe!==e||te!==n?(Kc=null,qc=Ct()+500,ko(e,n)):Po=Di(e,n);t:do try{if(le!==0&&qt!==null){n=qt;var y=un;e:switch(le){case 1:le=0,un=null,Fo(e,n,y,1);break;case 2:case 9:if(Wm(y)){le=0,un=null,Gp(n);break}n=function(){le!==2&&le!==9||xe!==e||(le=7),as(e)},y.then(n,n);break t;case 3:le=7;break t;case 4:le=5;break t;case 7:Wm(y)?(le=0,un=null,Gp(n)):(le=0,un=null,Fo(e,n,y,7));break;case 5:var C=null;switch(qt.tag){case 26:C=qt.memoizedState;case 5:case 27:var M=qt;if(!C||xy(C)){le=0,un=null;var I=M.sibling;if(I!==null)qt=I;else{var W=M.return;W!==null?(qt=W,Qc(W)):qt=null}break e}}le=0,un=null,Fo(e,n,y,5);break;case 6:le=0,un=null,Fo(e,n,y,6);break;case 8:Dd(),Be=6;break t;default:throw Error(s(462))}}i1();break}catch(at){Np(e,at)}while(!0);return kn=bn=null,F.H=h,F.A=_,oe=l,qt!==null?0:(xe=null,te=0,xa(),Be)}function i1(){for(;qt!==null&&!ai();)Fp(qt)}function Fp(e){var n=hp(e.alternate,e,js);e.memoizedProps=e.pendingProps,n===null?Qc(e):qt=n}function Gp(e){var n=e,l=n.alternate;switch(n.tag){case 15:case 0:n=rp(l,n,n.pendingProps,n.type,void 0,te);break;case 11:n=rp(l,n,n.pendingProps,n.type.render,n.ref,te);break;case 5:Kf(n);default:dp(l,n),n=qt=Pl(n,js),n=hp(l,n,js)}e.memoizedProps=e.pendingProps,n===null?Qc(e):qt=n}function Fo(e,n,l,h){kn=bn=null,Kf(n),Mo=null,Xl=0;var _=n.return;try{if(Yx(e,_,n,l,te)){Be=1,jc(e,ki(l,e.current)),qt=null;return}}catch(y){if(_!==null)throw qt=_,y;Be=1,jc(e,ki(l,e.current)),qt=null;return}n.flags&32768?(Nt||h===1?e=!0:Po||(te&536870912)!==0?e=!1:(zr=e=!0,(h===2||h===9||h===3||h===6)&&(h=Rn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Bp(n,e)):Qc(n)}function Qc(e){var n=e;do{if((n.flags&32768)!==0){Bp(n,zr);return}e=n.return;var l=Vx(n.alternate,n,js);if(l!==null){qt=l;return}if(n=n.sibling,n!==null){qt=n;return}qt=n=e}while(n!==null);Be===0&&(Be=5)}function Bp(e,n){do{var l=qx(e.alternate,e);if(l!==null){l.flags&=32767,qt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!n&&(e=e.sibling,e!==null)){qt=e;return}qt=e=l}while(e!==null);Be=6,qt=null}function Zp(e,n,l,h,_,y,C,M,I){e.cancelPendingCommit=null;do Jc();while(Ei!==0);if((oe&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(y=n.lanes|n.childLanes,y|=an,eo(e,l,y,C,M,I),e===xe&&(qt=xe=null,te=0),No=n,kr=e,Io=l,Md=y,Ad=_,Op=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,a1(Je,function(){return Xp(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,_=H.p,H.p=2,C=oe,oe|=4;try{Kx(e,n,l)}finally{oe=C,H.p=_,F.T=h}}Ei=1,jp(),Up(),Hp()}}function jp(){if(Ei===1){Ei=0;var e=kr,n=No,l=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var h=H.p;H.p=2;var _=oe;oe|=4;try{Cp(n,e);var y=Xd,C=pa(e.containerInfo),M=y.focusedElem,I=y.selectionRange;if(C!==M&&M&&M.ownerDocument&&mo(M.ownerDocument.documentElement,M)){if(I!==null&&ya(M)){var W=I.start,at=I.end;if(at===void 0&&(at=W),"selectionStart"in M)M.selectionStart=W,M.selectionEnd=Math.min(at,M.value.length);else{var ct=M.ownerDocument||document,J=ct&&ct.defaultView||window;if(J.getSelection){var tt=J.getSelection(),zt=M.textContent.length,Dt=Math.min(I.start,zt),fe=I.end===void 0?Dt:Math.min(I.end,zt);!tt.extend&&Dt>fe&&(C=fe,fe=Dt,Dt=C);var Y=Ol(M,Dt),B=Ol(M,fe);if(Y&&B&&(tt.rangeCount!==1||tt.anchorNode!==Y.node||tt.anchorOffset!==Y.offset||tt.focusNode!==B.node||tt.focusOffset!==B.offset)){var q=ct.createRange();q.setStart(Y.node,Y.offset),tt.removeAllRanges(),Dt>fe?(tt.addRange(q),tt.extend(B.node,B.offset)):(q.setEnd(B.node,B.offset),tt.addRange(q))}}}}for(ct=[],tt=M;tt=tt.parentNode;)tt.nodeType===1&&ct.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ct.length;M++){var ut=ct[M];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}ch=!!Yd,Xd=Yd=null}finally{oe=_,H.p=h,F.T=l}}e.current=n,Ei=2}}function Up(){if(Ei===2){Ei=0;var e=kr,n=No,l=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var h=H.p;H.p=2;var _=oe;oe|=4;try{xp(e,n.alternate,n)}finally{oe=_,H.p=h,F.T=l}}Ei=3}}function Hp(){if(Ei===4||Ei===3){Ei=0,Ae();var e=kr,n=No,l=Io,h=Op;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ei=5:(Ei=0,No=kr=null,Yp(e,e.pendingLanes));var _=e.pendingLanes;if(_===0&&(Ir=null),li(l),n=n.stateNode,ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(Te,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=F.T,_=H.p,H.p=2,F.T=null;try{for(var y=e.onRecoverableError,C=0;C<h.length;C++){var M=h[C];y(M.value,{componentStack:M.stack})}}finally{F.T=n,H.p=_}}(Io&3)!==0&&Jc(),as(e),_=e.pendingLanes,(l&4194090)!==0&&(_&42)!==0?e===Od?eu++:(eu=0,Od=e):eu=0,iu(0)}}function Yp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Nl(n)))}function Jc(e){return jp(),Up(),Hp(),Xp()}function Xp(){if(Ei!==5)return!1;var e=kr,n=Md;Md=0;var l=li(Io),h=F.T,_=H.p;try{H.p=32>l?32:l,F.T=null,l=Ad,Ad=null;var y=kr,C=Io;if(Ei=0,No=kr=null,Io=0,(oe&6)!==0)throw Error(s(331));var M=oe;if(oe|=4,Mp(y.current),bp(y,y.current,C,l),oe=M,iu(0,!1),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(Te,y)}catch{}return!0}finally{H.p=_,F.T=h,Yp(e,n)}}function Vp(e,n,l){n=ki(l,n),n=ud(e.stateNode,n,2),e=Rr(e,n,2),e!==null&&(Yi(e,2),as(e))}function ge(e,n,l){if(e.tag===3)Vp(e,e,l);else for(;n!==null;){if(n.tag===3){Vp(n,e,l);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ir===null||!Ir.has(h))){e=ki(l,e),l=Q_(2),h=Rr(n,l,2),h!==null&&(J_(l,h,n,e),Yi(h,2),as(h));break}}n=n.return}}function Nd(e,n,l){var h=e.pingCache;if(h===null){h=e.pingCache=new Jx;var _=new Set;h.set(n,_)}else _=h.get(n),_===void 0&&(_=new Set,h.set(n,_));_.has(l)||(Td=!0,_.add(l),e=n1.bind(null,e,n,l),n.then(e,e))}function n1(e,n,l){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,xe===e&&(te&l)===l&&(Be===4||Be===3&&(te&62914560)===te&&300>Ct()-Ld?(oe&2)===0&&ko(e,0):bd|=l,zo===te&&(zo=0)),as(e)}function qp(e,n){n===0&&(n=Dn()),e=Er(e,n),e!==null&&(Yi(e,n),as(e))}function s1(e){var n=e.memoizedState,l=0;n!==null&&(l=n.retryLane),qp(e,l)}function r1(e,n){var l=0;switch(e.tag){case 13:var h=e.stateNode,_=e.memoizedState;_!==null&&(l=_.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(n),qp(e,l)}function a1(e,n){return _i(e,n)}var $c=null,Go=null,Id=!1,th=!1,kd=!1,Pa=0;function as(e){e!==Go&&e.next===null&&(Go===null?$c=Go=e:Go=Go.next=e),th=!0,Id||(Id=!0,l1())}function iu(e,n){if(!kd&&th){kd=!0;do for(var l=!1,h=$c;h!==null;){if(e!==0){var _=h.pendingLanes;if(_===0)var y=0;else{var C=h.suspendedLanes,M=h.pingedLanes;y=(1<<31-Se(42|e)+1)-1,y&=_&~(C&~M),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,Jp(h,y))}else y=te,y=ms(h,h===xe?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Di(h,y)||(l=!0,Jp(h,y));h=h.next}while(l);kd=!1}}function o1(){Kp()}function Kp(){th=Id=!1;var e=0;Pa!==0&&(_1()&&(e=Pa),Pa=0);for(var n=Ct(),l=null,h=$c;h!==null;){var _=h.next,y=Wp(h,n);y===0?(h.next=null,l===null?$c=_:l.next=_,_===null&&(Go=l)):(l=h,(e!==0||(y&3)!==0)&&(th=!0)),h=_}iu(e)}function Wp(e,n){for(var l=e.suspendedLanes,h=e.pingedLanes,_=e.expirationTimes,y=e.pendingLanes&-62914561;0<y;){var C=31-Se(y),M=1<<C,I=_[C];I===-1?((M&l)===0||(M&h)!==0)&&(_[C]=to(M,n)):I<=n&&(e.expiredLanes|=M),y&=~M}if(n=xe,l=te,l=ms(e,e===n?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,l===0||e===n&&(le===2||le===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Qe(h),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Di(e,l)){if(n=l&-l,n===e.callbackPriority)return n;switch(h!==null&&Qe(h),li(l)){case 2:case 8:l=Ce;break;case 32:l=Je;break;case 268435456:l=Qt;break;default:l=Je}return h=Qp.bind(null,e),l=_i(l,h),e.callbackPriority=n,e.callbackNode=l,n}return h!==null&&h!==null&&Qe(h),e.callbackPriority=2,e.callbackNode=null,2}function Qp(e,n){if(Ei!==0&&Ei!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Jc()&&e.callbackNode!==l)return null;var h=te;return h=ms(e,e===xe?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(Pp(e,h,n),Wp(e,Ct()),e.callbackNode!=null&&e.callbackNode===l?Qp.bind(null,e):null)}function Jp(e,n){if(Jc())return null;Pp(e,n,!0)}function l1(){y1(function(){(oe&6)!==0?_i(Jt,o1):Kp()})}function Fd(){return Pa===0&&(Pa=er()),Pa}function $p(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:lr(""+e)}function ty(e,n){var l=n.ownerDocument.createElement("input");return l.name=n.name,l.value=n.value,e.id&&l.setAttribute("form",e.id),n.parentNode.insertBefore(l,n),e=new FormData(e),l.parentNode.removeChild(l),e}function u1(e,n,l,h,_){if(n==="submit"&&l&&l.stateNode===_){var y=$p((_[re]||null).action),C=h.submitter;C&&(n=(n=C[re]||null)?$p(n.formAction):C.getAttribute("formAction"),n!==null&&(y=n,C=null));var M=new fa("action","action",null,h,_);e.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Pa!==0){var I=C?ty(_,C):new FormData(_);sd(l,{pending:!0,data:I,method:_.method,action:y},null,I)}}else typeof y=="function"&&(M.preventDefault(),I=C?ty(_,C):new FormData(_),sd(l,{pending:!0,data:I,method:_.method,action:y},y,I))},currentTarget:_}]})}}for(var Gd=0;Gd<Os.length;Gd++){var Bd=Os[Gd],c1=Bd.toLowerCase(),h1=Bd[0].toUpperCase()+Bd.slice(1);rn(c1,"on"+h1)}rn(yc,"onAnimationEnd"),rn(sn,"onAnimationIteration"),rn(va,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(Pf,"onTransitionRun"),rn(vo,"onTransitionStart"),rn(zf,"onTransitionCancel"),rn(Dl,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function ey(e,n){n=(n&4)!==0;for(var l=0;l<e.length;l++){var h=e[l],_=h.event;h=h.listeners;t:{var y=void 0;if(n)for(var C=h.length-1;0<=C;C--){var M=h[C],I=M.instance,W=M.currentTarget;if(M=M.listener,I!==y&&_.isPropagationStopped())break t;y=M,_.currentTarget=W;try{y(_)}catch(at){Zc(at)}_.currentTarget=null,y=I}else for(C=0;C<h.length;C++){if(M=h[C],I=M.instance,W=M.currentTarget,M=M.listener,I!==y&&_.isPropagationStopped())break t;y=M,_.currentTarget=W;try{y(_)}catch(at){Zc(at)}_.currentTarget=null,y=I}}}}function Kt(e,n){var l=n[Re];l===void 0&&(l=n[Re]=new Set);var h=e+"__bubble";l.has(h)||(iy(n,e,2,!1),l.add(h))}function Zd(e,n,l){var h=0;n&&(h|=4),iy(l,e,h,n)}var eh="_reactListening"+Math.random().toString(36).slice(2);function jd(e){if(!e[eh]){e[eh]=!0,Ju.forEach(function(l){l!=="selectionchange"&&(f1.has(l)||Zd(l,!1,e),Zd(l,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[eh]||(n[eh]=!0,Zd("selectionchange",!1,n))}}function iy(e,n,l,h){switch(by(n)){case 2:var _=G1;break;case 8:_=B1;break;default:_=ig}l=_.bind(null,n,l,e),_=void 0,!ha||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(_=!0),h?_!==void 0?e.addEventListener(n,l,{capture:!0,passive:_}):e.addEventListener(n,l,!0):_!==void 0?e.addEventListener(n,l,{passive:_}):e.addEventListener(n,l,!1)}function Ud(e,n,l,h,_){var y=h;if((n&1)===0&&(n&2)===0&&h!==null)t:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var M=h.stateNode.containerInfo;if(M===_)break;if(C===4)for(C=h.return;C!==null;){var I=C.tag;if((I===3||I===4)&&C.stateNode.containerInfo===_)return;C=C.return}for(;M!==null;){if(C=Kn(M),C===null)return;if(I=C.tag,I===5||I===6||I===26||I===27){h=y=C;continue t}M=M.parentNode}}h=h.return}$i(function(){var W=y,at=ur(l),ct=[];t:{var J=vc.get(e);if(J!==void 0){var tt=fa,zt=e;switch(e){case"keypress":if(Ge(l)===0)break t;case"keydown":case"keyup":tt=Tf;break;case"focusin":zt="focus",tt=Sl;break;case"focusout":zt="blur",tt=Sl;break;case"beforeblur":case"afterblur":tt=Sl;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=xf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Rf;break;case yc:case sn:case va:tt=Ef;break;case Dl:tt=Lf;break;case"scroll":case"scrollend":tt=vf;break;case"wheel":tt=uc;break;case"copy":case"cut":case"paste":tt=wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Tl;break;case"toggle":case"beforetoggle":tt=Rs}var Dt=(n&4)!==0,fe=!Dt&&(e==="scroll"||e==="scrollend"),Y=Dt?J!==null?J+"Capture":null:J;Dt=[];for(var B=W,q;B!==null;){var ut=B;if(q=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||q===null||Y===null||(ut=ie(B,Y),ut!=null&&Dt.push(su(B,ut,q))),fe)break;B=B.return}0<Dt.length&&(J=new tt(J,zt,null,l,at),ct.push({event:J,listeners:Dt}))}}if((n&7)===0){t:{if(J=e==="mouseover"||e==="pointerover",tt=e==="mouseout"||e==="pointerout",J&&l!==ca&&(zt=l.relatedTarget||l.fromElement)&&(Kn(zt)||zt[Ze]))break t;if((tt||J)&&(J=at.window===at?at:(J=at.ownerDocument)?J.defaultView||J.parentWindow:window,tt?(zt=l.relatedTarget||l.toElement,tt=W,zt=zt?Kn(zt):null,zt!==null&&(fe=u(zt),Dt=zt.tag,zt!==fe||Dt!==5&&Dt!==27&&Dt!==6)&&(zt=null)):(tt=null,zt=W),tt!==zt)){if(Dt=fr,ut="onMouseLeave",Y="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(Dt=Tl,ut="onPointerLeave",Y="onPointerEnter",B="pointer"),fe=tt==null?J:vn(tt),q=zt==null?J:vn(zt),J=new Dt(ut,B+"leave",tt,l,at),J.target=fe,J.relatedTarget=q,ut=null,Kn(at)===W&&(Dt=new Dt(Y,B+"enter",zt,l,at),Dt.target=q,Dt.relatedTarget=fe,ut=Dt),fe=ut,tt&&zt)e:{for(Dt=tt,Y=zt,B=0,q=Dt;q;q=Bo(q))B++;for(q=0,ut=Y;ut;ut=Bo(ut))q++;for(;0<B-q;)Dt=Bo(Dt),B--;for(;0<q-B;)Y=Bo(Y),q--;for(;B--;){if(Dt===Y||Y!==null&&Dt===Y.alternate)break e;Dt=Bo(Dt),Y=Bo(Y)}Dt=null}else Dt=null;tt!==null&&ny(ct,J,tt,Dt,!1),zt!==null&&fe!==null&&ny(ct,fe,zt,Dt,!0)}}t:{if(J=W?vn(W):window,tt=J.nodeName&&J.nodeName.toLowerCase(),tt==="select"||tt==="input"&&J.type==="file")var wt=mr;else if(Ms(J))if(Ll)wt=Df;else{wt=Of;var Xt=Al}else tt=J.nodeName,!tt||tt.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?W&&ua(W.elementType)&&(wt=mr):wt=In;if(wt&&(wt=wt(e,W))){gc(ct,wt,l,at);break t}Xt&&Xt(e,J,W),e==="focusout"&&W&&J.type==="number"&&W.memoizedProps.value!=null&&ar(J,"number",J.value)}switch(Xt=W?vn(W):window,e){case"focusin":(Ms(Xt)||Xt.contentEditable==="true")&&(nn=Xt,yr=W,As=null);break;case"focusout":As=yr=nn=null;break;case"mousedown":po=!0;break;case"contextmenu":case"mouseup":case"dragend":po=!1,_c(ct,l,at);break;case"selectionchange":if(_o)break;case"keydown":case"keyup":_c(ct,l,at)}var Rt;if(Ls)t:{switch(e){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else dr?fo(e,l)&&(Pt="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Pt="onCompositionStart");Pt&&(Rl&&l.locale!=="ko"&&(dr||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&dr&&(Rt=hr()):(Sn=at,zn="value"in Sn?Sn.value:Sn.textContent,dr=!0)),Xt=ih(W,Pt),0<Xt.length&&(Pt=new tn(Pt,e,null,l,at),ct.push({event:Pt,listeners:Xt}),Rt?Pt.data=Rt:(Rt=fc(l),Rt!==null&&(Pt.data=Rt)))),(Rt=cc?dc(e,l):Af(e,l))&&(Pt=ih(W,"onBeforeInput"),0<Pt.length&&(Xt=new tn("onBeforeInput","beforeinput",null,l,at),ct.push({event:Xt,listeners:Pt}),Xt.data=Rt)),u1(ct,e,W,l,at)}ey(ct,n)})}function su(e,n,l){return{instance:e,listener:n,currentTarget:l}}function ih(e,n){for(var l=n+"Capture",h=[];e!==null;){var _=e,y=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||y===null||(_=ie(e,l),_!=null&&h.unshift(su(e,_,y)),_=ie(e,n),_!=null&&h.push(su(e,_,y))),e.tag===3)return h;e=e.return}return[]}function Bo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ny(e,n,l,h,_){for(var y=n._reactName,C=[];l!==null&&l!==h;){var M=l,I=M.alternate,W=M.stateNode;if(M=M.tag,I!==null&&I===h)break;M!==5&&M!==26&&M!==27||W===null||(I=W,_?(W=ie(l,y),W!=null&&C.unshift(su(l,W,I))):_||(W=ie(l,y),W!=null&&C.push(su(l,W,I)))),l=l.return}C.length!==0&&e.push({event:n,listeners:C})}var d1=/\r\n?/g,g1=/\u0000|\uFFFD/g;function sy(e){return(typeof e=="string"?e:""+e).replace(d1,`
`).replace(g1,"")}function ry(e,n){return n=sy(n),sy(e)===n}function nh(){}function he(e,n,l,h,_,y){switch(l){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||xn(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&xn(e,""+h);break;case"className":so(e,"class",h);break;case"tabIndex":so(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":so(e,l,h);break;case"style":or(e,h,y);break;case"data":if(n!=="object"){so(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||l!=="href")){e.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(l);break}h=lr(""+h),e.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(n!=="input"&&he(e,n,"name",_.name,_,null),he(e,n,"formEncType",_.formEncType,_,null),he(e,n,"formMethod",_.formMethod,_,null),he(e,n,"formTarget",_.formTarget,_,null)):(he(e,n,"encType",_.encType,_,null),he(e,n,"method",_.method,_,null),he(e,n,"target",_.target,_,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(l);break}h=lr(""+h),e.setAttribute(l,h);break;case"onClick":h!=null&&(e.onclick=nh);break;case"onScroll":h!=null&&Kt("scroll",e);break;case"onScrollEnd":h!=null&&Kt("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(_.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}l=lr(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(l,""+h):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":h===!0?e.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(l,h):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(l,h):e.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(l):e.setAttribute(l,h);break;case"popover":Kt("beforetoggle",e),Kt("toggle",e),no(e,"popover",h);break;case"xlinkActuate":Pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Pn(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Pn(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Pn(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Pn(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":no(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=vl.get(l)||l,no(e,l,h))}}function Hd(e,n,l,h,_,y){switch(l){case"style":or(e,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(_.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"children":typeof h=="string"?xn(e,h):(typeof h=="number"||typeof h=="bigint")&&xn(e,""+h);break;case"onScroll":h!=null&&Kt("scroll",e);break;case"onScrollEnd":h!=null&&Kt("scrollend",e);break;case"onClick":h!=null&&(e.onclick=nh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$u.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(_=l.endsWith("Capture"),n=l.slice(2,_?l.length-7:void 0),y=e[re]||null,y=y!=null?y[l]:null,typeof y=="function"&&e.removeEventListener(n,y,_),typeof h=="function")){typeof y!="function"&&y!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(n,h,_);break t}l in e?e[l]=h:h===!0?e.setAttribute(l,""):no(e,l,h)}}}function Si(e,n,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",e),Kt("load",e);var h=!1,_=!1,y;for(y in l)if(l.hasOwnProperty(y)){var C=l[y];if(C!=null)switch(y){case"src":h=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:he(e,n,y,C,l,null)}}_&&he(e,n,"srcSet",l.srcSet,l,null),h&&he(e,n,"src",l.src,l,null);return;case"input":Kt("invalid",e);var M=y=C=_=null,I=null,W=null;for(h in l)if(l.hasOwnProperty(h)){var at=l[h];if(at!=null)switch(h){case"name":_=at;break;case"type":C=at;break;case"checked":I=at;break;case"defaultChecked":W=at;break;case"value":y=at;break;case"defaultValue":M=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(s(137,n));break;default:he(e,n,h,at,l,null)}}ec(e,y,M,I,W,C,_,!1),rr(e);return;case"select":Kt("invalid",e),h=C=y=null;for(_ in l)if(l.hasOwnProperty(_)&&(M=l[_],M!=null))switch(_){case"value":y=M;break;case"defaultValue":C=M;break;case"multiple":h=M;default:he(e,n,_,M,l,null)}n=y,l=C,e.multiple=!!h,n!=null?Vi(e,!!h,n,!1):l!=null&&Vi(e,!!h,l,!0);return;case"textarea":Kt("invalid",e),y=_=h=null;for(C in l)if(l.hasOwnProperty(C)&&(M=l[C],M!=null))switch(C){case"value":h=M;break;case"defaultValue":_=M;break;case"children":y=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(s(91));break;default:he(e,n,C,M,l,null)}Wn(e,h,_,y),rr(e);return;case"option":for(I in l)if(l.hasOwnProperty(I)&&(h=l[I],h!=null))switch(I){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:he(e,n,I,h,l,null)}return;case"dialog":Kt("beforetoggle",e),Kt("toggle",e),Kt("cancel",e),Kt("close",e);break;case"iframe":case"object":Kt("load",e);break;case"video":case"audio":for(h=0;h<nu.length;h++)Kt(nu[h],e);break;case"image":Kt("error",e),Kt("load",e);break;case"details":Kt("toggle",e);break;case"embed":case"source":case"link":Kt("error",e),Kt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(h=l[W],h!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:he(e,n,W,h,l,null)}return;default:if(ua(n)){for(at in l)l.hasOwnProperty(at)&&(h=l[at],h!==void 0&&Hd(e,n,at,h,l,void 0));return}}for(M in l)l.hasOwnProperty(M)&&(h=l[M],h!=null&&he(e,n,M,h,l,null))}function m1(e,n,l,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,y=null,C=null,M=null,I=null,W=null,at=null;for(tt in l){var ct=l[tt];if(l.hasOwnProperty(tt)&&ct!=null)switch(tt){case"checked":break;case"value":break;case"defaultValue":I=ct;default:h.hasOwnProperty(tt)||he(e,n,tt,null,h,ct)}}for(var J in h){var tt=h[J];if(ct=l[J],h.hasOwnProperty(J)&&(tt!=null||ct!=null))switch(J){case"type":y=tt;break;case"name":_=tt;break;case"checked":W=tt;break;case"defaultChecked":at=tt;break;case"value":C=tt;break;case"defaultValue":M=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(s(137,n));break;default:tt!==ct&&he(e,n,J,tt,h,ct)}}wi(e,C,M,I,W,at,y,_);return;case"select":tt=C=M=J=null;for(y in l)if(I=l[y],l.hasOwnProperty(y)&&I!=null)switch(y){case"value":break;case"multiple":tt=I;default:h.hasOwnProperty(y)||he(e,n,y,null,h,I)}for(_ in h)if(y=h[_],I=l[_],h.hasOwnProperty(_)&&(y!=null||I!=null))switch(_){case"value":J=y;break;case"defaultValue":M=y;break;case"multiple":C=y;default:y!==I&&he(e,n,_,y,h,I)}n=M,l=C,h=tt,J!=null?Vi(e,!!l,J,!1):!!h!=!!l&&(n!=null?Vi(e,!!l,n,!0):Vi(e,!!l,l?[]:"",!1));return;case"textarea":tt=J=null;for(M in l)if(_=l[M],l.hasOwnProperty(M)&&_!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:he(e,n,M,null,h,_)}for(C in h)if(_=h[C],y=l[C],h.hasOwnProperty(C)&&(_!=null||y!=null))switch(C){case"value":J=_;break;case"defaultValue":tt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:_!==y&&he(e,n,C,_,h,y)}Pe(e,J,tt);return;case"option":for(var zt in l)if(J=l[zt],l.hasOwnProperty(zt)&&J!=null&&!h.hasOwnProperty(zt))switch(zt){case"selected":e.selected=!1;break;default:he(e,n,zt,null,h,J)}for(I in h)if(J=h[I],tt=l[I],h.hasOwnProperty(I)&&J!==tt&&(J!=null||tt!=null))switch(I){case"selected":e.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:he(e,n,I,J,h,tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in l)J=l[Dt],l.hasOwnProperty(Dt)&&J!=null&&!h.hasOwnProperty(Dt)&&he(e,n,Dt,null,h,J);for(W in h)if(J=h[W],tt=l[W],h.hasOwnProperty(W)&&J!==tt&&(J!=null||tt!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,n));break;default:he(e,n,W,J,h,tt)}return;default:if(ua(n)){for(var fe in l)J=l[fe],l.hasOwnProperty(fe)&&J!==void 0&&!h.hasOwnProperty(fe)&&Hd(e,n,fe,void 0,h,J);for(at in h)J=h[at],tt=l[at],!h.hasOwnProperty(at)||J===tt||J===void 0&&tt===void 0||Hd(e,n,at,J,h,tt);return}}for(var Y in l)J=l[Y],l.hasOwnProperty(Y)&&J!=null&&!h.hasOwnProperty(Y)&&he(e,n,Y,null,h,J);for(ct in h)J=h[ct],tt=l[ct],!h.hasOwnProperty(ct)||J===tt||J==null&&tt==null||he(e,n,ct,J,h,tt)}var Yd=null,Xd=null;function sh(e){return e.nodeType===9?e:e.ownerDocument}function ay(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Vd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qd=null;function _1(){var e=window.event;return e&&e.type==="popstate"?e===qd?!1:(qd=e,!0):(qd=null,!1)}var ly=typeof setTimeout=="function"?setTimeout:void 0,p1=typeof clearTimeout=="function"?clearTimeout:void 0,uy=typeof Promise=="function"?Promise:void 0,y1=typeof queueMicrotask=="function"?queueMicrotask:typeof uy<"u"?function(e){return uy.resolve(null).then(e).catch(v1)}:ly;function v1(e){setTimeout(function(){throw e})}function Gr(e){return e==="head"}function cy(e,n){var l=n,h=0,_=0;do{var y=l.nextSibling;if(e.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(0<h&&8>h){l=h;var C=e.ownerDocument;if(l&1&&ru(C.documentElement),l&2&&ru(C.body),l&4)for(l=C.head,ru(l),C=l.firstChild;C;){var M=C.nextSibling,I=C.nodeName;C[ir]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=M}}if(_===0){e.removeChild(y),du(n);return}_--}else l==="$"||l==="$?"||l==="$!"?_++:h=l.charCodeAt(0)-48;else h=0;l=y}while(l);du(n)}function Kd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var l=n;switch(n=n.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Kd(l),io(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function x1(e,n,l,h){for(;e.nodeType===1;){var _=l;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[ir])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(y=e.getAttribute("rel"),y==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(y!==_.rel||e.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||e.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||e.getAttribute("title")!==(_.title==null?null:_.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(y=e.getAttribute("src"),(y!==(_.src==null?null:_.src)||e.getAttribute("type")!==(_.type==null?null:_.type)||e.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&y&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var y=_.name==null?null:""+_.name;if(_.type==="hidden"&&e.getAttribute("name")===y)return e}else return e;if(e=Bn(e.nextSibling),e===null)break}return null}function E1(e,n,l){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Bn(e.nextSibling),e===null))return null;return e}function Wd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function S1(e,n){var l=e.ownerDocument;if(e.data!=="$?"||l.readyState==="complete")n();else{var h=function(){n(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function Bn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Qd=null;function hy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return e;n--}else l==="/$"&&n++}e=e.previousSibling}return null}function fy(e,n,l){switch(n=sh(l),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ru(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);io(e)}var Mn=new Map,dy=new Set;function rh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Us=H.d;H.d={f:w1,r:C1,D:T1,C:b1,L:R1,m:L1,X:A1,S:M1,M:O1};function w1(){var e=Us.f(),n=Wc();return e||n}function C1(e){var n=_s(e);n!==null&&n.tag===5&&n.type==="form"?P_(n):Us.r(e)}var Zo=typeof document>"u"?null:document;function gy(e,n,l){var h=Zo;if(h&&typeof n=="string"&&n){var _=yi(n);_='link[rel="'+e+'"][href="'+_+'"]',typeof l=="string"&&(_+='[crossorigin="'+l+'"]'),dy.has(_)||(dy.add(_),e={rel:e,crossOrigin:l,href:n},h.querySelector(_)===null&&(n=h.createElement("link"),Si(n,"link",e),He(n),h.head.appendChild(n)))}}function T1(e){Us.D(e),gy("dns-prefetch",e,null)}function b1(e,n){Us.C(e,n),gy("preconnect",e,n)}function R1(e,n,l){Us.L(e,n,l);var h=Zo;if(h&&e&&n){var _='link[rel="preload"][as="'+yi(n)+'"]';n==="image"&&l&&l.imageSrcSet?(_+='[imagesrcset="'+yi(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(_+='[imagesizes="'+yi(l.imageSizes)+'"]')):_+='[href="'+yi(e)+'"]';var y=_;switch(n){case"style":y=jo(e);break;case"script":y=Uo(e)}Mn.has(y)||(e=v({rel:"preload",href:n==="image"&&l&&l.imageSrcSet?void 0:e,as:n},l),Mn.set(y,e),h.querySelector(_)!==null||n==="style"&&h.querySelector(au(y))||n==="script"&&h.querySelector(ou(y))||(n=h.createElement("link"),Si(n,"link",e),He(n),h.head.appendChild(n)))}}function L1(e,n){Us.m(e,n);var l=Zo;if(l&&e){var h=n&&typeof n.as=="string"?n.as:"script",_='link[rel="modulepreload"][as="'+yi(h)+'"][href="'+yi(e)+'"]',y=_;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Uo(e)}if(!Mn.has(y)&&(e=v({rel:"modulepreload",href:e},n),Mn.set(y,e),l.querySelector(_)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ou(y)))return}h=l.createElement("link"),Si(h,"link",e),He(h),l.head.appendChild(h)}}}function M1(e,n,l){Us.S(e,n,l);var h=Zo;if(h&&e){var _=ps(h).hoistableStyles,y=jo(e);n=n||"default";var C=_.get(y);if(!C){var M={loading:0,preload:null};if(C=h.querySelector(au(y)))M.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},l),(l=Mn.get(y))&&Jd(e,l);var I=C=h.createElement("link");He(I),Si(I,"link",e),I._p=new Promise(function(W,at){I.onload=W,I.onerror=at}),I.addEventListener("load",function(){M.loading|=1}),I.addEventListener("error",function(){M.loading|=2}),M.loading|=4,ah(C,n,h)}C={type:"stylesheet",instance:C,count:1,state:M},_.set(y,C)}}}function A1(e,n){Us.X(e,n);var l=Zo;if(l&&e){var h=ps(l).hoistableScripts,_=Uo(e),y=h.get(_);y||(y=l.querySelector(ou(_)),y||(e=v({src:e,async:!0},n),(n=Mn.get(_))&&$d(e,n),y=l.createElement("script"),He(y),Si(y,"link",e),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(_,y))}}function O1(e,n){Us.M(e,n);var l=Zo;if(l&&e){var h=ps(l).hoistableScripts,_=Uo(e),y=h.get(_);y||(y=l.querySelector(ou(_)),y||(e=v({src:e,async:!0,type:"module"},n),(n=Mn.get(_))&&$d(e,n),y=l.createElement("script"),He(y),Si(y,"link",e),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(_,y))}}function my(e,n,l,h){var _=(_=mt.current)?rh(_):null;if(!_)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(n=jo(l.href),l=ps(_).hoistableStyles,h=l.get(n),h||(h={type:"style",instance:null,count:0,state:null},l.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=jo(l.href);var y=ps(_).hoistableStyles,C=y.get(e);if(C||(_=_.ownerDocument||_,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(e,C),(y=_.querySelector(au(e)))&&!y._p&&(C.instance=y,C.state.loading=5),Mn.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Mn.set(e,l),y||D1(_,e,l,C.state))),n&&h===null)throw Error(s(528,""));return C}if(n&&h!==null)throw Error(s(529,""));return null;case"script":return n=l.async,l=l.src,typeof l=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Uo(l),l=ps(_).hoistableScripts,h=l.get(n),h||(h={type:"script",instance:null,count:0,state:null},l.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function jo(e){return'href="'+yi(e)+'"'}function au(e){return'link[rel="stylesheet"]['+e+"]"}function _y(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function D1(e,n,l,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),Si(n,"link",l),He(n),e.head.appendChild(n))}function Uo(e){return'[src="'+yi(e)+'"]'}function ou(e){return"script[async]"+e}function py(e,n,l){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+yi(l.href)+'"]');if(h)return n.instance=h,He(h),h;var _=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),He(h),Si(h,"style",_),ah(h,l.precedence,e),n.instance=h;case"stylesheet":_=jo(l.href);var y=e.querySelector(au(_));if(y)return n.state.loading|=4,n.instance=y,He(y),y;h=_y(l),(_=Mn.get(_))&&Jd(h,_),y=(e.ownerDocument||e).createElement("link"),He(y);var C=y;return C._p=new Promise(function(M,I){C.onload=M,C.onerror=I}),Si(y,"link",h),n.state.loading|=4,ah(y,l.precedence,e),n.instance=y;case"script":return y=Uo(l.src),(_=e.querySelector(ou(y)))?(n.instance=_,He(_),_):(h=l,(_=Mn.get(y))&&(h=v({},l),$d(h,_)),e=e.ownerDocument||e,_=e.createElement("script"),He(_),Si(_,"link",h),e.head.appendChild(_),n.instance=_);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,ah(h,l.precedence,e));return n.instance}function ah(e,n,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=h.length?h[h.length-1]:null,y=_,C=0;C<h.length;C++){var M=h[C];if(M.dataset.precedence===n)y=M;else if(y!==_)break}y?y.parentNode.insertBefore(e,y.nextSibling):(n=l.nodeType===9?l.head:l,n.insertBefore(e,n.firstChild))}function Jd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function $d(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var oh=null;function yy(e,n,l){if(oh===null){var h=new Map,_=oh=new Map;_.set(l,h)}else _=oh,h=_.get(l),h||(h=new Map,_.set(l,h));if(h.has(e))return h;for(h.set(e,null),l=l.getElementsByTagName(e),_=0;_<l.length;_++){var y=l[_];if(!(y[ir]||y[De]||e==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(n)||"";C=e+C;var M=h.get(C);M?M.push(y):h.set(C,[y])}}return h}function vy(e,n,l){e=e.ownerDocument||e,e.head.insertBefore(l,n==="title"?e.querySelector("head > title"):null)}function P1(e,n,l){if(l===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function xy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var lu=null;function z1(){}function N1(e,n,l){if(lu===null)throw Error(s(475));var h=lu;if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var _=jo(l.href),y=e.querySelector(au(_));if(y){e=y._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(h.count++,h=lh.bind(h),e.then(h,h)),n.state.loading|=4,n.instance=y,He(y);return}y=e.ownerDocument||e,l=_y(l),(_=Mn.get(_))&&Jd(l,_),y=y.createElement("link"),He(y);var C=y;C._p=new Promise(function(M,I){C.onload=M,C.onerror=I}),Si(y,"link",l),n.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(h.count++,n=lh.bind(h),e.addEventListener("load",n),e.addEventListener("error",n))}}function I1(){if(lu===null)throw Error(s(475));var e=lu;return e.stylesheets&&e.count===0&&tg(e,e.stylesheets),0<e.count?function(n){var l=setTimeout(function(){if(e.stylesheets&&tg(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l)}}:null}function lh(){if(this.count--,this.count===0){if(this.stylesheets)tg(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uh=null;function tg(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,uh=new Map,n.forEach(k1,e),uh=null,lh.call(e))}function k1(e,n){if(!(n.state.loading&4)){var l=uh.get(e);if(l)var h=l.get(null);else{l=new Map,uh.set(e,l);for(var _=e.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<_.length;y++){var C=_[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),h=C)}h&&l.set(null,h)}_=n.instance,C=_.getAttribute("data-precedence"),y=l.get(C)||h,y===h&&l.set(null,_),l.set(C,_),this.count++,h=lh.bind(this),_.addEventListener("load",h),_.addEventListener("error",h),y?y.parentNode.insertBefore(_,y.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(_,e.firstChild)),n.state.loading|=4}}var uu={$$typeof:z,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function F1(e,n,l,h,_,y,C,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=h,this.onUncaughtError=_,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Ey(e,n,l,h,_,y,C,M,I,W,at,ct){return e=new F1(e,n,l,C,M,I,W,ct),n=1,y===!0&&(n|=24),y=Gi(3,null,null,n),e.current=y,y.stateNode=e,n=Nf(),n.refCount++,e.pooledCache=n,n.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:n},Gf(y),e}function Sy(e){return e?(e=zs,e):zs}function wy(e,n,l,h,_,y){_=Sy(_),h.context===null?h.context=_:h.pendingContext=_,h=br(n),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=Rr(e,h,n),l!==null&&(hn(l,e,n),Gl(l,e,n))}function Cy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<n?l:n}}function eg(e,n){Cy(e,n),(e=e.alternate)&&Cy(e,n)}function Ty(e){if(e.tag===13){var n=Er(e,67108864);n!==null&&hn(n,e,67108864),eg(e,67108864)}}var ch=!0;function G1(e,n,l,h){var _=F.T;F.T=null;var y=H.p;try{H.p=2,ig(e,n,l,h)}finally{H.p=y,F.T=_}}function B1(e,n,l,h){var _=F.T;F.T=null;var y=H.p;try{H.p=8,ig(e,n,l,h)}finally{H.p=y,F.T=_}}function ig(e,n,l,h){if(ch){var _=ng(h);if(_===null)Ud(e,n,h,hh,l),Ry(e,h);else if(j1(_,e,n,l,h))h.stopPropagation();else if(Ry(e,h),n&4&&-1<Z1.indexOf(e)){for(;_!==null;){var y=_s(_);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=Ji(y.pendingLanes);if(C!==0){var M=y;for(M.pendingLanes|=2,M.entangledLanes|=2;C;){var I=1<<31-Se(C);M.entanglements[1]|=I,C&=~I}as(y),(oe&6)===0&&(qc=Ct()+500,iu(0))}}break;case 13:M=Er(y,2),M!==null&&hn(M,y,2),Wc(),eg(y,2)}if(y=ng(h),y===null&&Ud(e,n,h,hh,l),y===_)break;_=y}_!==null&&h.stopPropagation()}else Ud(e,n,h,null,l)}}function ng(e){return e=ur(e),sg(e)}var hh=null;function sg(e){if(hh=null,e=Kn(e),e!==null){var n=u(e);if(n===null)e=null;else{var l=n.tag;if(l===13){if(e=f(n),e!==null)return e;e=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return hh=e,null}function by(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ut()){case Jt:return 2;case Ce:return 8;case Je:case Wt:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var rg=!1,Br=null,Zr=null,jr=null,cu=new Map,hu=new Map,Ur=[],Z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ry(e,n){switch(e){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":cu.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(n.pointerId)}}function fu(e,n,l,h,_,y){return e===null||e.nativeEvent!==y?(e={blockedOn:n,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[_]},n!==null&&(n=_s(n),n!==null&&Ty(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,_!==null&&n.indexOf(_)===-1&&n.push(_),e)}function j1(e,n,l,h,_){switch(n){case"focusin":return Br=fu(Br,e,n,l,h,_),!0;case"dragenter":return Zr=fu(Zr,e,n,l,h,_),!0;case"mouseover":return jr=fu(jr,e,n,l,h,_),!0;case"pointerover":var y=_.pointerId;return cu.set(y,fu(cu.get(y)||null,e,n,l,h,_)),!0;case"gotpointercapture":return y=_.pointerId,hu.set(y,fu(hu.get(y)||null,e,n,l,h,_)),!0}return!1}function Ly(e){var n=Kn(e.target);if(n!==null){var l=u(n);if(l!==null){if(n=l.tag,n===13){if(n=f(l),n!==null){e.blockedOn=n,$e(e.priority,function(){if(l.tag===13){var h=cn();h=yn(h);var _=Er(l,h);_!==null&&hn(_,l,h),eg(l,h)}});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fh(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var l=ng(e.nativeEvent);if(l===null){l=e.nativeEvent;var h=new l.constructor(l.type,l);ca=h,l.target.dispatchEvent(h),ca=null}else return n=_s(l),n!==null&&Ty(n),e.blockedOn=l,!1;n.shift()}return!0}function My(e,n,l){fh(e)&&l.delete(n)}function U1(){rg=!1,Br!==null&&fh(Br)&&(Br=null),Zr!==null&&fh(Zr)&&(Zr=null),jr!==null&&fh(jr)&&(jr=null),cu.forEach(My),hu.forEach(My)}function dh(e,n){e.blockedOn===n&&(e.blockedOn=null,rg||(rg=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,U1)))}var gh=null;function Ay(e){gh!==e&&(gh=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){gh===e&&(gh=null);for(var n=0;n<e.length;n+=3){var l=e[n],h=e[n+1],_=e[n+2];if(typeof h!="function"){if(sg(h||l)===null)continue;break}var y=_s(l);y!==null&&(e.splice(n,3),n-=3,sd(y,{pending:!0,data:_,method:l.method,action:h},h,_))}}))}function du(e){function n(I){return dh(I,e)}Br!==null&&dh(Br,e),Zr!==null&&dh(Zr,e),jr!==null&&dh(jr,e),cu.forEach(n),hu.forEach(n);for(var l=0;l<Ur.length;l++){var h=Ur[l];h.blockedOn===e&&(h.blockedOn=null)}for(;0<Ur.length&&(l=Ur[0],l.blockedOn===null);)Ly(l),l.blockedOn===null&&Ur.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var _=l[h],y=l[h+1],C=_[re]||null;if(typeof y=="function")C||Ay(l);else if(C){var M=null;if(y&&y.hasAttribute("formAction")){if(_=y,C=y[re]||null)M=C.formAction;else if(sg(_)!==null)continue}else M=C.action;typeof M=="function"?l[h+1]=M:(l.splice(h,3),h-=3),Ay(l)}}}function ag(e){this._internalRoot=e}mh.prototype.render=ag.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var l=n.current,h=cn();wy(l,h,e,n,null,null)},mh.prototype.unmount=ag.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;wy(e.current,2,null,e,null,null),Wc(),n[Ze]=null}};function mh(e){this._internalRoot=e}mh.prototype.unstable_scheduleHydration=function(e){if(e){var n=Xi();e={blockedOn:null,target:e,priority:n};for(var l=0;l<Ur.length&&n!==0&&n<Ur[l].priority;l++);Ur.splice(l,0,e),l===0&&Ly(e)}};var Oy=t.version;if(Oy!=="19.1.0")throw Error(s(527,Oy,"19.1.0"));H.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var H1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{Te=_h.inject(H1),ae=_h}catch{}}return mu.createRoot=function(e,n){if(!o(e))throw Error(s(299));var l=!1,h="",_=V_,y=q_,C=K_,M=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(_=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(C=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(M=n.unstable_transitionCallbacks)),n=Ey(e,1,!1,null,null,l,h,_,y,C,M,null),e[Ze]=n.current,jd(e),new ag(n)},mu.hydrateRoot=function(e,n,l){if(!o(e))throw Error(s(299));var h=!1,_="",y=V_,C=q_,M=K_,I=null,W=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(I=l.unstable_transitionCallbacks),l.formState!==void 0&&(W=l.formState)),n=Ey(e,1,!0,n,l??null,h,_,y,C,M,I,W),n.context=Sy(null),l=n.current,h=cn(),h=yn(h),_=br(h),_.callback=null,Rr(l,_,h),l=h,n.current.lanes=l,Yi(n,l),as(n),e[Ze]=n.current,jd(e),new mh(n)},mu.version="19.1.0",mu}var Zy;function eE(){if(Zy)return ug.exports;Zy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),ug.exports=tE(),ug.exports}var iE=eE(),_u={},jy;function nE(){if(jy)return _u;jy=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.parse=f,_u.serialize=p;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function f(w,T){const b=new u,O=w.length;if(O<2)return b;const D=(T==null?void 0:T.decode)||v;let P=0;do{const k=w.indexOf("=",P);if(k===-1)break;const z=w.indexOf(";",P),j=z===-1?O:z;if(k>j){P=w.lastIndexOf(";",k-1)+1;continue}const X=d(w,P,k),$=g(w,k,X),it=w.slice(X,$);if(b[it]===void 0){let rt=d(w,k+1,j),dt=g(w,j,rt);const pt=D(w.slice(rt,dt));b[it]=pt}P=j+1}while(P<O);return b}function d(w,T,b){do{const O=w.charCodeAt(T);if(O!==32&&O!==9)return T}while(++T<b);return b}function g(w,T,b){for(;T>b;){const O=w.charCodeAt(--T);if(O!==32&&O!==9)return T+1}return b}function p(w,T,b){const O=(b==null?void 0:b.encode)||encodeURIComponent;if(!a.test(w))throw new TypeError(`argument name is invalid: ${w}`);const D=O(T);if(!t.test(D))throw new TypeError(`argument val is invalid: ${T}`);let P=w+"="+D;if(!b)return P;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);P+="; Max-Age="+b.maxAge}if(b.domain){if(!i.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);P+="; Domain="+b.domain}if(b.path){if(!s.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);P+="; Path="+b.path}if(b.expires){if(!E(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);P+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(P+="; HttpOnly"),b.secure&&(P+="; Secure"),b.partitioned&&(P+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":P+="; Priority=Low";break;case"medium":P+="; Priority=Medium";break;case"high":P+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":P+="; SameSite=Strict";break;case"lax":P+="; SameSite=Lax";break;case"none":P+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return P}function v(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function E(w){return o.call(w)==="[object Date]"}return _u}nE();var Uy="popstate";function sE(a={}){function t(s,o){let{pathname:u,search:f,hash:d}=s.location;return zg("",{pathname:u,search:f,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(s,o){return typeof o=="string"?o:Mu(o)}return aE(t,i,null,a)}function ke(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function hs(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rE(){return Math.random().toString(36).substring(2,10)}function Hy(a,t){return{usr:a.state,key:a.key,idx:t}}function zg(a,t,i=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?ul(t):t,state:i,key:t&&t.key||s||rE()}}function Mu({pathname:a="/",search:t="",hash:i=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(a+=i.charAt(0)==="#"?i:"#"+i),a}function ul(a){let t={};if(a){let i=a.indexOf("#");i>=0&&(t.hash=a.substring(i),a=a.substring(0,i));let s=a.indexOf("?");s>=0&&(t.search=a.substring(s),a=a.substring(0,s)),a&&(t.pathname=a)}return t}function aE(a,t,i,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,d="POP",g=null,p=v();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function v(){return(f.state||{idx:null}).idx}function E(){d="POP";let D=v(),P=D==null?null:D-p;p=D,g&&g({action:d,location:O.location,delta:P})}function w(D,P){d="PUSH";let k=zg(O.location,D,P);p=v()+1;let z=Hy(k,p),j=O.createHref(k);try{f.pushState(z,"",j)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;o.location.assign(j)}u&&g&&g({action:d,location:O.location,delta:1})}function T(D,P){d="REPLACE";let k=zg(O.location,D,P);p=v();let z=Hy(k,p),j=O.createHref(k);f.replaceState(z,"",j),u&&g&&g({action:d,location:O.location,delta:0})}function b(D){let P=o.location.origin!=="null"?o.location.origin:o.location.href,k=typeof D=="string"?D:Mu(D);return k=k.replace(/ $/,"%20"),ke(P,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,P)}let O={get action(){return d},get location(){return a(o,f)},listen(D){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Uy,E),g=D,()=>{o.removeEventListener(Uy,E),g=null}},createHref(D){return t(o,D)},createURL:b,encodeLocation(D){let P=b(D);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:w,replace:T,go(D){return f.go(D)}};return O}function Kv(a,t,i="/"){return oE(a,t,i,!1)}function oE(a,t,i,s){let o=typeof t=="string"?ul(t):t,u=Ws(o.pathname||"/",i);if(u==null)return null;let f=Wv(a);lE(f);let d=null;for(let g=0;d==null&&g<f.length;++g){let p=vE(u);d=pE(f[g],p,s)}return d}function Wv(a,t=[],i=[],s=""){let o=(u,f,d)=>{let g={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};g.relativePath.startsWith("/")&&(ke(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let p=qs([s,g.relativePath]),v=i.concat(g);u.children&&u.children.length>0&&(ke(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Wv(u.children,t,v,p)),!(u.path==null&&!u.index)&&t.push({path:p,score:mE(p,u.index),routesMeta:v})};return a.forEach((u,f)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))o(u,f);else for(let g of Qv(u.path))o(u,f,g)}),t}function Qv(a){let t=a.split("/");if(t.length===0)return[];let[i,...s]=t,o=i.endsWith("?"),u=i.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=Qv(s.join("/")),d=[];return d.push(...f.map(g=>g===""?u:[u,g].join("/"))),o&&d.push(...f),d.map(g=>a.startsWith("/")&&g===""?"/":g)}function lE(a){a.sort((t,i)=>t.score!==i.score?i.score-t.score:_E(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var uE=/^:[\w-]+$/,cE=3,hE=2,fE=1,dE=10,gE=-2,Yy=a=>a==="*";function mE(a,t){let i=a.split("/"),s=i.length;return i.some(Yy)&&(s+=gE),t&&(s+=hE),i.filter(o=>!Yy(o)).reduce((o,u)=>o+(uE.test(u)?cE:u===""?fE:dE),s)}function _E(a,t){return a.length===t.length&&a.slice(0,-1).every((s,o)=>s===t[o])?a[a.length-1]-t[t.length-1]:0}function pE(a,t,i=!1){let{routesMeta:s}=a,o={},u="/",f=[];for(let d=0;d<s.length;++d){let g=s[d],p=d===s.length-1,v=u==="/"?t:t.slice(u.length)||"/",E=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},v),w=g.route;if(!E&&p&&i&&!s[s.length-1].route.index&&(E=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),f.push({params:o,pathname:qs([u,E.pathname]),pathnameBase:wE(qs([u,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(u=qs([u,E.pathnameBase]))}return f}function Ih(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[i,s]=yE(a.path,a.caseSensitive,a.end),o=t.match(i);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((p,{paramName:v,isOptional:E},w)=>{if(v==="*"){let b=d[w]||"";f=u.slice(0,u.length-b.length).replace(/(.)\/+$/,"$1")}const T=d[w];return E&&!T?p[v]=void 0:p[v]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:f,pattern:a}}function yE(a,t=!1,i=!0){hs(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,d,g)=>(s.push({paramName:d,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(s.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),s]}function vE(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hs(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function Ws(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=a.charAt(i);return s&&s!=="/"?null:a.slice(i)||"/"}function xE(a,t="/"){let{pathname:i,search:s="",hash:o=""}=typeof a=="string"?ul(a):a;return{pathname:i?i.startsWith("/")?i:EE(i,t):t,search:CE(s),hash:TE(o)}}function EE(a,t){let i=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function dg(a,t,i,s){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SE(a){return a.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Jv(a){let t=SE(a);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function $v(a,t,i,s=!1){let o;typeof a=="string"?o=ul(a):(o={...a},ke(!o.pathname||!o.pathname.includes("?"),dg("?","pathname","search",o)),ke(!o.pathname||!o.pathname.includes("#"),dg("#","pathname","hash",o)),ke(!o.search||!o.search.includes("#"),dg("#","search","hash",o)));let u=a===""||o.pathname==="",f=u?"/":o.pathname,d;if(f==null)d=i;else{let E=t.length-1;if(!s&&f.startsWith("..")){let w=f.split("/");for(;w[0]==="..";)w.shift(),E-=1;o.pathname=w.join("/")}d=E>=0?t[E]:"/"}let g=xE(o,d),p=f&&f!=="/"&&f.endsWith("/"),v=(u||f===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(p||v)&&(g.pathname+="/"),g}var qs=a=>a.join("/").replace(/\/\/+/g,"/"),wE=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),CE=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,TE=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function bE(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var t0=["POST","PUT","PATCH","DELETE"];new Set(t0);var RE=["GET",...t0];new Set(RE);var cl=Z.createContext(null);cl.displayName="DataRouter";var Jh=Z.createContext(null);Jh.displayName="DataRouterState";var e0=Z.createContext({isTransitioning:!1});e0.displayName="ViewTransition";var LE=Z.createContext(new Map);LE.displayName="Fetchers";var ME=Z.createContext(null);ME.displayName="Await";var ds=Z.createContext(null);ds.displayName="Navigation";var Uu=Z.createContext(null);Uu.displayName="Location";var Js=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Js.displayName="Route";var im=Z.createContext(null);im.displayName="RouteError";function AE(a,{relative:t}={}){ke(Hu(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=Z.useContext(ds),{hash:o,pathname:u,search:f}=Yu(a,{relative:t}),d=u;return i!=="/"&&(d=u==="/"?i:qs([i,u])),s.createHref({pathname:d,search:f,hash:o})}function Hu(){return Z.useContext(Uu)!=null}function $s(){return ke(Hu(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Uu).location}var i0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n0(a){Z.useContext(ds).static||Z.useLayoutEffect(a)}function hl(){let{isDataRoute:a}=Z.useContext(Js);return a?UE():OE()}function OE(){ke(Hu(),"useNavigate() may be used only in the context of a <Router> component.");let a=Z.useContext(cl),{basename:t,navigator:i}=Z.useContext(ds),{matches:s}=Z.useContext(Js),{pathname:o}=$s(),u=JSON.stringify(Jv(s)),f=Z.useRef(!1);return n0(()=>{f.current=!0}),Z.useCallback((g,p={})=>{if(hs(f.current,i0),!f.current)return;if(typeof g=="number"){i.go(g);return}let v=$v(g,JSON.parse(u),o,p.relative==="path");a==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:qs([t,v.pathname])),(p.replace?i.replace:i.push)(v,p.state,p)},[t,i,u,o,a])}Z.createContext(null);function Yu(a,{relative:t}={}){let{matches:i}=Z.useContext(Js),{pathname:s}=$s(),o=JSON.stringify(Jv(i));return Z.useMemo(()=>$v(a,JSON.parse(o),s,t==="path"),[a,o,s,t])}function DE(a,t){return s0(a,t)}function s0(a,t,i,s){var k;ke(Hu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=Z.useContext(ds),{matches:f}=Z.useContext(Js),d=f[f.length-1],g=d?d.params:{},p=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let z=E&&E.path||"";r0(p,!E||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let w=$s(),T;if(t){let z=typeof t=="string"?ul(t):t;ke(v==="/"||((k=z.pathname)==null?void 0:k.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=w;let b=T.pathname||"/",O=b;if(v!=="/"){let z=v.replace(/^\//,"").split("/");O="/"+b.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=!u&&i&&i.matches&&i.matches.length>0?i.matches:Kv(a,{pathname:O});hs(E||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),hs(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=kE(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},g,z.params),pathname:qs([v,o.encodeLocation?o.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?v:qs([v,o.encodeLocation?o.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),f,i,s);return t&&P?Z.createElement(Uu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},P):P}function PE(){let a=jE(),t=bE(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),i=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",a),f=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:u},"ErrorBoundary")," or"," ",Z.createElement("code",{style:u},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),i?Z.createElement("pre",{style:o},i):null,f)}var zE=Z.createElement(PE,null),NE=class extends Z.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){console.error("React Router caught the following error during render",a,t)}render(){return this.state.error!==void 0?Z.createElement(Js.Provider,{value:this.props.routeContext},Z.createElement(im.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IE({routeContext:a,match:t,children:i}){let s=Z.useContext(cl);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(Js.Provider,{value:a},i)}function kE(a,t=[],i=null,s=null){if(a==null){if(!i)return null;if(i.errors)a=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)a=i.matches;else return null}let o=a,u=i==null?void 0:i.errors;if(u!=null){let g=o.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);ke(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let f=!1,d=-1;if(i)for(let g=0;g<o.length;g++){let p=o[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=g),p.route.id){let{loaderData:v,errors:E}=i,w=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||w){f=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((g,p,v)=>{let E,w=!1,T=null,b=null;i&&(E=u&&p.route.id?u[p.route.id]:void 0,T=p.route.errorElement||zE,f&&(d<0&&v===0?(r0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,b=null):d===v&&(w=!0,b=p.route.hydrateFallbackElement||null)));let O=t.concat(o.slice(0,v+1)),D=()=>{let P;return E?P=T:w?P=b:p.route.Component?P=Z.createElement(p.route.Component,null):p.route.element?P=p.route.element:P=g,Z.createElement(IE,{match:p,routeContext:{outlet:g,matches:O,isDataRoute:i!=null},children:P})};return i&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?Z.createElement(NE,{location:i.location,revalidation:i.revalidation,component:T,error:E,children:D(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):D()},null)}function nm(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FE(a){let t=Z.useContext(cl);return ke(t,nm(a)),t}function GE(a){let t=Z.useContext(Jh);return ke(t,nm(a)),t}function BE(a){let t=Z.useContext(Js);return ke(t,nm(a)),t}function sm(a){let t=BE(a),i=t.matches[t.matches.length-1];return ke(i.route.id,`${a} can only be used on routes that contain a unique "id"`),i.route.id}function ZE(){return sm("useRouteId")}function jE(){var s;let a=Z.useContext(im),t=GE("useRouteError"),i=sm("useRouteError");return a!==void 0?a:(s=t.errors)==null?void 0:s[i]}function UE(){let{router:a}=FE("useNavigate"),t=sm("useNavigate"),i=Z.useRef(!1);return n0(()=>{i.current=!0}),Z.useCallback(async(o,u={})=>{hs(i.current,i0),i.current&&(typeof o=="number"?a.navigate(o):await a.navigate(o,{fromRouteId:t,...u}))},[a,t])}var Xy={};function r0(a,t,i){!t&&!Xy[a]&&(Xy[a]=!0,hs(!1,i))}Z.memo(HE);function HE({routes:a,future:t,state:i}){return s0(a,void 0,i,t)}function Kr(a){ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YE({basename:a="/",children:t=null,location:i,navigationType:s="POP",navigator:o,static:u=!1}){ke(!Hu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=a.replace(/^\/*/,"/"),d=Z.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof i=="string"&&(i=ul(i));let{pathname:g="/",search:p="",hash:v="",state:E=null,key:w="default"}=i,T=Z.useMemo(()=>{let b=Ws(g,f);return b==null?null:{location:{pathname:b,search:p,hash:v,state:E,key:w},navigationType:s}},[f,g,p,v,E,w,s]);return hs(T!=null,`<Router basename="${f}"> is not able to match the URL "${g}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:Z.createElement(ds.Provider,{value:d},Z.createElement(Uu.Provider,{children:t,value:T}))}function XE({children:a,location:t}){return DE(Ng(a),t)}function Ng(a,t=[]){let i=[];return Z.Children.forEach(a,(s,o)=>{if(!Z.isValidElement(s))return;let u=[...t,o];if(s.type===Z.Fragment){i.push.apply(i,Ng(s.props.children,u));return}ke(s.type===Kr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ke(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Ng(s.props.children,u)),i.push(f)}),i}var Ph="get",zh="application/x-www-form-urlencoded";function $h(a){return a!=null&&typeof a.tagName=="string"}function VE(a){return $h(a)&&a.tagName.toLowerCase()==="button"}function qE(a){return $h(a)&&a.tagName.toLowerCase()==="form"}function KE(a){return $h(a)&&a.tagName.toLowerCase()==="input"}function WE(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function QE(a,t){return a.button===0&&(!t||t==="_self")&&!WE(a)}var ph=null;function JE(){if(ph===null)try{new FormData(document.createElement("form"),0),ph=!1}catch{ph=!0}return ph}var $E=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gg(a){return a!=null&&!$E.has(a)?(hs(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zh}"`),null):a}function tS(a,t){let i,s,o,u,f;if(qE(a)){let d=a.getAttribute("action");s=d?Ws(d,t):null,i=a.getAttribute("method")||Ph,o=gg(a.getAttribute("enctype"))||zh,u=new FormData(a)}else if(VE(a)||KE(a)&&(a.type==="submit"||a.type==="image")){let d=a.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=a.getAttribute("formaction")||d.getAttribute("action");if(s=g?Ws(g,t):null,i=a.getAttribute("formmethod")||d.getAttribute("method")||Ph,o=gg(a.getAttribute("formenctype"))||gg(d.getAttribute("enctype"))||zh,u=new FormData(d,a),!JE()){let{name:p,type:v,value:E}=a;if(v==="image"){let w=p?`${p}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else p&&u.append(p,E)}}else{if($h(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Ph,s=null,o=zh,f=a}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:i.toLowerCase(),encType:o,formData:u,body:f}}function rm(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}async function eS(a,t){if(a.id in t)return t[a.id];try{let i=await import(a.module);return t[a.id]=i,i}catch(i){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iS(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function nS(a,t,i){let s=await Promise.all(a.map(async o=>{let u=t.routes[o.route.id];if(u){let f=await eS(u,i);return f.links?f.links():[]}return[]}));return oS(s.flat(1).filter(iS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Vy(a,t,i,s,o,u){let f=(g,p)=>i[p]?g.route.id!==i[p].route.id:!0,d=(g,p)=>{var v;return i[p].pathname!==g.pathname||((v=i[p].route.path)==null?void 0:v.endsWith("*"))&&i[p].params["*"]!==g.params["*"]};return u==="assets"?t.filter((g,p)=>f(g,p)||d(g,p)):u==="data"?t.filter((g,p)=>{var E;let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(f(g,p)||d(g,p))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=i[0])==null?void 0:E.params)||{},nextUrl:new URL(a,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function sS(a,t,{includeHydrateFallback:i}={}){return rS(a.map(s=>{let o=t.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function rS(a){return[...new Set(a)]}function aS(a){let t={},i=Object.keys(a).sort();for(let s of i)t[s]=a[s];return t}function oS(a,t){let i=new Set;return new Set(t),a.reduce((s,o)=>{let u=JSON.stringify(aS(o));return i.has(u)||(i.add(u),s.push({key:u,link:o})),s},[])}var lS=new Set([100,101,204,205]);function uS(a,t){let i=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return i.pathname==="/"?i.pathname="_root.data":t&&Ws(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function a0(){let a=Z.useContext(cl);return rm(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function cS(){let a=Z.useContext(Jh);return rm(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var am=Z.createContext(void 0);am.displayName="FrameworkContext";function o0(){let a=Z.useContext(am);return rm(a,"You must render this element inside a <HydratedRouter> element"),a}function hS(a,t){let i=Z.useContext(am),[s,o]=Z.useState(!1),[u,f]=Z.useState(!1),{onFocus:d,onBlur:g,onMouseEnter:p,onMouseLeave:v,onTouchStart:E}=t,w=Z.useRef(null);Z.useEffect(()=>{if(a==="render"&&f(!0),a==="viewport"){let O=P=>{P.forEach(k=>{f(k.isIntersecting)})},D=new IntersectionObserver(O,{threshold:.5});return w.current&&D.observe(w.current),()=>{D.disconnect()}}},[a]),Z.useEffect(()=>{if(s){let O=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(O)}}},[s]);let T=()=>{o(!0)},b=()=>{o(!1),f(!1)};return i?a!=="intent"?[u,w,{}]:[u,w,{onFocus:pu(d,T),onBlur:pu(g,b),onMouseEnter:pu(p,T),onMouseLeave:pu(v,b),onTouchStart:pu(E,T)}]:[!1,w,{}]}function pu(a,t){return i=>{a&&a(i),i.defaultPrevented||t(i)}}function fS({page:a,...t}){let{router:i}=a0(),s=Z.useMemo(()=>Kv(i.routes,a,i.basename),[i.routes,a,i.basename]);return s?Z.createElement(gS,{page:a,matches:s,...t}):null}function dS(a){let{manifest:t,routeModules:i}=o0(),[s,o]=Z.useState([]);return Z.useEffect(()=>{let u=!1;return nS(a,t,i).then(f=>{u||o(f)}),()=>{u=!0}},[a,t,i]),s}function gS({page:a,matches:t,...i}){let s=$s(),{manifest:o,routeModules:u}=o0(),{basename:f}=a0(),{loaderData:d,matches:g}=cS(),p=Z.useMemo(()=>Vy(a,t,g,o,s,"data"),[a,t,g,o,s]),v=Z.useMemo(()=>Vy(a,t,g,o,s,"assets"),[a,t,g,o,s]),E=Z.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let b=new Set,O=!1;if(t.forEach(P=>{var z;let k=o.routes[P.route.id];!k||!k.hasLoader||(!p.some(j=>j.route.id===P.route.id)&&P.route.id in d&&((z=u[P.route.id])!=null&&z.shouldRevalidate)||k.hasClientLoader?O=!0:b.add(P.route.id))}),b.size===0)return[];let D=uS(a,f);return O&&b.size>0&&D.searchParams.set("_routes",t.filter(P=>b.has(P.route.id)).map(P=>P.route.id).join(",")),[D.pathname+D.search]},[f,d,s,o,p,t,a,u]),w=Z.useMemo(()=>sS(v,o),[v,o]),T=dS(v);return Z.createElement(Z.Fragment,null,E.map(b=>Z.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...i})),w.map(b=>Z.createElement("link",{key:b,rel:"modulepreload",href:b,...i})),T.map(({key:b,link:O})=>Z.createElement("link",{key:b,...O})))}function mS(...a){return t=>{a.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var l0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l0&&(window.__reactRouterVersion="7.5.2")}catch{}function _S({basename:a,children:t,window:i}){let s=Z.useRef();s.current==null&&(s.current=sE({window:i,v5Compat:!0}));let o=s.current,[u,f]=Z.useState({action:o.action,location:o.location}),d=Z.useCallback(g=>{Z.startTransition(()=>f(g))},[f]);return Z.useLayoutEffect(()=>o.listen(d),[o,d]),Z.createElement(YE,{basename:a,children:t,location:u.location,navigationType:u.action,navigator:o})}var u0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c0=Z.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:d,target:g,to:p,preventScrollReset:v,viewTransition:E,...w},T){let{basename:b}=Z.useContext(ds),O=typeof p=="string"&&u0.test(p),D,P=!1;if(typeof p=="string"&&O&&(D=p,l0))try{let dt=new URL(window.location.href),pt=p.startsWith("//")?new URL(dt.protocol+p):new URL(p),_t=Ws(pt.pathname,b);pt.origin===dt.origin&&_t!=null?p=_t+pt.search+pt.hash:P=!0}catch{hs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=AE(p,{relative:o}),[z,j,X]=hS(s,w),$=xS(p,{replace:f,state:d,target:g,preventScrollReset:v,relative:o,viewTransition:E});function it(dt){t&&t(dt),dt.defaultPrevented||$(dt)}let rt=Z.createElement("a",{...w,...X,href:D||k,onClick:P||u?t:it,ref:mS(T,j),target:g,"data-discover":!O&&i==="render"?"true":void 0});return z&&!O?Z.createElement(Z.Fragment,null,rt,Z.createElement(fS,{page:k})):rt});c0.displayName="Link";var pS=Z.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:d,children:g,...p},v){let E=Yu(f,{relative:p.relative}),w=$s(),T=Z.useContext(Jh),{navigator:b,basename:O}=Z.useContext(ds),D=T!=null&&TS(E)&&d===!0,P=b.encodeLocation?b.encodeLocation(E).pathname:E.pathname,k=w.pathname,z=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;i||(k=k.toLowerCase(),z=z?z.toLowerCase():null,P=P.toLowerCase()),z&&O&&(z=Ws(z,O)||z);const j=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let X=k===P||!o&&k.startsWith(P)&&k.charAt(j)==="/",$=z!=null&&(z===P||!o&&z.startsWith(P)&&z.charAt(P.length)==="/"),it={isActive:X,isPending:$,isTransitioning:D},rt=X?t:void 0,dt;typeof s=="function"?dt=s(it):dt=[s,X?"active":null,$?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let pt=typeof u=="function"?u(it):u;return Z.createElement(c0,{...p,"aria-current":rt,className:dt,ref:v,style:pt,to:f,viewTransition:d},typeof g=="function"?g(it):g)});pS.displayName="NavLink";var yS=Z.forwardRef(({discover:a="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:o,state:u,method:f=Ph,action:d,onSubmit:g,relative:p,preventScrollReset:v,viewTransition:E,...w},T)=>{let b=wS(),O=CS(d,{relative:p}),D=f.toLowerCase()==="get"?"get":"post",P=typeof d=="string"&&u0.test(d),k=z=>{if(g&&g(z),z.defaultPrevented)return;z.preventDefault();let j=z.nativeEvent.submitter,X=(j==null?void 0:j.getAttribute("formmethod"))||f;b(j||z.currentTarget,{fetcherKey:t,method:X,navigate:i,replace:o,state:u,relative:p,preventScrollReset:v,viewTransition:E})};return Z.createElement("form",{ref:T,method:D,action:O,onSubmit:s?g:k,...w,"data-discover":!P&&a==="render"?"true":void 0})});yS.displayName="Form";function vS(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h0(a){let t=Z.useContext(cl);return ke(t,vS(a)),t}function xS(a,{target:t,replace:i,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let d=hl(),g=$s(),p=Yu(a,{relative:u});return Z.useCallback(v=>{if(QE(v,t)){v.preventDefault();let E=i!==void 0?i:Mu(g)===Mu(p);d(a,{replace:E,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[g,d,p,i,s,t,a,o,u,f])}var ES=0,SS=()=>`__${String(++ES)}__`;function wS(){let{router:a}=h0("useSubmit"),{basename:t}=Z.useContext(ds),i=ZE();return Z.useCallback(async(s,o={})=>{let{action:u,method:f,encType:d,formData:g,body:p}=tS(s,t);if(o.navigate===!1){let v=o.fetcherKey||SS();await a.fetch(v,i,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||d,flushSync:o.flushSync})}else await a.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||f,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[a,t,i])}function CS(a,{relative:t}={}){let{basename:i}=Z.useContext(ds),s=Z.useContext(Js);ke(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Yu(a||".",{relative:t})},f=$s();if(a==null){u.search=f.search;let d=new URLSearchParams(u.search),g=d.getAll("index");if(g.some(v=>v==="")){d.delete("index"),g.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();u.search=v?`?${v}`:""}}return(!a||a===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:qs([i,u.pathname])),Mu(u)}function TS(a,t={}){let i=Z.useContext(e0);ke(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=h0("useViewTransitionState"),o=Yu(a,{relative:t.relative});if(!i.isTransitioning)return!1;let u=Ws(i.currentLocation.pathname,s)||i.currentLocation.pathname,f=Ws(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Ih(o.pathname,f)!=null||Ih(o.pathname,u)!=null}new TextEncoder;[...lS];/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RS=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,s)=>s?s.toUpperCase():i.toLowerCase()),qy=a=>{const t=RS(a);return t.charAt(0).toUpperCase()+t.slice(1)},f0=(...a)=>a.filter((t,i,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===i).join(" ").trim(),LS=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=Z.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:f,...d},g)=>Z.createElement("svg",{ref:g,...MS,width:t,height:t,stroke:a,strokeWidth:s?Number(i)*24/Number(t):i,className:f0("lucide",o),...!u&&!LS(d)&&{"aria-hidden":"true"},...d},[...f.map(([p,v])=>Z.createElement(p,v)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(a,t)=>{const i=Z.forwardRef(({className:s,...o},u)=>Z.createElement(AS,{ref:u,iconNode:t,className:f0(`lucide-${bS(qy(a))}`,`lucide-${a}`,s),...o}));return i.displayName=qy(a),i};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],DS=We("bell",OS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zS=We("check",PS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],d0=We("chevron-down",NS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],g0=We("circle-x",IS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M4 3 2 5v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"1n2rgs"}],["path",{d:"M6 8h4",key:"utf9t1"}],["path",{d:"M6 18h4",key:"12yh4b"}],["path",{d:"m12 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"3ha7mj"}],["path",{d:"M14 8h4",key:"1r8wg2"}],["path",{d:"M14 18h4",key:"1t3kbu"}],["path",{d:"m20 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"dfd4e2"}]],FS=We("fence",kS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],BS=We("house",GS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jS=We("layers",ZS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],HS=We("locate-fixed",US);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],XS=We("map-pin-minus-inside",YS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],qS=We("map-pin-plus-inside",VS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M19.914 11.105A7.298 7.298 0 0 0 20 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 32 32 0 0 0 .824-.738",key:"fcdtly"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M16 18h6",key:"987eiv"}],["path",{d:"M19 15v6",key:"10aioa"}]],WS=We("map-pin-plus",KS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M19.752 11.901A7.78 7.78 0 0 0 20 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 19 19 0 0 0 .09-.077",key:"y0ewhp"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"m21.5 15.5-5 5",key:"11iqnx"}],["path",{d:"m21.5 20.5-5-5",key:"1bylgx"}]],JS=We("map-pin-x",QS);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],om=We("map-pin",$S);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],ew=We("menu",tw);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]],nw=We("paw-print",iw);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],rw=We("ruler",sw);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lm=We("save",aw);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z",key:"xwnzip"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}]],lw=We("spline-pointer",ow);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],cw=We("undo",uw);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],m0=We("x",hw);function fw({menuOpen:a,setMenuOpen:t}){$s();const i=hl(),[s,o]=Z.useState({width:window.innerWidth,height:window.innerHeight}),u=d=>{t(!1),setTimeout(()=>{i(d,{replace:!0})},100)},f=d=>{d.stopPropagation()};return Z.useEffect(()=>{const d=()=>{o({width:window.innerWidth,height:window.innerHeight})},g=p=>{p.key==="Escape"&&t(!1)};return window.addEventListener("resize",d),document.addEventListener("keydown",g),()=>{window.removeEventListener("resize",d),document.removeEventListener("keydown",g)}},[t]),K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"absolute top-4 right-4 z-40 flex items-center gap-2",children:K.jsx("button",{onClick:()=>t(!0),className:"bg-white rounded-full p-3 shadow-md",children:K.jsx(ew,{className:"w-6 h-6 text-gray-800"})})}),a&&K.jsxs("div",{className:"fixed inset-0 bg-white/60 backdrop-blur-md z-50 transition-all duration-300 ease-in-out animate-slide-in-left",onClick:()=>t(!1),children:[K.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-6 text-lg text-gray-700 hover:text-red-600",children:""}),K.jsx("div",{className:"h-full w-full flex flex-col items-center justify-center px-4 text-center div-menu-button",onClick:f,children:[["Collares","/collares"],["Parcelas","/parcelas"],["Mapa","/mapa"],["Alertas","/alertas"],["Animales","/animales"]].map(([d,g])=>K.jsx("button",{onClick:()=>u(g),className:`w-full text-gray-800 font-semibold hover:text-green-600 transition-all\r
                                    text-xl sm:text-2xl md:text-3xl lg:text-4xl menu-button`,children:d},g))})]},s.width)]})}function dw(){const[a,t]=Z.useState(!1);return{menuOpen:a,setMenuOpen:t}}function yu({label:a,icon:t,path:i,current:s,navigate:o,full:u=!1,onClick:f}){const d=()=>{o(i),f&&f()};return K.jsxs("button",{onClick:d,className:`h-full w-full flex flex-col items-center justify-center flex-1 py-1
                        ${s===i?"text-green-600 font-semibold":"text-gray-700"}
                        transition-all`,children:[K.jsx("span",{className:"text-lg",children:t}),K.jsx("span",{className:"text-[10px] min-[400px]:block hidden leading-none",children:a})]})}function gw({setMenuOpen:a}){const t=$s(),i=hl(),s=o=>{a(!1),setTimeout(()=>{i(o,{replace:!0})},100)};return K.jsxs("div",{className:"fixed bottom-0 left-0 right-0 h-16 z-50 bg-white border-t flex justify-around items-center",children:[K.jsx(yu,{label:"Campos",icon:K.jsx(FS,{}),path:"/campos",current:t.pathname,navigate:s}),K.jsx(yu,{label:"Parcelas",icon:K.jsx(rw,{}),path:"/parcelas",current:t.pathname,navigate:s}),K.jsx(yu,{label:"Mapa",icon:K.jsx(om,{}),path:"/mapa",current:t.pathname,navigate:s}),K.jsx(yu,{label:"Alertas",icon:K.jsx(DS,{}),path:"/alertas",current:t.pathname,navigate:s}),K.jsx(yu,{label:"Animales",icon:K.jsx(nw,{}),path:"/animales",current:t.pathname,navigate:s})]})}function _0({onFinish:a,onUndo:t,onStart:i,onCancel:s,canFinish:o,closedBySnap:u,firstVertexDraw:f,open:d,setOpen:g,finished:p}){const v=()=>{const E=!d;g(E),E&&(i==null||i())};return K.jsxs(K.Fragment,{children:[!d&&K.jsx("button",{onClick:v,className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center",title:"Dibujar polgono",children:K.jsx(lw,{className:"w-6 h-6 text-gray-800"})}),d&&K.jsxs("div",{className:"flex flex-row-reverse gap-1 items-center",children:[K.jsx("button",{onClick:s,className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center",title:"Cancelar",children:K.jsx(m0,{className:"w-6 h-6"})}),!p&&K.jsxs(K.Fragment,{children:[K.jsx("button",{onClick:t,disabled:!f,className:`p-3 rounded-full shadow-md flex items-center justify-center 
                                    ${f?"bg-white text-black":"bg-gray-300 text-gray-400 cursor-not-allowed"}`,title:"Deshacer ltimo punto",children:K.jsx(cw,{className:"w-6 h-6"})}),K.jsx("button",{onClick:a,disabled:!(o||u),className:`p-3 rounded-full shadow-md flex items-center justify-center 
                                    ${o||u?"bg-white text-black":"bg-gray-300 text-gray-400 cursor-not-allowed"}`,title:"Finalizar dibujo",children:K.jsx(zS,{className:"w-6 h-6"})})]})]})]})}const gn={modeRef:{current:null},onFinishCallback:{current:null}};function mw(){const[a,t]=Z.useState(null),[i,s]=Z.useState(0),[o,u]=Z.useState("Click para colocar el primer vrtice");return{polygonMode:a,setMode:g=>{gn.modeRef.current=g,t(g)},resetPolygonState:()=>{gn.modeRef.current=null,gn.onFinishCallback.current=null,t(null),s(0),u("Click para colocar el primer vrtice")},area:i,setArea:s,tooltipText:o,setTooltipText:u}}const _w={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class p0 extends Error{constructor(t){const i=_w[t];super(i),this.code=t,this.name="AssertionError",this.message=i}}class Xn{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const nl={PROPERTYCHANGE:"propertychange"};class um{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function pw(a,t,i){let s,o;i=i||Xa;let u=0,f=a.length,d=!1;for(;u<f;)s=u+(f-u>>1),o=+i(a[s],t),o<0?u=s+1:(f=s,d=!o);return d?u:~u}function Xa(a,t){return a>t?1:a<t?-1:0}function cm(a,t,i){const s=a.length;if(a[0]<=t)return 0;if(t<=a[s-1])return s-1;let o;if(i>0){for(o=1;o<s;++o)if(a[o]<t)return o-1}else if(i<0){for(o=1;o<s;++o)if(a[o]<=t)return o}else for(o=1;o<s;++o){if(a[o]==t)return o;if(a[o]<t)return typeof i=="function"?i(t,a[o-1],a[o])>0?o-1:o:a[o-1]-t<t-a[o]?o-1:o}return s-1}function yw(a,t,i){for(;t<i;){const s=a[t];a[t]=a[i],a[i]=s,++t,--i}}function Hn(a,t){const i=Array.isArray(t)?t:[t],s=i.length;for(let o=0;o<s;o++)a[a.length]=i[o]}function tr(a,t){const i=a.length;if(i!==t.length)return!1;for(let s=0;s<i;s++)if(a[s]!==t[s])return!1;return!0}function vw(a,t,i){const s=t||Xa;return a.every(function(o,u){if(u===0)return!0;const f=s(a[u-1],o);return!(f>0||f===0)})}function Va(){return!0}function Xu(){return!1}function sl(){}function xw(a){let t=!1,i,s,o;return function(){const u=Array.prototype.slice.call(arguments);return(!t||this!==o||!tr(u,s))&&(t=!0,o=this,s=u,i=a.apply(this,arguments)),i}}function fl(a){for(const t in a)delete a[t]}function rl(a){let t;for(t in a)return!1;return!t}class tf extends um{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,i){if(!t||!i)return;const s=this.listeners_||(this.listeners_={}),o=s[t]||(s[t]=[]);o.includes(i)||o.push(i)}dispatchEvent(t){const i=typeof t=="string",s=i?t:t.type,o=this.listeners_&&this.listeners_[s];if(!o)return;const u=i?new Xn(t):t;u.target||(u.target=this.eventTarget_||this);const f=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});s in f||(f[s]=0,d[s]=0),++f[s];let g;for(let p=0,v=o.length;p<v;++p)if("handleEvent"in o[p]?g=o[p].handleEvent(u):g=o[p].call(this,u),g===!1||u.propagationStopped){g=!1;break}if(--f[s]===0){let p=d[s];for(delete d[s];p--;)this.removeEventListener(s,sl);delete f[s]}return g}disposeInternal(){this.listeners_&&fl(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,i){const s=this.listeners_&&this.listeners_[t];if(s){const o=s.indexOf(i);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(s[o]=sl,++this.pendingRemovals_[t]):(s.splice(o,1),s.length===0&&delete this.listeners_[t]))}}}const Gt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ee(a,t,i,s,o){if(s&&s!==a&&(i=i.bind(s)),o){const f=i;i=function(){a.removeEventListener(t,i),f.apply(this,arguments)}}const u={target:a,type:t,listener:i};return a.addEventListener(t,i),u}function kh(a,t,i,s){return ee(a,t,i,s,!0)}function Ee(a){a&&a.target&&(a.target.removeEventListener(a.type,a.listener),fl(a))}class Vu extends tf{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Gt.CHANGE)}getRevision(){return this.revision_}onInternal(t,i){if(Array.isArray(t)){const s=t.length,o=new Array(s);for(let u=0;u<s;++u)o[u]=ee(this,t[u],i);return o}return ee(this,t,i)}onceInternal(t,i){let s;if(Array.isArray(t)){const o=t.length;s=new Array(o);for(let u=0;u<o;++u)s[u]=kh(this,t[u],i)}else s=kh(this,t,i);return i.ol_key=s,s}unInternal(t,i){const s=i.ol_key;if(s)Ew(s);else if(Array.isArray(t))for(let o=0,u=t.length;o<u;++o)this.removeEventListener(t[o],i);else this.removeEventListener(t,i)}}Vu.prototype.on;Vu.prototype.once;Vu.prototype.un;function Ew(a){if(Array.isArray(a))for(let t=0,i=a.length;t<i;++t)Ee(a[t]);else Ee(a)}function It(){throw new Error("Unimplemented abstract method.")}let Sw=0;function Bt(a){return a.ol_uid||(a.ol_uid=String(++Sw))}class Ky extends Xn{constructor(t,i,s){super(t),this.key=i,this.oldValue=s}}class Vn extends Vu{constructor(t){super(),this.on,this.once,this.un,Bt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,i){let s;s=`change:${t}`,this.hasListener(s)&&this.dispatchEvent(new Ky(s,t,i)),s=nl.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new Ky(s,t,i))}addChangeListener(t,i){this.addEventListener(`change:${t}`,i)}removeChangeListener(t,i){this.removeEventListener(`change:${t}`,i)}set(t,i,s){const o=this.values_||(this.values_={});if(s)o[t]=i;else{const u=o[t];o[t]=i,u!==i&&this.notify(t,u)}}setProperties(t,i){for(const s in t)this.set(s,t[s],i)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,i){if(this.values_&&t in this.values_){const s=this.values_[t];delete this.values_[t],rl(this.values_)&&(this.values_=null),i||this.notify(t,s)}}}const qe={ADD:"add",REMOVE:"remove"},Wy={LENGTH:"length"};class yh extends Xn{constructor(t,i,s){super(t),this.element=i,this.index=s}}class _n extends Vn{constructor(t,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(let s=0,o=this.array_.length;s<o;++s)this.assertUnique_(this.array_[s],s);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let i=0,s=t.length;i<s;++i)this.push(t[i]);return this}forEach(t){const i=this.array_;for(let s=0,o=i.length;s<o;++s)t(i[s],s,i)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Wy.LENGTH)}insertAt(t,i){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new yh(qe.ADD,i,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const i=this.getLength();return this.insertAt(i,t),this.getLength()}remove(t){const i=this.array_;for(let s=0,o=i.length;s<o;++s)if(i[s]===t)return this.removeAt(s)}removeAt(t){if(t<0||t>=this.getLength())return;const i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new yh(qe.REMOVE,i,t)),i}setAt(t,i){const s=this.getLength();if(t>=s){this.insertAt(t,i);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i,t);const o=this.array_[t];this.array_[t]=i,this.dispatchEvent(new yh(qe.REMOVE,o,t)),this.dispatchEvent(new yh(qe.ADD,i,t))}updateLength_(){this.set(Wy.LENGTH,this.array_.length)}assertUnique_(t,i){for(let s=0,o=this.array_.length;s<o;++s)if(this.array_[s]===t&&s!==i)throw new p0(58)}}function Vt(a,t){if(!a)throw new p0(t)}class Bi extends Vn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const i=t;this.setGeometry(i)}else{const i=t;this.setProperties(i)}}clone(){const t=new Bi(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const i=this.getGeometry();i&&t.setGeometry(i.clone());const s=this.getStyle();return s&&t.setStyle(s),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ee(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=ee(t,Gt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?ww(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function ww(a){if(typeof a=="function")return a;let t;return Array.isArray(a)?t=a:(Vt(typeof a.getZIndex=="function",41),t=[a]),function(){return t}}const na=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Cw=na.includes("firefox"),Tw=na.includes("safari")&&!na.includes("chrom");Tw&&(na.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(na));const bw=na.includes("webkit")&&!na.includes("edge"),Rw=na.includes("macintosh"),y0=typeof devicePixelRatio<"u"?devicePixelRatio:1,hm=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Lw=typeof Image<"u"&&Image.prototype.decode,v0=function(){let a=!1;try{const t=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return a}();new Array(6);function cs(){return[1,0,0,1,0,0]}function Mw(a,t,i,s,o,u,f){return a[0]=t,a[1]=i,a[2]=s,a[3]=o,a[4]=u,a[5]=f,a}function Aw(a,t){return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a}function mi(a,t){const i=t[0],s=t[1];return t[0]=a[0]*i+a[2]*s+a[4],t[1]=a[1]*i+a[3]*s+a[5],t}function Ow(a,t,i){return Mw(a,t,0,0,i,0,0)}function sa(a,t,i,s,o,u,f,d){const g=Math.sin(u),p=Math.cos(u);return a[0]=s*p,a[1]=o*g,a[2]=-s*g,a[3]=o*p,a[4]=f*s*p-d*s*g+t,a[5]=f*o*g+d*o*p+i,a}function fm(a,t){const i=Dw(t);Vt(i!==0,32);const s=t[0],o=t[1],u=t[2],f=t[3],d=t[4],g=t[5];return a[0]=f/i,a[1]=-o/i,a[2]=-u/i,a[3]=s/i,a[4]=(u*g-f*d)/i,a[5]=-(s*g-o*d)/i,a}function Dw(a){return a[0]*a[3]-a[1]*a[2]}let Qy;function x0(a){const t="matrix("+a.join(", ")+")";if(hm)return t;const i=Qy||(Qy=document.createElement("div"));return i.style.transform=t,i.style.transform}const gi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function jn(a){const t=On();for(let i=0,s=a.length;i<s;++i)Tu(t,a[i]);return t}function ef(a,t,i){return i?(i[0]=a[0]-t,i[1]=a[1]-t,i[2]=a[2]+t,i[3]=a[3]+t,i):[a[0]-t,a[1]-t,a[2]+t,a[3]+t]}function E0(a,t){return t?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t):a.slice()}function Qa(a,t,i){let s,o;return t<a[0]?s=a[0]-t:a[2]<t?s=t-a[2]:s=0,i<a[1]?o=a[1]-i:a[3]<i?o=i-a[3]:o=0,s*s+o*o}function nf(a,t){return dm(a,t[0],t[1])}function Fa(a,t){return a[0]<=t[0]&&t[2]<=a[2]&&a[1]<=t[1]&&t[3]<=a[3]}function dm(a,t,i){return a[0]<=t&&t<=a[2]&&a[1]<=i&&i<=a[3]}function Ig(a,t){const i=a[0],s=a[1],o=a[2],u=a[3],f=t[0],d=t[1];let g=gi.UNKNOWN;return f<i?g=g|gi.LEFT:f>o&&(g=g|gi.RIGHT),d<s?g=g|gi.BELOW:d>u&&(g=g|gi.ABOVE),g===gi.UNKNOWN&&(g=gi.INTERSECTING),g}function On(){return[1/0,1/0,-1/0,-1/0]}function Qs(a,t,i,s,o){return o?(o[0]=a,o[1]=t,o[2]=i,o[3]=s,o):[a,t,i,s]}function qu(a){return Qs(1/0,1/0,-1/0,-1/0,a)}function Nh(a,t){const i=a[0],s=a[1];return Qs(i,s,i,s,t)}function S0(a,t,i,s,o){const u=qu(o);return C0(u,a,t,i,s)}function Au(a,t){return a[0]==t[0]&&a[2]==t[2]&&a[1]==t[1]&&a[3]==t[3]}function w0(a,t){return t[0]<a[0]&&(a[0]=t[0]),t[2]>a[2]&&(a[2]=t[2]),t[1]<a[1]&&(a[1]=t[1]),t[3]>a[3]&&(a[3]=t[3]),a}function Tu(a,t){t[0]<a[0]&&(a[0]=t[0]),t[0]>a[2]&&(a[2]=t[0]),t[1]<a[1]&&(a[1]=t[1]),t[1]>a[3]&&(a[3]=t[1])}function C0(a,t,i,s,o){for(;i<s;i+=o)Pw(a,t[i],t[i+1]);return a}function Pw(a,t,i){a[0]=Math.min(a[0],t),a[1]=Math.min(a[1],i),a[2]=Math.max(a[2],t),a[3]=Math.max(a[3],i)}function T0(a,t){let i;return i=t(sf(a)),i||(i=t(rf(a)),i)||(i=t(af(a)),i)||(i=t(Ja(a)),i)?i:!1}function kg(a){let t=0;return gm(a)||(t=we(a)*fs(a)),t}function sf(a){return[a[0],a[1]]}function rf(a){return[a[2],a[1]]}function qa(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function zw(a,t){let i;return t==="bottom-left"?i=sf(a):t==="bottom-right"?i=rf(a):t==="top-left"?i=Ja(a):t==="top-right"?i=af(a):Vt(!1,13),i}function Fg(a,t,i,s,o){const[u,f,d,g,p,v,E,w]=Gg(a,t,i,s);return Qs(Math.min(u,d,p,E),Math.min(f,g,v,w),Math.max(u,d,p,E),Math.max(f,g,v,w),o)}function Gg(a,t,i,s){const o=t*s[0]/2,u=t*s[1]/2,f=Math.cos(i),d=Math.sin(i),g=o*f,p=o*d,v=u*f,E=u*d,w=a[0],T=a[1];return[w-g+E,T-p-v,w-g-E,T-p+v,w+g-E,T+p+v,w+g+E,T+p-v,w-g+E,T-p-v]}function fs(a){return a[3]-a[1]}function bu(a,t,i){const s=i||On();return Zi(a,t)?(a[0]>t[0]?s[0]=a[0]:s[0]=t[0],a[1]>t[1]?s[1]=a[1]:s[1]=t[1],a[2]<t[2]?s[2]=a[2]:s[2]=t[2],a[3]<t[3]?s[3]=a[3]:s[3]=t[3]):qu(s),s}function Ja(a){return[a[0],a[3]]}function af(a){return[a[2],a[3]]}function we(a){return a[2]-a[0]}function Zi(a,t){return a[0]<=t[2]&&a[2]>=t[0]&&a[1]<=t[3]&&a[3]>=t[1]}function gm(a){return a[2]<a[0]||a[3]<a[1]}function Nw(a,t){return t?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t):a}function Iw(a,t,i){let s=!1;const o=Ig(a,t),u=Ig(a,i);if(o===gi.INTERSECTING||u===gi.INTERSECTING)s=!0;else{const f=a[0],d=a[1],g=a[2],p=a[3],v=t[0],E=t[1],w=i[0],T=i[1],b=(T-E)/(w-v);let O,D;u&gi.ABOVE&&!(o&gi.ABOVE)&&(O=w-(T-p)/b,s=O>=f&&O<=g),!s&&u&gi.RIGHT&&!(o&gi.RIGHT)&&(D=T-(w-g)*b,s=D>=d&&D<=p),!s&&u&gi.BELOW&&!(o&gi.BELOW)&&(O=w-(T-d)/b,s=O>=f&&O<=g),!s&&u&gi.LEFT&&!(o&gi.LEFT)&&(D=T-(w-f)*b,s=D>=d&&D<=p)}return s}function b0(a,t){const i=t.getExtent(),s=qa(a);if(t.canWrapX()&&(s[0]<i[0]||s[0]>=i[2])){const o=we(i),f=Math.floor((s[0]-i[0])/o)*o;a[0]-=f,a[2]-=f}return a}function kw(a,t){if(t.canWrapX()){const i=t.getExtent();if(!isFinite(a[0])||!isFinite(a[2]))return[[i[0],a[1],i[2],a[3]]];b0(a,t);const s=we(i);if(we(a)>s)return[[i[0],a[1],i[2],a[3]]];if(a[0]<i[0])return[[a[0]+s,a[1],i[2],a[3]],[i[0],a[1],a[2],a[3]]];if(a[2]>i[2])return[[a[0],a[1],i[2],a[3]],[i[0],a[1],a[2]-s,a[3]]]}return[a]}const mm={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class R0{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||mm[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Ku=6378137,$o=Math.PI*Ku,Fw=[-$o,-$o,$o,$o],Gw=[-180,-85,180,85],vh=Ku*Math.log(Math.tan(Math.PI/2));class Ho extends R0{constructor(t){super({code:t,units:"m",extent:Fw,global:!0,worldExtent:Gw,getPointResolution:function(i,s){return i/Math.cosh(s[1]/Ku)}})}}const Jy=[new Ho("EPSG:3857"),new Ho("EPSG:102100"),new Ho("EPSG:102113"),new Ho("EPSG:900913"),new Ho("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ho("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Bw(a,t,i){const s=a.length;i=i>1?i:2,t===void 0&&(i>2?t=a.slice():t=new Array(s));for(let o=0;o<s;o+=i){t[o]=$o*a[o]/180;let u=Ku*Math.log(Math.tan(Math.PI*(+a[o+1]+90)/360));u>vh?u=vh:u<-vh&&(u=-vh),t[o+1]=u}return t}function Zw(a,t,i){const s=a.length;i=i>1?i:2,t===void 0&&(i>2?t=a.slice():t=new Array(s));for(let o=0;o<s;o+=i)t[o]=180*a[o]/$o,t[o+1]=360*Math.atan(Math.exp(a[o+1]/Ku))/Math.PI-90;return t}const jw=6378137,$y=[-180,-90,180,90],Uw=Math.PI*jw/180;class za extends R0{constructor(t,i){super({code:t,units:"degrees",extent:$y,axisOrientation:i,global:!0,metersPerUnit:Uw,worldExtent:$y})}}const tv=[new za("CRS:84"),new za("EPSG:4326","neu"),new za("urn:ogc:def:crs:OGC:1.3:CRS84"),new za("urn:ogc:def:crs:OGC:2:84"),new za("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new za("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new za("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Bg={};function Hw(a){return Bg[a]||Bg[a.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Yw(a,t){Bg[a]=t}let tl={};function Fh(a,t,i){const s=a.getCode(),o=t.getCode();s in tl||(tl[s]={}),tl[s][o]=i}function Xw(a,t){let i;return a in tl&&t in tl[a]&&(i=tl[a][t]),i}function Ke(a,t,i){return Math.min(Math.max(a,t),i)}function Vw(a,t,i,s,o,u){const f=o-i,d=u-s;if(f!==0||d!==0){const g=((a-i)*f+(t-s)*d)/(f*f+d*d);g>1?(i=o,s=u):g>0&&(i+=f*g,s+=d*g)}return ja(a,t,i,s)}function ja(a,t,i,s){const o=i-a,u=s-t;return o*o+u*u}function qw(a){const t=a.length;for(let s=0;s<t;s++){let o=s,u=Math.abs(a[s][s]);for(let d=s+1;d<t;d++){const g=Math.abs(a[d][s]);g>u&&(u=g,o=d)}if(u===0)return null;const f=a[o];a[o]=a[s],a[s]=f;for(let d=s+1;d<t;d++){const g=-a[d][s]/a[s][s];for(let p=s;p<t+1;p++)s==p?a[d][p]=0:a[d][p]+=g*a[s][p]}}const i=new Array(t);for(let s=t-1;s>=0;s--){i[s]=a[s][t]/a[s][s];for(let o=s-1;o>=0;o--)a[o][t]-=a[o][s]*i[s]}return i}function Ua(a){return a*Math.PI/180}function Ha(a,t){const i=a%t;return i*t<0?i+t:i}function dn(a,t,i){return a+i*(t-a)}function _m(a,t){const i=Math.pow(10,t);return Math.round(a*i)/i}function xh(a,t){return Math.floor(_m(a,t))}function Eh(a,t){return Math.ceil(_m(a,t))}function Kw(a,t){return a[0]+=+t[0],a[1]+=+t[1],a}function L0(a,t){const i=a[0],s=a[1],o=t[0],u=t[1],f=o[0],d=o[1],g=u[0],p=u[1],v=g-f,E=p-d,w=v===0&&E===0?0:(v*(i-f)+E*(s-d))/(v*v+E*E||0);let T,b;return w<=0?(T=f,b=d):w>=1?(T=g,b=p):(T=f+w*v,b=d+w*E),[T,b]}function Un(a,t){let i=!0;for(let s=a.length-1;s>=0;--s)if(a[s]!=t[s]){i=!1;break}return i}function pm(a,t){const i=Math.cos(t),s=Math.sin(t),o=a[0]*i-a[1]*s,u=a[1]*i+a[0]*s;return a[0]=o,a[1]=u,a}function Ww(a,t){return a[0]*=t,a[1]*=t,a}function Ou(a,t){const i=a[0]-t[0],s=a[1]-t[1];return i*i+s*s}function ev(a,t){return Math.sqrt(Ou(a,t))}function Qw(a,t){return Ou(a,L0(a,t))}function M0(a,t){if(t.canWrapX()){const i=we(t.getExtent()),s=Jw(a,t,i);s&&(a[0]-=s*i)}return a}function Jw(a,t,i){const s=t.getExtent();let o=0;return t.canWrapX()&&(a[0]<s[0]||a[0]>s[2])&&(i=i||we(s),o=Math.floor((a[0]-s[0])/i)),o}const A0=63710088e-1;function iv(a,t,i){i=i||A0;const s=Ua(a[1]),o=Ua(t[1]),u=(o-s)/2,f=Ua(t[0]-a[0])/2,d=Math.sin(u)*Math.sin(u)+Math.sin(f)*Math.sin(f)*Math.cos(s)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}function Sh(a,t){let i=0;const s=a.length;let o=a[s-1][0],u=a[s-1][1];for(let f=0;f<s;f++){const d=a[f][0],g=a[f][1];i+=Ua(d-o)*(2+Math.sin(Ua(u))+Math.sin(Ua(g))),o=d,u=g}return i*t*t/2}function al(a,t){t=t||{};const i=t.radius||A0,s=t.projection||"EPSG:3857",o=a.getType();o!=="GeometryCollection"&&(a=a.clone().transform(s,"EPSG:4326"));let u=0,f,d,g,p,v,E;switch(o){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(f=a.getCoordinates(),u=Math.abs(Sh(f[0],i)),g=1,p=f.length;g<p;++g)u-=Math.abs(Sh(f[g],i));break}case"MultiPolygon":{for(f=a.getCoordinates(),g=0,p=f.length;g<p;++g)for(d=f[g],u+=Math.abs(Sh(d[0],i)),v=1,E=d.length;v<E;++v)u-=Math.abs(Sh(d[v],i));break}case"GeometryCollection":{const w=a.getGeometries();for(g=0,p=w.length;g<p;++g)u+=al(w[g],t);break}default:throw new Error("Unsupported geometry type: "+o)}return u}function O0(...a){console.warn(...a)}let Zg=!0;function D0(a){Zg=!1}function ym(a,t){if(t!==void 0){for(let i=0,s=a.length;i<s;++i)t[i]=a[i];t=t}else t=a.slice();return t}function P0(a,t){if(t!==void 0&&a!==t){for(let i=0,s=a.length;i<s;++i)t[i]=a[i];a=t}return a}function $w(a){Yw(a.getCode(),a),Fh(a,a,ym)}function tC(a){a.forEach($w)}function ri(a){return typeof a=="string"?Hw(a):a||null}function nv(a,t,i,s){a=ri(a);let o;const u=a.getPointResolutionFunc();if(u)o=u(t,i);else{const f=a.getUnits();if(f=="degrees"||s=="degrees")o=t;else{const d=xm(a,ri("EPSG:4326"));if(d===P0&&f!=="degrees")o=t*a.getMetersPerUnit();else{let p=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];p=d(p,p,2);const v=iv(p.slice(0,2),p.slice(2,4)),E=iv(p.slice(4,6),p.slice(6,8));o=(v+E)/2}const g=a.getMetersPerUnit();g!==void 0&&(o/=g)}}return o}function sv(a){tC(a),a.forEach(function(t){a.forEach(function(i){t!==i&&Fh(t,i,ym)})})}function eC(a,t,i,s){a.forEach(function(o){t.forEach(function(u){Fh(o,u,i),Fh(u,o,s)})})}function vm(a,t){if(a){if(typeof a=="string")return ri(a)}else return ri(t);return a}function Gh(a,t){return D0(),Em(a,"EPSG:4326","EPSG:3857")}function iC(a,t){const i=Em(a,"EPSG:3857","EPSG:4326"),s=i[0];return(s<-180||s>180)&&(i[0]=Ha(s+180,360)-180),i}function ka(a,t){if(a===t)return!0;const i=a.getUnits()===t.getUnits();return(a.getCode()===t.getCode()||xm(a,t)===ym)&&i}function xm(a,t){const i=a.getCode(),s=t.getCode();let o=Xw(i,s);return o||(o=P0),o}function Bh(a,t){const i=ri(a),s=ri(t);return xm(i,s)}function Em(a,t,i){return Bh(t,i)(a,void 0,a.length)}function Du(a,t){return a}function ni(a,t){return Zg&&!Un(a,[0,0])&&a[0]>=-180&&a[0]<=180&&a[1]>=-90&&a[1]<=90&&(Zg=!1,O0("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),a}function Sm(a,t){return a}function Jr(a,t){return a}function nC(){sv(Jy),sv(tv),eC(tv,Jy,Bw,Zw)}nC();function Ya(a,t,i,s,o,u){u=u||[];let f=0;for(let d=t;d<i;d+=s){const g=a[d],p=a[d+1];u[f++]=o[0]*g+o[2]*p+o[4],u[f++]=o[1]*g+o[3]*p+o[5]}return u&&u.length!=f&&(u.length=f),u}function z0(a,t,i,s,o,u,f){f=f||[];const d=Math.cos(o),g=Math.sin(o),p=u[0],v=u[1];let E=0;for(let w=t;w<i;w+=s){const T=a[w]-p,b=a[w+1]-v;f[E++]=p+T*d-b*g,f[E++]=v+T*g+b*d;for(let O=w+2;O<w+s;++O)f[E++]=a[O]}return f&&f.length!=E&&(f.length=E),f}function sC(a,t,i,s,o,u,f,d){d=d||[];const g=f[0],p=f[1];let v=0;for(let E=t;E<i;E+=s){const w=a[E]-g,T=a[E+1]-p;d[v++]=g+o*w,d[v++]=p+u*T;for(let b=E+2;b<E+s;++b)d[v++]=a[b]}return d&&d.length!=v&&(d.length=v),d}function rC(a,t,i,s,o,u,f){f=f||[];let d=0;for(let g=t;g<i;g+=s){f[d++]=a[g]+o,f[d++]=a[g+1]+u;for(let p=g+2;p<g+s;++p)f[d++]=a[p]}return f&&f.length!=d&&(f.length=d),f}const rv=cs();class N0 extends Vn{constructor(){super(),this.extent_=On(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=xw(function(t,i,s){if(!s)return this.getSimplifiedGeometry(i);const o=this.clone();return o.applyTransform(s),o.getSimplifiedGeometry(i)})}simplifyTransformed(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)}clone(){return It()}closestPointXY(t,i,s,o){return It()}containsXY(t,i){const s=this.getClosestPoint([t,i]);return s[0]===t&&s[1]===i}getClosestPoint(t,i){return i=i||[NaN,NaN],this.closestPointXY(t[0],t[1],i,1/0),i}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return It()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&qu(i),this.extentRevision_=this.getRevision()}return Nw(this.extent_,t)}rotate(t,i){It()}scale(t,i,s){It()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return It()}getType(){return It()}applyTransform(t){It()}intersectsExtent(t){return It()}translate(t,i){It()}transform(t,i){const s=ri(t),o=s.getUnits()=="tile-pixels"?function(u,f,d){const g=s.getExtent(),p=s.getWorldExtent(),v=fs(p)/fs(g);return sa(rv,p[0],p[3],v,-v,0,0,0),Ya(u,0,u.length,d,rv,f),Bh(s,i)(u,f,d)}:Bh(s,i);return this.applyTransform(o),this}}class $a extends N0{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return S0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return It()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,i){this.stride=av(t),this.layout=t,this.flatCoordinates=i}setCoordinates(t,i){It()}setLayout(t,i,s){let o;if(t)o=av(t);else{for(let u=0;u<s;++u){if(i.length===0){this.layout="XY",this.stride=2;return}i=i[0]}o=i.length,t=aC(o)}this.layout=t,this.stride=o}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,i){const s=this.getFlatCoordinates();if(s){const o=this.getStride();z0(s,0,s.length,o,t,i,s),this.changed()}}scale(t,i,s){i===void 0&&(i=t),s||(s=qa(this.getExtent()));const o=this.getFlatCoordinates();if(o){const u=this.getStride();sC(o,0,o.length,u,t,i,s,o),this.changed()}}translate(t,i){const s=this.getFlatCoordinates();if(s){const o=this.getStride();rC(s,0,s.length,o,t,i,s),this.changed()}}}function aC(a){let t;return a==2?t="XY":a==3?t="XYZ":a==4&&(t="XYZM"),t}function av(a){let t;return a=="XY"?t=2:a=="XYZ"||a=="XYM"?t=3:a=="XYZM"&&(t=4),t}function oC(a,t,i){const s=a.getFlatCoordinates();if(!s)return null;const o=a.getStride();return Ya(s,0,s.length,o,t,i)}function ov(a,t,i,s,o,u,f){const d=a[t],g=a[t+1],p=a[i]-d,v=a[i+1]-g;let E;if(p===0&&v===0)E=t;else{const w=((o-d)*p+(u-g)*v)/(p*p+v*v);if(w>1)E=i;else if(w>0){for(let T=0;T<s;++T)f[T]=dn(a[t+T],a[i+T],w);f.length=s;return}else E=t}for(let w=0;w<s;++w)f[w]=a[E+w];f.length=s}function wm(a,t,i,s,o){let u=a[t],f=a[t+1];for(t+=s;t<i;t+=s){const d=a[t],g=a[t+1],p=ja(u,f,d,g);p>o&&(o=p),u=d,f=g}return o}function Cm(a,t,i,s,o){for(let u=0,f=i.length;u<f;++u){const d=i[u];o=wm(a,t,d,s,o),t=d}return o}function lC(a,t,i,s,o){for(let u=0,f=i.length;u<f;++u){const d=i[u];o=Cm(a,t,d,s,o),t=d[d.length-1]}return o}function Tm(a,t,i,s,o,u,f,d,g,p,v){if(t==i)return p;let E,w;if(o===0){if(w=ja(f,d,a[t],a[t+1]),w<p){for(E=0;E<s;++E)g[E]=a[t+E];return g.length=s,w}return p}v=v||[NaN,NaN];let T=t+s;for(;T<i;)if(ov(a,T-s,T,s,f,d,v),w=ja(f,d,v[0],v[1]),w<p){for(p=w,E=0;E<s;++E)g[E]=v[E];g.length=s,T+=s}else T+=s*Math.max((Math.sqrt(w)-Math.sqrt(p))/o|0,1);if(u&&(ov(a,i-s,t,s,f,d,v),w=ja(f,d,v[0],v[1]),w<p)){for(p=w,E=0;E<s;++E)g[E]=v[E];g.length=s}return p}function bm(a,t,i,s,o,u,f,d,g,p,v){v=v||[NaN,NaN];for(let E=0,w=i.length;E<w;++E){const T=i[E];p=Tm(a,t,T,s,o,u,f,d,g,p,v),t=T}return p}function uC(a,t,i,s,o,u,f,d,g,p,v){v=v||[NaN,NaN];for(let E=0,w=i.length;E<w;++E){const T=i[E];p=bm(a,t,T,s,o,u,f,d,g,p,v),t=T[T.length-1]}return p}function cC(a,t,i,s){for(let o=0,u=i.length;o<u;++o)a[t++]=i[o];return t}function of(a,t,i,s){for(let o=0,u=i.length;o<u;++o){const f=i[o];for(let d=0;d<s;++d)a[t++]=f[d]}return t}function Rm(a,t,i,s,o){o=o||[];let u=0;for(let f=0,d=i.length;f<d;++f){const g=of(a,t,i[f],s);o[u++]=g,t=g}return o.length=u,o}function hC(a,t,i,s,o){o=o||[];let u=0;for(let f=0,d=i.length;f<d;++f){const g=Rm(a,t,i[f],s,o[u]);g.length===0&&(g[0]=t),o[u++]=g,t=g[g.length-1]}return o.length=u,o}function Lm(a,t,i,s,o,u,f){const d=(i-t)/s;if(d<3){for(;t<i;t+=s)u[f++]=a[t],u[f++]=a[t+1];return f}const g=new Array(d);g[0]=1,g[d-1]=1;const p=[t,i-s];let v=0;for(;p.length>0;){const E=p.pop(),w=p.pop();let T=0;const b=a[w],O=a[w+1],D=a[E],P=a[E+1];for(let k=w+s;k<E;k+=s){const z=a[k],j=a[k+1],X=Vw(z,j,b,O,D,P);X>T&&(v=k,T=X)}T>o&&(g[(v-t)/s]=1,w+s<v&&p.push(w,v),v+s<E&&p.push(v,E))}for(let E=0;E<d;++E)g[E]&&(u[f++]=a[t+E*s],u[f++]=a[t+E*s+1]);return f}function fC(a,t,i,s,o,u,f,d){for(let g=0,p=i.length;g<p;++g){const v=i[g];f=Lm(a,t,v,s,o,u,f),d.push(f),t=v}return f}function Ia(a,t){return t*Math.round(a/t)}function dC(a,t,i,s,o,u,f){if(t==i)return f;let d=Ia(a[t],o),g=Ia(a[t+1],o);t+=s,u[f++]=d,u[f++]=g;let p,v;do if(p=Ia(a[t],o),v=Ia(a[t+1],o),t+=s,t==i)return u[f++]=p,u[f++]=v,f;while(p==d&&v==g);for(;t<i;){const E=Ia(a[t],o),w=Ia(a[t+1],o);if(t+=s,E==p&&w==v)continue;const T=p-d,b=v-g,O=E-d,D=w-g;if(T*D==b*O&&(T<0&&O<T||T==O||T>0&&O>T)&&(b<0&&D<b||b==D||b>0&&D>b)){p=E,v=w;continue}u[f++]=p,u[f++]=v,d=p,g=v,p=E,v=w}return u[f++]=p,u[f++]=v,f}function I0(a,t,i,s,o,u,f,d){for(let g=0,p=i.length;g<p;++g){const v=i[g];f=dC(a,t,v,s,o,u,f),d.push(f),t=v}return f}function gC(a,t,i,s,o,u,f,d){for(let g=0,p=i.length;g<p;++g){const v=i[g],E=[];f=I0(a,t,v,s,o,u,f,E),d.push(E),t=v[v.length-1]}return f}function $r(a,t,i,s,o){o=o!==void 0?o:[];let u=0;for(let f=t;f<i;f+=s)o[u++]=a.slice(f,f+s);return o.length=u,o}function Pu(a,t,i,s,o){o=o!==void 0?o:[];let u=0;for(let f=0,d=i.length;f<d;++f){const g=i[f];o[u++]=$r(a,t,g,s,o[u]),t=g}return o.length=u,o}function jg(a,t,i,s,o){o=o!==void 0?o:[];let u=0;for(let f=0,d=i.length;f<d;++f){const g=i[f];o[u++]=g.length===1&&g[0]===t?[]:Pu(a,t,g,s,o[u]),t=g[g.length-1]}return o.length=u,o}function k0(a,t,i,s){let o=0,u=a[i-s],f=a[i-s+1];for(;t<i;t+=s){const d=a[t],g=a[t+1];o+=f*d-u*g,u=d,f=g}return o/2}function F0(a,t,i,s){let o=0;for(let u=0,f=i.length;u<f;++u){const d=i[u];o+=k0(a,t,d,s),t=d}return o}function mC(a,t,i,s){let o=0;for(let u=0,f=i.length;u<f;++u){const d=i[u];o+=F0(a,t,d,s),t=d[d.length-1]}return o}class zu extends $a{constructor(t,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}clone(){return new zu(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,s,o){return o<Qa(this.getExtent(),t,i)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,s,o))}getArea(){return k0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return $r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const i=[];return i.length=Lm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new zu(i,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=of(this.flatCoordinates,0,t,this.stride),this.changed()}}class Yn extends $a{constructor(t,i){super(),this.setCoordinates(t,i)}clone(){const t=new Yn(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,s,o){const u=this.flatCoordinates,f=ja(t,i,u[0],u[1]);if(f<o){const d=this.stride;for(let g=0;g<d;++g)s[g]=u[g];return s.length=d,f}return o}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Nh(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return dm(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cC(this.flatCoordinates,0,t,this.stride),this.changed()}}function _C(a,t,i,s,o){return!T0(o,function(f){return!Ga(a,t,i,s,f[0],f[1])})}function Ga(a,t,i,s,o,u){let f=0,d=a[i-s],g=a[i-s+1];for(;t<i;t+=s){const p=a[t],v=a[t+1];g<=u?v>u&&(p-d)*(u-g)-(o-d)*(v-g)>0&&f++:v<=u&&(p-d)*(u-g)-(o-d)*(v-g)<0&&f--,d=p,g=v}return f!==0}function Mm(a,t,i,s,o,u){if(i.length===0||!Ga(a,t,i[0],s,o,u))return!1;for(let f=1,d=i.length;f<d;++f)if(Ga(a,i[f-1],i[f],s,o,u))return!1;return!0}function pC(a,t,i,s,o,u){if(i.length===0)return!1;for(let f=0,d=i.length;f<d;++f){const g=i[f];if(Mm(a,t,g,s,o,u))return!0;t=g[g.length-1]}return!1}function G0(a,t,i,s,o,u,f){let d,g,p,v,E,w,T;const b=o[u+1],O=[];for(let k=0,z=i.length;k<z;++k){const j=i[k];for(v=a[j-s],w=a[j-s+1],d=t;d<j;d+=s)E=a[d],T=a[d+1],(b<=w&&T<=b||w<=b&&b<=T)&&(p=(b-w)/(T-w)*(E-v)+v,O.push(p)),v=E,w=T}let D=NaN,P=-1/0;for(O.sort(Xa),v=O[0],d=1,g=O.length;d<g;++d){E=O[d];const k=Math.abs(E-v);k>P&&(p=(v+E)/2,Mm(a,t,i,s,p,b)&&(D=p,P=k)),v=E}return isNaN(D)&&(D=o[u]),f?(f.push(D,b,P),f):[D,b,P]}function yC(a,t,i,s,o){let u=[];for(let f=0,d=i.length;f<d;++f){const g=i[f];u=G0(a,t,g,s,o,2*f,u),t=g[g.length-1]}return u}function B0(a,t,i,s,o){let u;for(t+=s;t<i;t+=s)if(u=o(a.slice(t-s,t),a.slice(t,t+s)),u)return u;return!1}function lf(a,t,i,s,o){const u=C0(On(),a,t,i,s);return Zi(o,u)?Fa(o,u)||u[0]>=o[0]&&u[2]<=o[2]||u[1]>=o[1]&&u[3]<=o[3]?!0:B0(a,t,i,s,function(f,d){return Iw(o,f,d)}):!1}function vC(a,t,i,s,o){for(let u=0,f=i.length;u<f;++u){if(lf(a,t,i[u],s,o))return!0;t=i[u]}return!1}function Z0(a,t,i,s,o){return!!(lf(a,t,i,s,o)||Ga(a,t,i,s,o[0],o[1])||Ga(a,t,i,s,o[0],o[3])||Ga(a,t,i,s,o[2],o[1])||Ga(a,t,i,s,o[2],o[3]))}function j0(a,t,i,s,o){if(!Z0(a,t,i[0],s,o))return!1;if(i.length===1)return!0;for(let u=1,f=i.length;u<f;++u)if(_C(a,i[u-1],i[u],s,o)&&!lf(a,i[u-1],i[u],s,o))return!1;return!0}function xC(a,t,i,s,o){for(let u=0,f=i.length;u<f;++u){const d=i[u];if(j0(a,t,d,s,o))return!0;t=d[d.length-1]}return!1}function EC(a,t,i,s){for(;t<i-s;){for(let o=0;o<s;++o){const u=a[t+o];a[t+o]=a[i-s+o],a[i-s+o]=u}t+=s,i-=s}}function U0(a,t,i,s){let o=0,u=a[i-s],f=a[i-s+1];for(;t<i;t+=s){const d=a[t],g=a[t+1];o+=(d-u)*(g+f),u=d,f=g}return o===0?void 0:o>0}function H0(a,t,i,s,o){o=o!==void 0?o:!1;for(let u=0,f=i.length;u<f;++u){const d=i[u],g=U0(a,t,d,s);if(u===0){if(o&&g||!o&&!g)return!1}else if(o&&!g||!o&&g)return!1;t=d}return!0}function SC(a,t,i,s,o){for(let u=0,f=i.length;u<f;++u){const d=i[u];if(!H0(a,t,d,s,o))return!1;d.length&&(t=d[d.length-1])}return!0}function Ug(a,t,i,s,o){o=o!==void 0?o:!1;for(let u=0,f=i.length;u<f;++u){const d=i[u],g=U0(a,t,d,s);(u===0?o&&g||!o&&!g:o&&!g||!o&&g)&&EC(a,t,d,s),t=d}return t}function lv(a,t,i,s,o){for(let u=0,f=i.length;u<f;++u)t=Ug(a,t,i[u],s,o);return t}class Ai extends $a{constructor(t,i,s){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&s?(this.setFlatCoordinates(i,t),this.ends_=s):this.setCoordinates(t,i)}appendLinearRing(t){this.flatCoordinates?Hn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ai(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,s,o){return o<Qa(this.getExtent(),t,i)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Cm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,s,o))}containsXY(t,i){return Mm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)}getArea(){return F0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),Ug(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,Pu(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=qa(this.getExtent());this.flatInteriorPoint_=G0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Yn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new zu(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,i=this.flatCoordinates,s=this.ends_,o=[];let u=0;for(let f=0,d=s.length;f<d;++f){const g=s[f],p=new zu(i.slice(u,g),t);o.push(p),u=g}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;H0(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ug(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],s=[];return i.length=I0(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,s),new Ai(i,"XY",s)}getType(){return"Polygon"}intersectsExtent(t){return j0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=Rm(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}function uv(a){const t=a[0],i=a[1],s=a[2],o=a[3],u=[t,i,t,o,s,o,s,i,t,i];return new Ai(u,"XY",[u.length])}const ea={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class ii{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new ii({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}function Y0(a,t,i,s,o,u,f){let d,g;const p=(i-t)/s;if(p===1)d=t;else if(p===2)d=t,g=o;else if(p!==0){let v=a[t],E=a[t+1],w=0;const T=[0];for(let D=t+s;D<i;D+=s){const P=a[D],k=a[D+1];w+=Math.sqrt((P-v)*(P-v)+(k-E)*(k-E)),T.push(w),v=P,E=k}const b=o*w,O=pw(T,b);O<0?(g=(b-T[-O-2])/(T[-O-1]-T[-O-2]),d=t+(-O-2)*s):d=t+O*s}f=f>1?f:2,u=u||new Array(f);for(let v=0;v<f;++v)u[v]=d===void 0?NaN:g===void 0?a[d+v]:dn(a[d+v],a[d+s+v],g);return u}function Hg(a,t,i,s,o,u){if(i==t)return null;let f;if(o<a[t+s-1])return u?(f=a.slice(t,t+s),f[s-1]=o,f):null;if(a[i-1]<o)return u?(f=a.slice(i-s,i),f[s-1]=o,f):null;if(o==a[t+s-1])return a.slice(t,t+s);let d=t/s,g=i/s;for(;d<g;){const w=d+g>>1;o<a[(w+1)*s-1]?g=w:d=w+1}const p=a[d*s-1];if(o==p)return a.slice((d-1)*s,(d-1)*s+s);const v=a[(d+1)*s-1],E=(o-p)/(v-p);f=[];for(let w=0;w<s-1;++w)f.push(dn(a[(d-1)*s+w],a[d*s+w],E));return f.push(o),f}function wC(a,t,i,s,o,u,f){if(f)return Hg(a,t,i[i.length-1],s,o,u);let d;if(o<a[s-1])return u?(d=a.slice(0,s),d[s-1]=o,d):null;if(a[a.length-1]<o)return u?(d=a.slice(a.length-s),d[s-1]=o,d):null;for(let g=0,p=i.length;g<p;++g){const v=i[g];if(t!=v){if(o<a[t+s-1])return null;if(o<=a[v-1])return Hg(a,t,v,s,o,!1);t=v}}return null}function X0(a,t,i,s){let o=a[t],u=a[t+1],f=0;for(let d=t+s;d<i;d+=s){const g=a[d],p=a[d+1];f+=Math.sqrt((g-o)*(g-o)+(p-u)*(p-u)),o=g,u=p}return f}class Ka extends $a{constructor(t,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendCoordinate(t){this.flatCoordinates?Hn(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Ka(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,s,o){return o<Qa(this.getExtent(),t,i)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,s,o))}forEachSegment(t){return B0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0?i:!1,Hg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i))}getCoordinates(){return $r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,i){return Y0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)}getLength(){return X0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const i=[];return i.length=Lm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new Ka(i,"XY")}getType(){return"LineString"}intersectsExtent(t){return lf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=of(this.flatCoordinates,0,t,this.stride),this.changed()}}class Ve{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Ve({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const si={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function cv(a){return a[0]>0&&a[1]>0}function CC(a,t,i){return i===void 0&&(i=[0,0]),i[0]=a[0]*t+.5|0,i[1]=a[1]*t+.5|0,i}function mn(a,t){return Array.isArray(a)?a:(t===void 0?t=[a,a]:(t[0]=a,t[1]=a),t)}class uf{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=mn(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new uf({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return It()}getImage(t){return It()}getHitDetectionImage(){return It()}getPixelRatio(t){return 1}getImageState(){return It()}getImageSize(){return It()}getOrigin(){return It()}getSize(){return It()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=mn(t)}listenImageChange(t){It()}load(){It()}unlistenImageChange(t){It()}}const TC=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,bC=/^([a-z]*)$|^hsla?\(.*\)$/i;function V0(a){return typeof a=="string"?a:q0(a)}function RC(a){const t=document.createElement("div");if(t.style.color=a,t.style.color!==""){document.body.appendChild(t);const i=getComputedStyle(t).color;return document.body.removeChild(t),i}return""}const LC=function(){const t={};let i=0;return function(s){let o;if(t.hasOwnProperty(s))o=t[s];else{if(i>=1024){let u=0;for(const f in t)(u++&3)===0&&(delete t[f],--i)}o=MC(s),t[s]=o,++i}return o}}();function Zh(a){return Array.isArray(a)?a:LC(a)}function MC(a){let t,i,s,o,u;if(bC.exec(a)&&(a=RC(a)),TC.exec(a)){const f=a.length-1;let d;f<=4?d=1:d=2;const g=f===4||f===8;t=parseInt(a.substr(1+0*d,d),16),i=parseInt(a.substr(1+1*d,d),16),s=parseInt(a.substr(1+2*d,d),16),g?o=parseInt(a.substr(1+3*d,d),16):o=255,d==1&&(t=(t<<4)+t,i=(i<<4)+i,s=(s<<4)+s,g&&(o=(o<<4)+o)),u=[t,i,s,o/255]}else a.startsWith("rgba(")?(u=a.slice(5,-1).split(",").map(Number),hv(u)):a.startsWith("rgb(")?(u=a.slice(4,-1).split(",").map(Number),u.push(1),hv(u)):Vt(!1,14);return u}function hv(a){return a[0]=Ke(a[0]+.5|0,0,255),a[1]=Ke(a[1]+.5|0,0,255),a[2]=Ke(a[2]+.5|0,0,255),a[3]=Ke(a[3],0,1),a}function q0(a){let t=a[0];t!=(t|0)&&(t=t+.5|0);let i=a[1];i!=(i|0)&&(i=i+.5|0);let s=a[2];s!=(s|0)&&(s=s+.5|0);const o=a[3]===void 0?1:Math.round(a[3]*100)/100;return"rgba("+t+","+i+","+s+","+o+")"}function us(a){return Array.isArray(a)?q0(a):a}function Ui(a,t,i,s){let o;return i&&i.length?o=i.shift():hm?o=new OffscreenCanvas(a||300,t||300):o=document.createElement("canvas"),a&&(o.width=a),t&&(o.height=t),o.getContext("2d",s)}function cf(a){const t=a.canvas;t.width=1,t.height=1,a.clearRect(0,0,1,1)}function AC(a){let t=a.offsetWidth;const i=getComputedStyle(a);return t+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),t}function OC(a){let t=a.offsetHeight;const i=getComputedStyle(a);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),t}function fv(a,t){const i=t.parentNode;i&&i.replaceChild(a,t)}function jh(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function K0(a){for(;a.lastChild;)a.removeChild(a.lastChild)}function DC(a,t){const i=a.childNodes;for(let s=0;;++s){const o=i[s],u=t[s];if(!o&&!u)break;if(o!==u){if(!o){a.appendChild(u);continue}if(!u){a.removeChild(o),--s;continue}a.insertBefore(u,o)}}}const wh="ol-hidden",PC="ol-selectable",hf="ol-unselectable",Am="ol-control",dv="ol-collapsed",zC=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),gv=["style","variant","weight","size","lineHeight","family"],W0=function(a){const t=a.match(zC);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,o=gv.length;s<o;++s){const u=t[s+1];u!==void 0&&(i[gv[s]]=u)}return i.families=i.family.split(/,\s?/),i},Q0="10px sans-serif",Ks="#000",Uh="round",Nu=[],Iu=0,ol="round",ku=10,Fu="#000",Gu="center",Hh="middle",Ba=[0,0,0,0],Bu=1,Xs=new Vn;let Ko=null,Yg;const Xg={},NC=function(){const t="32px ",i=["monospace","serif"],s=i.length,o="wmytzilWMYTZIL@#/&?$%10";let u,f;function d(p,v,E){let w=!0;for(let T=0;T<s;++T){const b=i[T];if(f=Yh(p+" "+v+" "+t+b,o),E!=b){const O=Yh(p+" "+v+" "+t+E+","+b,o);w=w&&O!=f}}return!!w}function g(){let p=!0;const v=Xs.getKeys();for(let E=0,w=v.length;E<w;++E){const T=v[E];Xs.get(T)<100&&(d.apply(this,T.split(`
`))?(fl(Xg),Ko=null,Yg=void 0,Xs.set(T,100)):(Xs.set(T,Xs.get(T)+1,!0),p=!1))}p&&(clearInterval(u),u=void 0)}return function(p){const v=W0(p);if(!v)return;const E=v.families;for(let w=0,T=E.length;w<T;++w){const b=E[w],O=v.style+`
`+v.weight+`
`+b;Xs.get(O)===void 0&&(Xs.set(O,100,!0),d(v.style,v.weight,b)||(Xs.set(O,0,!0),u===void 0&&(u=setInterval(g,32))))}}}(),IC=function(){let a;return function(t){let i=Xg[t];if(i==null){if(hm){const s=W0(t),o=J0(t,"g");i=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else a||(a=document.createElement("div"),a.innerHTML="M",a.style.minHeight="0",a.style.maxHeight="none",a.style.height="auto",a.style.padding="0",a.style.border="none",a.style.position="absolute",a.style.display="block",a.style.left="-99999px"),a.style.font=t,document.body.appendChild(a),i=a.offsetHeight,document.body.removeChild(a);Xg[t]=i}return i}}();function J0(a,t){return Ko||(Ko=Ui(1,1)),a!=Yg&&(Ko.font=a,Yg=Ko.font),Ko.measureText(t)}function Yh(a,t){return J0(a,t).width}function mv(a,t,i){if(t in i)return i[t];const s=t.split(`
`).reduce((o,u)=>Math.max(o,Yh(a,u)),0);return i[t]=s,s}function kC(a,t){const i=[],s=[],o=[];let u=0,f=0,d=0,g=0;for(let p=0,v=t.length;p<=v;p+=2){const E=t[p];if(E===`
`||p===v){u=Math.max(u,f),o.push(f),f=0,d+=g;continue}const w=t[p+1]||a.font,T=Yh(w,E);i.push(T),f+=T;const b=IC(w);s.push(b),g=Math.max(g,b)}return{width:u,height:d,widths:i,heights:s,lineWidths:o}}function FC(a,t,i,s,o,u,f,d,g,p,v){a.save(),i!==1&&(a.globalAlpha*=i),t&&a.setTransform.apply(a,t),s.contextInstructions?(a.translate(g,p),a.scale(v[0],v[1]),GC(s,a)):v[0]<0||v[1]<0?(a.translate(g,p),a.scale(v[0],v[1]),a.drawImage(s,o,u,f,d,0,0,f,d)):a.drawImage(s,o,u,f,d,g,p,f*v[0],d*v[1]),a.restore()}function GC(a,t){const i=a.contextInstructions;for(let s=0,o=i.length;s<o;s+=2)Array.isArray(i[s+1])?t[i[s]].apply(t,i[s+1]):t[i[s]]=i[s+1]}class ff extends uf{constructor(t){const i=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:i,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),i=new ff({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const t=this.size_;if(!t)return null;const i=this.getDisplacement(),s=this.getScaleArray();return[t[0]/2-i[0]/s[0],t[1]/2+i[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let i=this.canvas_[t];if(!i){const s=this.renderOptions_,o=Ui(s.size*t,s.size*t);this.draw_(s,o,t),i=o.canvas,this.canvas_[t]=i}return i}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return si.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,s){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let o=this.radius_,u=this.radius2_===void 0?o:this.radius2_;if(o<u){const $=o;o=u,u=$}const f=this.radius2_===void 0?this.points_:this.points_*2,d=2*Math.PI/f,g=u*Math.sin(d),p=Math.sqrt(u*u-g*g),v=o-p,E=Math.sqrt(g*g+v*v),w=E/g;if(t==="miter"&&w<=s)return w*i;const T=i/2/w,b=i/2*(v/E),D=Math.sqrt((o+T)*(o+T)+b*b)-o;if(this.radius2_===void 0||t==="bevel")return D*2;const P=o*Math.sin(d),k=Math.sqrt(o*o-P*P),z=u-k,X=Math.sqrt(P*P+z*z)/P;if(X<=s){const $=X*i/2-u-o;return 2*Math.max(D,$)}return D*2}createRenderOptions(){let t=ol,i=0,s=null,o=0,u,f=0;this.stroke_&&(u=this.stroke_.getColor(),u===null&&(u=Fu),u=us(u),f=this.stroke_.getWidth(),f===void 0&&(f=Bu),s=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=ol),i=this.stroke_.getMiterLimit(),i===void 0&&(i=ku));const d=this.calculateLineJoinSize_(t,f,i),g=Math.max(this.radius_,this.radius2_||0),p=Math.ceil(2*g+d);return{strokeStyle:u,strokeWidth:f,size:p,lineDash:s,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,i,s){if(i.scale(s,s),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let o=this.fill_.getColor();o===null&&(o=Ks),i.fillStyle=us(o),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let i=this.fill_.getColor(),s=0;if(typeof i=="string"&&(i=Zh(i)),i===null?s=1:Array.isArray(i)&&(s=i.length===4?i[3]:1),s===0){const o=Ui(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let i=this.points_;const s=this.radius_;if(i===1/0)t.arc(0,0,s,0,2*Math.PI);else{const o=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(i*=2);const u=this.angle_-Math.PI/2,f=2*Math.PI/i;for(let d=0;d<i;d++){const g=u+d*f,p=d%2===0?s:o;t.lineTo(p*Math.cos(g),p*Math.sin(g))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=Ks,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}}class An extends ff{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),i=new An({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius_=t,this.render()}}class Ie{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=_v,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Ie({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=_v,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function BC(a){let t;if(typeof a=="function")t=a;else{let i;Array.isArray(a)?i=a:(Vt(typeof a.getZIndex=="function",41),i=[a]),t=function(){return i}}return t}let mg=null;function ZC(a,t){if(!mg){const i=new ii({color:"rgba(255,255,255,0.4)"}),s=new Ve({color:"#3399CC",width:1.25});mg=[new Ie({image:new An({fill:i,stroke:s,radius:5}),fill:i,stroke:s})]}return mg}function $0(){const a={},t=[255,255,255,1],i=[0,153,255,1],s=3;return a.Polygon=[new Ie({fill:new ii({color:[255,255,255,.5]})})],a.MultiPolygon=a.Polygon,a.LineString=[new Ie({stroke:new Ve({color:t,width:s+2})}),new Ie({stroke:new Ve({color:i,width:s})})],a.MultiLineString=a.LineString,a.Circle=a.Polygon.concat(a.LineString),a.Point=[new Ie({image:new An({radius:s*2,fill:new ii({color:i}),stroke:new Ve({color:t,width:s/2})}),zIndex:1/0})],a.MultiPoint=a.Point,a.GeometryCollection=a.Polygon.concat(a.LineString,a.Point),a}function _v(a){return a.getGeometry()}const jC="#333";class Om{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=mn(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new ii({color:jC}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new Om({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=mn(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const ue={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class tx extends Vn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const i=Object.assign({},t);typeof t.properties=="object"&&(delete i.properties,Object.assign(i,t.properties)),i[ue.OPACITY]=t.opacity!==void 0?t.opacity:1,Vt(typeof i[ue.OPACITY]=="number",64),i[ue.VISIBLE]=t.visible!==void 0?t.visible:!0,i[ue.Z_INDEX]=t.zIndex,i[ue.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[ue.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[ue.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[ue.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const i=this.state_||{layer:this,managed:t===void 0?!0:t},s=this.getZIndex();return i.opacity=Ke(Math.round(this.getOpacity()*100)/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=s===void 0&&!i.managed?1/0:s,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(t){return It()}getLayerStatesArray(t){return It()}getExtent(){return this.get(ue.EXTENT)}getMaxResolution(){return this.get(ue.MAX_RESOLUTION)}getMinResolution(){return this.get(ue.MIN_RESOLUTION)}getMinZoom(){return this.get(ue.MIN_ZOOM)}getMaxZoom(){return this.get(ue.MAX_ZOOM)}getOpacity(){return this.get(ue.OPACITY)}getSourceState(){return It()}getVisible(){return this.get(ue.VISIBLE)}getZIndex(){return this.get(ue.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(ue.EXTENT,t)}setMaxResolution(t){this.set(ue.MAX_RESOLUTION,t)}setMinResolution(t){this.set(ue.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(ue.MAX_ZOOM,t)}setMinZoom(t){this.set(ue.MIN_ZOOM,t)}setOpacity(t){Vt(typeof t=="number",64),this.set(ue.OPACITY,t)}setVisible(t){this.set(ue.VISIBLE,t)}setZIndex(t){this.set(ue.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Mi={ANIMATING:0,INTERACTING:1},Zn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},UC=42,Dm=256;function pv(a,t,i){return function(s,o,u,f,d){if(!s)return;if(!o&&!t)return s;const g=t?0:u[0]*o,p=t?0:u[1]*o,v=d?d[0]:0,E=d?d[1]:0;let w=a[0]+g/2+v,T=a[2]-g/2+v,b=a[1]+p/2+E,O=a[3]-p/2+E;w>T&&(w=(T+w)/2,T=w),b>O&&(b=(O+b)/2,O=b);let D=Ke(s[0],w,T),P=Ke(s[1],b,O);if(f&&i&&o){const k=30*o;D+=-k*Math.log(1+Math.max(0,w-s[0])/k)+k*Math.log(1+Math.max(0,s[0]-T)/k),P+=-k*Math.log(1+Math.max(0,b-s[1])/k)+k*Math.log(1+Math.max(0,s[1]-O)/k)}return[D,P]}}function HC(a){return a}function Pm(a,t,i,s){const o=we(t)/i[0],u=fs(t)/i[1];return s?Math.min(a,Math.max(o,u)):Math.min(a,Math.min(o,u))}function zm(a,t,i){let s=Math.min(a,t);const o=50;return s*=Math.log(1+o*Math.max(0,a/t-1))/o+1,i&&(s=Math.max(s,i),s/=Math.log(1+o*Math.max(0,i/a-1))/o+1),Ke(s,i/2,t*2)}function YC(a,t,i,s){return t=t!==void 0?t:!0,function(o,u,f,d){if(o!==void 0){const g=a[0],p=a[a.length-1],v=i?Pm(g,i,f,s):g;if(d)return t?zm(o,v,p):Ke(o,p,v);const E=Math.min(v,o),w=Math.floor(cm(a,E,u));return a[w]>v&&w<a.length-1?a[w+1]:a[w]}}}function XC(a,t,i,s,o,u){return s=s!==void 0?s:!0,i=i!==void 0?i:0,function(f,d,g,p){if(f!==void 0){const v=o?Pm(t,o,g,u):t;if(p)return s?zm(f,v,i):Ke(f,i,v);const E=1e-9,w=Math.ceil(Math.log(t/v)/Math.log(a)-E),T=-d*(.5-E)+.5,b=Math.min(v,f),O=Math.floor(Math.log(t/b)/Math.log(a)+T),D=Math.max(w,O),P=t/Math.pow(a,D);return Ke(P,i,v)}}}function yv(a,t,i,s,o){return i=i!==void 0?i:!0,function(u,f,d,g){if(u!==void 0){const p=s?Pm(a,s,d,o):a;return!i||!g?Ke(u,t,p):zm(u,p,t)}}}function Nm(a){if(a!==void 0)return 0}function vv(a){if(a!==void 0)return a}function VC(a){const t=2*Math.PI/a;return function(i,s){if(s)return i;if(i!==void 0)return i=Math.floor(i/t+.5)*t,i}}function qC(a){return a=a||Ua(5),function(t,i){if(i)return t;if(t!==void 0)return Math.abs(t)<=a?0:t}}function ex(a){return Math.pow(a,3)}function dl(a){return 1-ex(1-a)}function KC(a){return 3*a*a-2*a*a*a}function WC(a){return a}const _g=0;class os extends Vn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=vm(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&D0(),t.center&&(t.center=ni(t.center,this.projection_)),t.extent&&(t.extent=Jr(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const i=Object.assign({},t);for(const d in Zn)delete i[d];this.setProperties(i,!0);const s=JC(t);this.maxResolution_=s.maxResolution,this.minResolution_=s.minResolution,this.zoomFactor_=s.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=s.minZoom;const o=QC(t),u=s.constraint,f=$C(t);this.constraints_={center:o,resolution:u,rotation:f},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let i=this.padding_;this.padding_=t;const s=this.getCenterInternal();if(s){const o=t||[0,0,0,0];i=i||[0,0,0,0];const u=this.getResolution(),f=u/2*(o[3]-i[3]+i[1]-o[1]),d=u/2*(o[0]-i[0]+i[2]-o[2]);this.setCenterInternal([s[0]+f,s[1]-d])}}getUpdatedOptions_(t){const i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const i=new Array(arguments.length);for(let s=0;s<i.length;++s){let o=arguments[s];o.center&&(o=Object.assign({},o),o.center=ni(o.center,this.getProjection())),o.anchor&&(o=Object.assign({},o),o.anchor=ni(o.anchor,this.getProjection())),i[s]=o}this.animateInternal.apply(this,i)}animateInternal(t){let i=arguments.length,s;i>1&&typeof arguments[i-1]=="function"&&(s=arguments[i-1],--i);let o=0;for(;o<i&&!this.isDef();++o){const v=arguments[o];v.center&&this.setCenterInternal(v.center),v.zoom!==void 0?this.setZoom(v.zoom):v.resolution&&this.setResolution(v.resolution),v.rotation!==void 0&&this.setRotation(v.rotation)}if(o===i){s&&Ch(s,!0);return}let u=Date.now(),f=this.targetCenter_.slice(),d=this.targetResolution_,g=this.targetRotation_;const p=[];for(;o<i;++o){const v=arguments[o],E={start:u,complete:!1,anchor:v.anchor,duration:v.duration!==void 0?v.duration:1e3,easing:v.easing||KC,callback:s};if(v.center&&(E.sourceCenter=f,E.targetCenter=v.center.slice(),f=E.targetCenter),v.zoom!==void 0?(E.sourceResolution=d,E.targetResolution=this.getResolutionForZoom(v.zoom),d=E.targetResolution):v.resolution&&(E.sourceResolution=d,E.targetResolution=v.resolution,d=E.targetResolution),v.rotation!==void 0){E.sourceRotation=g;const w=Ha(v.rotation-g+Math.PI,2*Math.PI)-Math.PI;E.targetRotation=g+w,g=E.targetRotation}tT(E)?E.complete=!0:u+=E.duration,p.push(E)}this.animations_.push(p),this.setHint(Mi.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Mi.ANIMATING]>0}getInteracting(){return this.hints_[Mi.INTERACTING]>0}cancelAnimations(){this.setHint(Mi.ANIMATING,-this.hints_[Mi.ANIMATING]);let t;for(let i=0,s=this.animations_.length;i<s;++i){const o=this.animations_[i];if(o[0].callback&&Ch(o[0].callback,!1),!t)for(let u=0,f=o.length;u<f;++u){const d=o[u];if(!d.complete){t=d.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let i=!1;for(let s=this.animations_.length-1;s>=0;--s){const o=this.animations_[s];let u=!0;for(let f=0,d=o.length;f<d;++f){const g=o[f];if(g.complete)continue;const p=t-g.start;let v=g.duration>0?p/g.duration:1;v>=1?(g.complete=!0,v=1):u=!1;const E=g.easing(v);if(g.sourceCenter){const w=g.sourceCenter[0],T=g.sourceCenter[1],b=g.targetCenter[0],O=g.targetCenter[1];this.nextCenter_=g.targetCenter;const D=w+E*(b-w),P=T+E*(O-T);this.targetCenter_=[D,P]}if(g.sourceResolution&&g.targetResolution){const w=E===1?g.targetResolution:g.sourceResolution+E*(g.targetResolution-g.sourceResolution);if(g.anchor){const T=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(w,0,T,!0);this.targetCenter_=this.calculateCenterZoom(b,g.anchor)}this.nextResolution_=g.targetResolution,this.targetResolution_=w,this.applyTargetState_(!0)}if(g.sourceRotation!==void 0&&g.targetRotation!==void 0){const w=E===1?Ha(g.targetRotation+Math.PI,2*Math.PI)-Math.PI:g.sourceRotation+E*(g.targetRotation-g.sourceRotation);if(g.anchor){const T=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(T,g.anchor)}this.nextRotation_=g.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),i=!0,!g.complete)break}if(u){this.animations_[s]=null,this.setHint(Mi.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const f=o[0].callback;f&&Ch(f,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,i){let s;const o=this.getCenterInternal();return o!==void 0&&(s=[o[0]-i[0],o[1]-i[1]],pm(s,t-this.getRotation()),Kw(s,i)),s}calculateCenterZoom(t,i){let s;const o=this.getCenterInternal(),u=this.getResolution();if(o!==void 0&&u!==void 0){const f=i[0]-t*(i[0]-o[0])/u,d=i[1]-t*(i[1]-o[1])/u;s=[f,d]}return s}getViewportSize_(t){const i=this.viewportSize_;if(t){const s=i[0],o=i[1];return[Math.abs(s*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(s*Math.sin(t))+Math.abs(o*Math.cos(t))]}return i}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Du(t,this.getProjection())}getCenterInternal(){return this.get(Zn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const i=this.calculateExtentInternal(t);return Sm(i,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const i=this.getCenterInternal();Vt(i,1);const s=this.getResolution();Vt(s!==void 0,2);const o=this.getRotation();return Vt(o!==void 0,3),Fg(i,s,o,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Zn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,i){return this.getResolutionForExtentInternal(Jr(t,this.getProjection()),i)}getResolutionForExtentInternal(t,i){i=i||this.getViewportSizeMinusPadding_();const s=we(t)/i[0],o=fs(t)/i[1];return Math.max(s,o)}getResolutionForValueFunction(t){t=t||2;const i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,o=Math.log(i/s)/Math.log(t);return function(u){return i/Math.pow(t,u*o)}}getRotation(){return this.get(Zn.ROTATION)}getValueForResolutionFunction(t){const i=Math.log(t||2),s=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,u=Math.log(s/o)/i;return function(f){return Math.log(s/f)/i/u}}getViewportSizeMinusPadding_(t){let i=this.getViewportSize_(t);const s=this.padding_;return s&&(i=[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]),i}getState(){const t=this.getProjection(),i=this.getResolution(),s=this.getRotation();let o=this.getCenterInternal();const u=this.padding_;if(u){const f=this.getViewportSizeMinusPadding_();o=pg(o,this.getViewportSize_(),[f[0]/2+u[3],f[1]/2+u[0]],i,s)}return{center:o.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:s,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t}getZoomForResolution(t){let i=this.minZoom_||0,s,o;if(this.resolutions_){const u=cm(this.resolutions_,t,1);i=u,s=this.resolutions_[u],u==this.resolutions_.length-1?o=2:o=s/this.resolutions_[u+1]}else s=this.maxResolution_,o=this.zoomFactor_;return i+Math.log(s/t)/Math.log(o)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const i=Ke(Math.floor(t),0,this.resolutions_.length-2),s=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(s,Ke(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,i){let s;if(Vt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){Vt(!gm(t),25);const o=Jr(t,this.getProjection());s=uv(o)}else if(t.getType()==="Circle"){const o=Jr(t.getExtent(),this.getProjection());s=uv(o),s.rotate(this.getRotation(),qa(o))}else s=t;this.fitInternal(s,i)}rotatedExtentForGeometry(t){const i=this.getRotation(),s=Math.cos(i),o=Math.sin(-i),u=t.getFlatCoordinates(),f=t.getStride();let d=1/0,g=1/0,p=-1/0,v=-1/0;for(let E=0,w=u.length;E<w;E+=f){const T=u[E]*s-u[E+1]*o,b=u[E]*o+u[E+1]*s;d=Math.min(d,T),g=Math.min(g,b),p=Math.max(p,T),v=Math.max(v,b)}return[d,g,p,v]}fitInternal(t,i){i=i||{};let s=i.size;s||(s=this.getViewportSizeMinusPadding_());const o=i.padding!==void 0?i.padding:[0,0,0,0],u=i.nearest!==void 0?i.nearest:!1;let f;i.minResolution!==void 0?f=i.minResolution:i.maxZoom!==void 0?f=this.getResolutionForZoom(i.maxZoom):f=0;const d=this.rotatedExtentForGeometry(t);let g=this.getResolutionForExtentInternal(d,[s[0]-o[1]-o[3],s[1]-o[0]-o[2]]);g=isNaN(g)?f:Math.max(g,f),g=this.getConstrainedResolution(g,u?0:1);const p=this.getRotation(),v=Math.sin(p),E=Math.cos(p),w=qa(d);w[0]+=(o[1]-o[3])/2*g,w[1]+=(o[0]-o[2])/2*g;const T=w[0]*E-w[1]*v,b=w[1]*E+w[0]*v,O=this.getConstrainedCenter([T,b],g),D=i.callback?i.callback:sl;i.duration!==void 0?this.animateInternal({resolution:g,center:O,duration:i.duration,easing:i.easing},D):(this.targetResolution_=g,this.targetCenter_=O,this.applyTargetState_(!1,!0),Ch(D,!0))}centerOn(t,i,s){this.centerOnInternal(ni(t,this.getProjection()),i,s)}centerOnInternal(t,i,s){this.setCenterInternal(pg(t,i,s,this.getResolution(),this.getRotation()))}calculateCenterShift(t,i,s,o){let u;const f=this.padding_;if(f&&t){const d=this.getViewportSizeMinusPadding_(-s),g=pg(t,o,[d[0]/2+f[3],d[1]/2+f[0]],i,s);u=[t[0]-g[0],t[1]-g[1]]}return u}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const i=Du(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])}adjustCenterInternal(t){const i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])}adjustResolution(t,i){i=i&&ni(i,this.getProjection()),this.adjustResolutionInternal(t,i)}adjustResolutionInternal(t,i){const s=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),u=this.constraints_.resolution(this.targetResolution_*t,0,o,s);i&&(this.targetCenter_=this.calculateCenterZoom(u,i)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)}adjustRotation(t,i){i&&(i=ni(i,this.getProjection())),this.adjustRotationInternal(t,i)}adjustRotationInternal(t,i){const s=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,s);i&&(this.targetCenter_=this.calculateCenterRotate(o,i)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ni(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,i){const s=this.getAnimating()||this.getInteracting()||i,o=this.constraints_.rotation(this.targetRotation_,s),u=this.getViewportSize_(o),f=this.constraints_.resolution(this.targetResolution_,0,u,s),d=this.constraints_.center(this.targetCenter_,f,u,s,this.calculateCenterShift(this.targetCenter_,f,o,u));this.get(Zn.ROTATION)!==o&&this.set(Zn.ROTATION,o),this.get(Zn.RESOLUTION)!==f&&(this.set(Zn.RESOLUTION,f),this.set("zoom",this.getZoom(),!0)),(!d||!this.get(Zn.CENTER)||!Un(this.get(Zn.CENTER),d))&&this.set(Zn.CENTER,d),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,i,s){t=t!==void 0?t:200;const o=i||0,u=this.constraints_.rotation(this.targetRotation_),f=this.getViewportSize_(u),d=this.constraints_.resolution(this.targetResolution_,o,f),g=this.constraints_.center(this.targetCenter_,d,f,!1,this.calculateCenterShift(this.targetCenter_,d,u,f));if(t===0&&!this.cancelAnchor_){this.targetResolution_=d,this.targetRotation_=u,this.targetCenter_=g,this.applyTargetState_();return}s=s||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==d||this.getRotation()!==u||!this.getCenterInternal()||!Un(this.getCenterInternal(),g))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:u,center:g,resolution:d,duration:t,easing:dl,anchor:s}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Mi.INTERACTING,1)}endInteraction(t,i,s){s=s&&ni(s,this.getProjection()),this.endInteractionInternal(t,i,s)}endInteractionInternal(t,i,s){this.getInteracting()&&(this.setHint(Mi.INTERACTING,-1),this.resolveConstraints(t,i,s))}getConstrainedCenter(t,i){const s=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),s)}getConstrainedZoom(t,i){const s=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(s,i))}getConstrainedResolution(t,i){i=i||0;const s=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,s)}}function Ch(a,t){setTimeout(function(){a(t)},0)}function QC(a){if(a.extent!==void 0){const i=a.smoothExtentConstraint!==void 0?a.smoothExtentConstraint:!0;return pv(a.extent,a.constrainOnlyCenter,i)}const t=vm(a.projection,"EPSG:3857");if(a.multiWorld!==!0&&t.isGlobal()){const i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,pv(i,!1,!1)}return HC}function JC(a){let t,i,s,f=a.minZoom!==void 0?a.minZoom:_g,d=a.maxZoom!==void 0?a.maxZoom:28;const g=a.zoomFactor!==void 0?a.zoomFactor:2,p=a.multiWorld!==void 0?a.multiWorld:!1,v=a.smoothResolutionConstraint!==void 0?a.smoothResolutionConstraint:!0,E=a.showFullExtent!==void 0?a.showFullExtent:!1,w=vm(a.projection,"EPSG:3857"),T=w.getExtent();let b=a.constrainOnlyCenter,O=a.extent;if(!p&&!O&&w.isGlobal()&&(b=!1,O=T),a.resolutions!==void 0){const D=a.resolutions;i=D[f],s=D[d]!==void 0?D[d]:D[D.length-1],a.constrainResolution?t=YC(D,v,!b&&O,E):t=yv(i,s,v,!b&&O,E)}else{const P=(T?Math.max(we(T),fs(T)):360*mm.degrees/w.getMetersPerUnit())/Dm/Math.pow(2,_g),k=P/Math.pow(2,28-_g);i=a.maxResolution,i!==void 0?f=0:i=P/Math.pow(g,f),s=a.minResolution,s===void 0&&(a.maxZoom!==void 0?a.maxResolution!==void 0?s=i/Math.pow(g,d):s=P/Math.pow(g,d):s=k),d=f+Math.floor(Math.log(i/s)/Math.log(g)),s=i/Math.pow(g,d-f),a.constrainResolution?t=XC(g,i,s,v,!b&&O,E):t=yv(i,s,v,!b&&O,E)}return{constraint:t,maxResolution:i,minResolution:s,minZoom:f,zoomFactor:g}}function $C(a){if(a.enableRotation!==void 0?a.enableRotation:!0){const i=a.constrainRotation;return i===void 0||i===!0?qC():i===!1?vv:typeof i=="number"?VC(i):vv}return Nm}function tT(a){return!(a.sourceCenter&&a.targetCenter&&!Un(a.sourceCenter,a.targetCenter)||a.sourceResolution!==a.targetResolution||a.sourceRotation!==a.targetRotation)}function pg(a,t,i,s,o){const u=Math.cos(-o);let f=Math.sin(-o),d=a[0]*u-a[1]*f,g=a[1]*u+a[0]*f;d+=(t[0]/2-i[0])*s,g+=(i[1]-t[1]/2)*s,f=-f;const p=d*u-g*f,v=g*u+d*f;return[p,v]}class df extends tx{constructor(t){const i=Object.assign({},t);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(ue.SOURCE,this.handleSourcePropertyChange_);const s=t.source?t.source:null;this.setSource(s)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(ue.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ee(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=ee(t,Gt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let i;t instanceof os?i={viewState:t.getState(),extent:t.calculateExtent()}:i=t;const s=this.getExtent();return this.getVisible()&&Im(this.getLayerState(),i.viewState)&&(!s||Zi(s,i.extent))}getAttributions(t){if(!this.isVisible(t))return[];let i;const s=this.getSource();if(s&&(i=s.getAttributions()),!i)return[];const o=t instanceof os?t.getViewStateAndExtent():t;let u=i(o);return Array.isArray(u)||(u=[u]),u}render(t,i){const s=this.getRenderer();if(s.prepareFrame(t))return this.rendered=!0,s.renderFrame(t,i)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(ue.MAP,t)}getMapInternal(){return this.get(ue.MAP)}setMap(t){this.mapPrecomposeKey_&&(Ee(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Ee(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ee(t,ea.PRECOMPOSE,function(i){const o=i.frameState.layerStatesArray,u=this.getLayerState(!1);Vt(!o.some(function(f){return f.layer===u.layer}),67),o.push(u)},this),this.mapRenderKey_=ee(this,Gt.CHANGE,t.render,t),this.changed())}setSource(t){this.set(ue.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Im(a,t){if(!a.visible)return!1;const i=t.resolution;if(i<a.minResolution||i>=a.maxResolution)return!1;const s=t.zoom;return s>a.minZoom&&s<=a.maxZoom}function eT(a,t,i,s,o){ix(a,t,i||0,s||a.length-1,o||iT)}function ix(a,t,i,s,o){for(;s>i;){if(s-i>600){var u=s-i+1,f=t-i+1,d=Math.log(u),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(u-g)/u)*(f-u/2<0?-1:1),v=Math.max(i,Math.floor(t-f*g/u+p)),E=Math.min(s,Math.floor(t+(u-f)*g/u+p));ix(a,t,v,E,o)}var w=a[t],T=i,b=s;for(vu(a,i,t),o(a[s],w)>0&&vu(a,i,s);T<b;){for(vu(a,T,b),T++,b--;o(a[T],w)<0;)T++;for(;o(a[b],w)>0;)b--}o(a[i],w)===0?vu(a,i,b):(b++,vu(a,b,s)),b<=t&&(i=b+1),t<=b&&(s=b-1)}}function vu(a,t,i){var s=a[t];a[t]=a[i],a[i]=s}function iT(a,t){return a<t?-1:a>t?1:0}let nx=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let i=this.data;const s=[];if(!bh(t,i))return s;const o=this.toBBox,u=[];for(;i;){for(let f=0;f<i.children.length;f++){const d=i.children[f],g=i.leaf?o(d):d;bh(t,g)&&(i.leaf?s.push(d):vg(t,g)?this._all(d,s):u.push(d))}i=u.pop()}return s}collides(t){let i=this.data;if(!bh(t,i))return!1;const s=[];for(;i;){for(let o=0;o<i.children.length;o++){const u=i.children[o],f=i.leaf?this.toBBox(u):u;if(bh(t,f)){if(i.leaf||vg(t,f))return!0;s.push(u)}}i=s.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let s=0;s<t.length;s++)this.insert(t[s]);return this}let i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Wo([]),this}remove(t,i){if(!t)return this;let s=this.data;const o=this.toBBox(t),u=[],f=[];let d,g,p;for(;s||u.length;){if(s||(s=u.pop(),g=u[u.length-1],d=f.pop(),p=!0),s.leaf){const v=nT(t,s.children,i);if(v!==-1)return s.children.splice(v,1),u.push(s),this._condense(u),this}!p&&!s.leaf&&vg(s,o)?(u.push(s),f.push(d),d=0,g=s,s=s.children[0]):g?(d++,s=g.children[d],p=!1):s=null}return this}toBBox(t){return t}compareMinX(t,i){return t.minX-i.minX}compareMinY(t,i){return t.minY-i.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){const s=[];for(;t;)t.leaf?i.push(...t.children):s.push(...t.children),t=s.pop();return i}_build(t,i,s,o){const u=s-i+1;let f=this._maxEntries,d;if(u<=f)return d=Wo(t.slice(i,s+1)),Yo(d,this.toBBox),d;o||(o=Math.ceil(Math.log(u)/Math.log(f)),f=Math.ceil(u/Math.pow(f,o-1))),d=Wo([]),d.leaf=!1,d.height=o;const g=Math.ceil(u/f),p=g*Math.ceil(Math.sqrt(f));xv(t,i,s,p,this.compareMinX);for(let v=i;v<=s;v+=p){const E=Math.min(v+p-1,s);xv(t,v,E,g,this.compareMinY);for(let w=v;w<=E;w+=g){const T=Math.min(w+g-1,E);d.children.push(this._build(t,w,T,o-1))}}return Yo(d,this.toBBox),d}_chooseSubtree(t,i,s,o){for(;o.push(i),!(i.leaf||o.length-1===s);){let u=1/0,f=1/0,d;for(let g=0;g<i.children.length;g++){const p=i.children[g],v=yg(p),E=aT(t,p)-v;E<f?(f=E,u=v<u?v:u,d=p):E===f&&v<u&&(u=v,d=p)}i=d||i.children[0]}return i}_insert(t,i,s){const o=s?t:this.toBBox(t),u=[],f=this._chooseSubtree(o,this.data,i,u);for(f.children.push(t),wu(f,o);i>=0&&u[i].children.length>this._maxEntries;)this._split(u,i),i--;this._adjustParentBBoxes(o,u,i)}_split(t,i){const s=t[i],o=s.children.length,u=this._minEntries;this._chooseSplitAxis(s,u,o);const f=this._chooseSplitIndex(s,u,o),d=Wo(s.children.splice(f,s.children.length-f));d.height=s.height,d.leaf=s.leaf,Yo(s,this.toBBox),Yo(d,this.toBBox),i?t[i-1].children.push(d):this._splitRoot(s,d)}_splitRoot(t,i){this.data=Wo([t,i]),this.data.height=t.height+1,this.data.leaf=!1,Yo(this.data,this.toBBox)}_chooseSplitIndex(t,i,s){let o,u=1/0,f=1/0;for(let d=i;d<=s-i;d++){const g=Su(t,0,d,this.toBBox),p=Su(t,d,s,this.toBBox),v=oT(g,p),E=yg(g)+yg(p);v<u?(u=v,o=d,f=E<f?E:f):v===u&&E<f&&(f=E,o=d)}return o||s-i}_chooseSplitAxis(t,i,s){const o=t.leaf?this.compareMinX:sT,u=t.leaf?this.compareMinY:rT,f=this._allDistMargin(t,i,s,o),d=this._allDistMargin(t,i,s,u);f<d&&t.children.sort(o)}_allDistMargin(t,i,s,o){t.children.sort(o);const u=this.toBBox,f=Su(t,0,i,u),d=Su(t,s-i,s,u);let g=Th(f)+Th(d);for(let p=i;p<s-i;p++){const v=t.children[p];wu(f,t.leaf?u(v):v),g+=Th(f)}for(let p=s-i-1;p>=i;p--){const v=t.children[p];wu(d,t.leaf?u(v):v),g+=Th(d)}return g}_adjustParentBBoxes(t,i,s){for(let o=s;o>=0;o--)wu(i[o],t)}_condense(t){for(let i=t.length-1,s;i>=0;i--)t[i].children.length===0?i>0?(s=t[i-1].children,s.splice(s.indexOf(t[i]),1)):this.clear():Yo(t[i],this.toBBox)}};function nT(a,t,i){if(!i)return t.indexOf(a);for(let s=0;s<t.length;s++)if(i(a,t[s]))return s;return-1}function Yo(a,t){Su(a,0,a.children.length,t,a)}function Su(a,t,i,s,o){o||(o=Wo(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let u=t;u<i;u++){const f=a.children[u];wu(o,a.leaf?s(f):f)}return o}function wu(a,t){return a.minX=Math.min(a.minX,t.minX),a.minY=Math.min(a.minY,t.minY),a.maxX=Math.max(a.maxX,t.maxX),a.maxY=Math.max(a.maxY,t.maxY),a}function sT(a,t){return a.minX-t.minX}function rT(a,t){return a.minY-t.minY}function yg(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function Th(a){return a.maxX-a.minX+(a.maxY-a.minY)}function aT(a,t){return(Math.max(t.maxX,a.maxX)-Math.min(t.minX,a.minX))*(Math.max(t.maxY,a.maxY)-Math.min(t.minY,a.minY))}function oT(a,t){const i=Math.max(a.minX,t.minX),s=Math.max(a.minY,t.minY),o=Math.min(a.maxX,t.maxX),u=Math.min(a.maxY,t.maxY);return Math.max(0,o-i)*Math.max(0,u-s)}function vg(a,t){return a.minX<=t.minX&&a.minY<=t.minY&&t.maxX<=a.maxX&&t.maxY<=a.maxY}function bh(a,t){return t.minX<=a.maxX&&t.minY<=a.maxY&&t.maxX>=a.minX&&t.maxY>=a.minY}function Wo(a){return{children:a,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function xv(a,t,i,s,o){const u=[t,i];for(;u.length;){if(i=u.pop(),t=u.pop(),i-t<=s)continue;const f=t+Math.ceil((i-t)/s/2)*s;eT(a,f,t,i,o),u.push(t,f,f,i)}}class lT{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const i in this.cache_){const s=this.cache_[i];(t++&3)===0&&!s.hasListener()&&(delete this.cache_[i],--this.cacheSize_)}}}get(t,i,s){const o=Ev(t,i,s);return o in this.cache_?this.cache_[o]:null}set(t,i,s,o){const u=Ev(t,i,s);this.cache_[u]=o,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Ev(a,t,i){const s=i?V0(i):"null";return t+":"+a+":"+s}const Xh=new lT;function sx(a,t,i){const s=a;let o=!0,u=!1,f=!1;const d=[kh(s,Gt.LOAD,function(){f=!0,u||t()})];return s.src&&Lw?(u=!0,s.decode().then(function(){o&&t()}).catch(function(g){o&&(f?t():i())})):d.push(kh(s,Gt.ERROR,i)),function(){o=!1,d.forEach(Ee)}}let xu=null;class uT extends tf{constructor(t,i,s,o,u,f){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=o,this.canvas_={},this.color_=f,this.unlisten_=null,this.imageState_=u,this.size_=s,this.src_=i,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===si.LOADED){xu||(xu=Ui(1,1,void 0,{willReadFrequently:!0})),xu.drawImage(this.image_,0,0);try{xu.getImageData(0,0,1,1),this.tainted_=!1}catch{xu=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Gt.CHANGE)}handleImageError_(){this.imageState_=si.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=si.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],i=this.size_[1],s=Ui(t,i);s.fillRect(0,0,t,i),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===si.IDLE){this.image_||this.initializeImage_(),this.imageState_=si.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=sx(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==si.LOADED)return;const i=this.image_,s=document.createElement("canvas");s.width=Math.ceil(i.width*t),s.height=Math.ceil(i.height*t);const o=s.getContext("2d");o.scale(t,t),o.drawImage(i,0,0),o.globalCompositeOperation="multiply",o.fillStyle=V0(this.color_),o.fillRect(0,0,s.width/t,s.height/t),o.globalCompositeOperation="destination-in",o.drawImage(i,0,0),this.canvas_[t]=s}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function cT(a,t,i,s,o,u){let f=Xh.get(t,s,u);return f||(f=new uT(a,t,i,s,o,u),Xh.set(t,s,u,f)),f}class gf extends uf{constructor(t){t=t||{};const i=t.opacity!==void 0?t.opacity:1,s=t.rotation!==void 0?t.rotation:0,o=t.scale!==void 0?t.scale:1,u=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:i,rotation:s,scale:o,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:u,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const f=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let d=t.src;Vt(!(d!==void 0&&f),4),Vt(!f||f&&this.imgSize_,5),(d===void 0||d.length===0)&&f&&(d=f.src||Bt(f)),Vt(d!==void 0&&d.length>0,6),Vt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),69);const g=t.src!==void 0?si.IDLE:si.LOADED;if(this.color_=t.color!==void 0?Zh(t.color):null,this.iconImage_=cT(f,d,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,g,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.width_=t.width,this.height_=t.height,this.width_!==void 0||this.height_!==void 0){const p=this.getImage(1),v=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};p.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):p.addEventListener("load",v)}}clone(){let t=this.getScale();return t=Array.isArray(t)?t.slice():t,(this.width_!==void 0||this.height_!==void 0)&&(t=void 0),new gf({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(t,i){const s=this.getImage(1);t!==void 0&&i!==void 0?super.setScale([t/s.width,i/s.height]):t!==void 0?super.setScale([t/s.width,t/s.width]):i!==void 0?super.setScale([i/s.height,i/s.height]):super.setScale([1,1])}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const o=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!o)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=o[0]),this.anchorYUnits_=="fraction"&&(t[1]*=o[1])}if(this.anchorOrigin_!="top-left"){if(!o)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+o[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+o[1])}this.normalizedAnchor_=t}const i=this.getDisplacement(),s=this.getScaleArray();return[t[0]-i[0]/s[0],t[1]+i[1]/s[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),s=this.iconImage_.getSize();if(!i||!s)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=s[0]-i[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=s[1]-i[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(t){this.width_=t,this.updateScaleFromWidthAndHeight(t,this.height_)}setHeight(t){this.height_=t,this.updateScaleFromWidthAndHeight(this.width_,t)}setScale(t){super.setScale(t);const i=this.getImage(1);if(i){const s=Array.isArray(t)?t[0]:t;s!==void 0&&(this.width_=s*i.width);const o=Array.isArray(t)?t[1]:t;o!==void 0&&(this.height_=o*i.height)}}listenImageChange(t){this.iconImage_.addEventListener(Gt.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Gt.CHANGE,t)}}function Sv(a){return new Ie({fill:Zu(a,""),stroke:ju(a,""),text:hT(a),image:fT(a)})}function Zu(a,t){const i=a[t+"fill-color"];if(i)return new ii({color:i})}function ju(a,t){const i=a[t+"stroke-width"],s=a[t+"stroke-color"];if(!(!i&&!s))return new Ve({width:i,color:s,lineCap:a[t+"stroke-line-cap"],lineJoin:a[t+"stroke-line-join"],lineDash:a[t+"stroke-line-dash"],lineDashOffset:a[t+"stroke-line-dash-offset"],miterLimit:a[t+"stroke-miter-limit"]})}function hT(a){const t=a["text-value"];return t?new Om({text:t,font:a["text-font"],maxAngle:a["text-max-angle"],offsetX:a["text-offset-x"],offsetY:a["text-offset-y"],overflow:a["text-overflow"],placement:a["text-placement"],repeat:a["text-repeat"],scale:a["text-scale"],rotateWithView:a["text-rotate-with-view"],rotation:a["text-rotation"],textAlign:a["text-align"],justify:a["text-justify"],textBaseline:a["text-baseline"],padding:a["text-padding"],fill:Zu(a,"text-"),backgroundFill:Zu(a,"text-background-"),stroke:ju(a,"text-"),backgroundStroke:ju(a,"text-background-")}):void 0}function fT(a){const t=a["icon-src"],i=a["icon-img"];if(t||i)return new gf({src:t,img:i,imgSize:a["icon-img-size"],anchor:a["icon-anchor"],anchorOrigin:a["icon-anchor-origin"],anchorXUnits:a["icon-anchor-x-units"],anchorYUnits:a["icon-anchor-y-units"],color:a["icon-color"],crossOrigin:a["icon-cross-origin"],offset:a["icon-offset"],displacement:a["icon-displacement"],opacity:a["icon-opacity"],scale:a["icon-scale"],rotation:a["icon-rotation"],rotateWithView:a["icon-rotate-with-view"],size:a["icon-size"],declutterMode:a["icon-declutter-mode"]});const s=a["shape-points"];if(s){const u="shape-";return new ff({points:s,fill:Zu(a,u),stroke:ju(a,u),radius:a["shape-radius"],radius1:a["shape-radius1"],radius2:a["shape-radius2"],angle:a["shape-angle"],displacement:a["shape-displacement"],rotation:a["shape-rotation"],rotateWithView:a["shape-rotate-with-view"],scale:a["shape-scale"],declutterMode:a["shape-declutter-mode"]})}const o=a["circle-radius"];if(o){const u="circle-";return new An({radius:o,fill:Zu(a,u),stroke:ju(a,u),displacement:a["circle-displacement"],scale:a["circle-scale"],rotation:a["circle-rotation"],rotateWithView:a["circle-rotate-with-view"],declutterMode:a["circle-declutter-mode"]})}}const wv={RENDER_ORDER:"renderOrder"};class dT extends df{constructor(t){t=t||{};const i=Object.assign({},t);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(wv.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new nx(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(wv.RENDER_ORDER,t)}setStyle(t){let i;if(t===void 0)i=ZC;else if(t===null)i=null;else if(typeof t=="function")i=t;else if(t instanceof Ie)i=t;else if(Array.isArray(t)){const s=t.length,o=new Array(s);for(let u=0;u<s;++u){const f=t[u];f instanceof Ie?o[u]=f:o[u]=Sv(f)}i=o}else i=Sv(t);this.style_=i,this.styleFunction_=t===null?void 0:BC(this.style_),this.changed()}}const At={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Rh=[At.FILL],ta=[At.STROKE],Za=[At.BEGIN_PATH],Cv=[At.CLOSE_PATH];class rx{drawCustom(t,i,s,o){}drawGeometry(t){}setStyle(t){}drawCircle(t,i){}drawFeature(t,i){}drawGeometryCollection(t,i){}drawLineString(t,i){}drawMultiLineString(t,i){}drawMultiPoint(t,i){}drawMultiPolygon(t,i){}drawPoint(t,i){}drawPolygon(t,i){}drawText(t,i){}setFillStrokeStyle(t,i){}setImageStyle(t,i){}setTextStyle(t,i){}}class Wu extends rx{constructor(t,i,s,o){super(),this.tolerance=t,this.maxExtent=i,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=s,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const i=this.pixelRatio;return i==1?t:t.map(function(s){return s*i})}appendFlatPointCoordinates(t,i){const s=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,u=this.coordinates;let f=u.length;for(let d=0,g=t.length;d<g;d+=i)o[0]=t[d],o[1]=t[d+1],nf(s,o)&&(u[f++]=o[0],u[f++]=o[1]);return f}appendFlatLineCoordinates(t,i,s,o,u,f){const d=this.coordinates;let g=d.length;const p=this.getBufferedMaxExtent();f&&(i+=o);let v=t[i],E=t[i+1];const w=this.tmpCoordinate_;let T=!0,b,O,D;for(b=i+o;b<s;b+=o)w[0]=t[b],w[1]=t[b+1],D=Ig(p,w),D!==O?(T&&(d[g++]=v,d[g++]=E,T=!1),d[g++]=w[0],d[g++]=w[1]):D===gi.INTERSECTING?(d[g++]=w[0],d[g++]=w[1],T=!1):T=!0,v=w[0],E=w[1],O=D;return(u&&T||b===i+o)&&(d[g++]=v,d[g++]=E),g}drawCustomCoordinates_(t,i,s,o,u){for(let f=0,d=s.length;f<d;++f){const g=s[f],p=this.appendFlatLineCoordinates(t,i,g,o,!1,!1);u.push(p),i=g}return i}drawCustom(t,i,s,o){this.beginGeometry(t,i);const u=t.getType(),f=t.getStride(),d=this.coordinates.length;let g,p,v,E,w;switch(u){case"MultiPolygon":g=t.getOrientedFlatCoordinates(),E=[];const T=t.getEndss();w=0;for(let b=0,O=T.length;b<O;++b){const D=[];w=this.drawCustomCoordinates_(g,w,T[b],f,D),E.push(D)}this.instructions.push([At.CUSTOM,d,E,t,s,jg]),this.hitDetectionInstructions.push([At.CUSTOM,d,E,t,o||s,jg]);break;case"Polygon":case"MultiLineString":v=[],g=u=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),w=this.drawCustomCoordinates_(g,0,t.getEnds(),f,v),this.instructions.push([At.CUSTOM,d,v,t,s,Pu]),this.hitDetectionInstructions.push([At.CUSTOM,d,v,t,o||s,Pu]);break;case"LineString":case"Circle":g=t.getFlatCoordinates(),p=this.appendFlatLineCoordinates(g,0,g.length,f,!1,!1),this.instructions.push([At.CUSTOM,d,p,t,s,$r]),this.hitDetectionInstructions.push([At.CUSTOM,d,p,t,o||s,$r]);break;case"MultiPoint":g=t.getFlatCoordinates(),p=this.appendFlatPointCoordinates(g,f),p>d&&(this.instructions.push([At.CUSTOM,d,p,t,s,$r]),this.hitDetectionInstructions.push([At.CUSTOM,d,p,t,o||s,$r]));break;case"Point":g=t.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),p=this.coordinates.length,this.instructions.push([At.CUSTOM,d,p,t,s]),this.hitDetectionInstructions.push([At.CUSTOM,d,p,t,o||s]);break}this.endGeometry(i)}beginGeometry(t,i){this.beginGeometryInstruction1_=[At.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[At.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let i;const s=t.length;let o,u,f=-1;for(i=0;i<s;++i)o=t[i],u=o[0],u==At.END_GEOMETRY?f=i:u==At.BEGIN_GEOMETRY&&(o[2]=i,yw(this.hitDetectionInstructions,f,i),f=-1)}setFillStrokeStyle(t,i){const s=this.state;if(t){const o=t.getColor();s.fillStyle=us(o||Ks)}else s.fillStyle=void 0;if(i){const o=i.getColor();s.strokeStyle=us(o||Fu);const u=i.getLineCap();s.lineCap=u!==void 0?u:Uh;const f=i.getLineDash();s.lineDash=f?f.slice():Nu;const d=i.getLineDashOffset();s.lineDashOffset=d||Iu;const g=i.getLineJoin();s.lineJoin=g!==void 0?g:ol;const p=i.getWidth();s.lineWidth=p!==void 0?p:Bu;const v=i.getMiterLimit();s.miterLimit=v!==void 0?v:ku,s.lineWidth>this.maxLineWidth&&(this.maxLineWidth=s.lineWidth,this.bufferedMaxExtent_=null)}else s.strokeStyle=void 0,s.lineCap=void 0,s.lineDash=null,s.lineDashOffset=void 0,s.lineJoin=void 0,s.lineWidth=void 0,s.miterLimit=void 0}createFill(t){const i=t.fillStyle,s=[At.SET_FILL_STYLE,i];return typeof i!="string"&&s.push(!0),s}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[At.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,i){const s=t.fillStyle;(typeof s!="string"||t.currentFillStyle!=s)&&(s!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=s)}updateStrokeStyle(t,i){const s=t.strokeStyle,o=t.lineCap,u=t.lineDash,f=t.lineDashOffset,d=t.lineJoin,g=t.lineWidth,p=t.miterLimit;(t.currentStrokeStyle!=s||t.currentLineCap!=o||u!=t.currentLineDash&&!tr(t.currentLineDash,u)||t.currentLineDashOffset!=f||t.currentLineJoin!=d||t.currentLineWidth!=g||t.currentMiterLimit!=p)&&(s!==void 0&&i.call(this,t),t.currentStrokeStyle=s,t.currentLineCap=o,t.currentLineDash=u,t.currentLineDashOffset=f,t.currentLineJoin=d,t.currentLineWidth=g,t.currentMiterLimit=p)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[At.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=E0(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;ef(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class gT extends Wu{constructor(t,i,s,o){super(t,i,s,o),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,i){if(!this.image_)return;this.beginGeometry(t,i);const s=t.getFlatCoordinates(),o=t.getStride(),u=this.coordinates.length,f=this.appendFlatPointCoordinates(s,o);this.instructions.push([At.DRAW_IMAGE,u,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([At.DRAW_IMAGE,u,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}drawMultiPoint(t,i){if(!this.image_)return;this.beginGeometry(t,i);const s=t.getFlatCoordinates(),o=t.getStride(),u=this.coordinates.length,f=this.appendFlatPointCoordinates(s,o);this.instructions.push([At.DRAW_IMAGE,u,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([At.DRAW_IMAGE,u,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){const s=t.getAnchor(),o=t.getSize(),u=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=s[0],this.anchorY_=s[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=u[0],this.originY_=u[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}class mT extends Wu{constructor(t,i,s,o){super(t,i,s,o)}drawFlatCoordinates_(t,i,s,o){const u=this.coordinates.length,f=this.appendFlatLineCoordinates(t,i,s,o,!1,!1),d=[At.MOVE_TO_LINE_TO,u,f];return this.instructions.push(d),this.hitDetectionInstructions.push(d),s}drawLineString(t,i){const s=this.state,o=s.strokeStyle,u=s.lineWidth;if(o===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Nu,Iu],Za);const f=t.getFlatCoordinates(),d=t.getStride();this.drawFlatCoordinates_(f,0,f.length,d),this.hitDetectionInstructions.push(ta),this.endGeometry(i)}drawMultiLineString(t,i){const s=this.state,o=s.strokeStyle,u=s.lineWidth;if(o===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset],Za);const f=t.getEnds(),d=t.getFlatCoordinates(),g=t.getStride();let p=0;for(let v=0,E=f.length;v<E;++v)p=this.drawFlatCoordinates_(d,p,f[v],g);this.hitDetectionInstructions.push(ta),this.endGeometry(i)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ta),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ta),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Za)}}class Tv extends Wu{constructor(t,i,s,o){super(t,i,s,o)}drawFlatCoordinatess_(t,i,s,o){const u=this.state,f=u.fillStyle!==void 0,d=u.strokeStyle!==void 0,g=s.length;this.instructions.push(Za),this.hitDetectionInstructions.push(Za);for(let p=0;p<g;++p){const v=s[p],E=this.coordinates.length,w=this.appendFlatLineCoordinates(t,i,v,o,!0,!d),T=[At.MOVE_TO_LINE_TO,E,w];this.instructions.push(T),this.hitDetectionInstructions.push(T),d&&(this.instructions.push(Cv),this.hitDetectionInstructions.push(Cv)),i=v}return f&&(this.instructions.push(Rh),this.hitDetectionInstructions.push(Rh)),d&&(this.instructions.push(ta),this.hitDetectionInstructions.push(ta)),i}drawCircle(t,i){const s=this.state,o=s.fillStyle,u=s.strokeStyle;if(o===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_FILL_STYLE,Ks]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);const f=t.getFlatCoordinates(),d=t.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(f,0,f.length,d,!1,!1);const p=[At.CIRCLE,g];this.instructions.push(Za,p),this.hitDetectionInstructions.push(Za,p),s.fillStyle!==void 0&&(this.instructions.push(Rh),this.hitDetectionInstructions.push(Rh)),s.strokeStyle!==void 0&&(this.instructions.push(ta),this.hitDetectionInstructions.push(ta)),this.endGeometry(i)}drawPolygon(t,i){const s=this.state,o=s.fillStyle,u=s.strokeStyle;if(o===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_FILL_STYLE,Ks]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);const f=t.getEnds(),d=t.getOrientedFlatCoordinates(),g=t.getStride();this.drawFlatCoordinatess_(d,0,f,g),this.endGeometry(i)}drawMultiPolygon(t,i){const s=this.state,o=s.fillStyle,u=s.strokeStyle;if(o===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_FILL_STYLE,Ks]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([At.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);const f=t.getEndss(),d=t.getOrientedFlatCoordinates(),g=t.getStride();let p=0;for(let v=0,E=f.length;v<E;++v)p=this.drawFlatCoordinatess_(d,p,f[v],g);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const i=this.coordinates;for(let s=0,o=i.length;s<o;++s)i[s]=Ia(i[s],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function _T(a,t,i,s,o){const u=[];let f=i,d=0,g=t.slice(i,2);for(;d<a&&f+o<s;){const[p,v]=g.slice(-2),E=t[f+o],w=t[f+o+1],T=Math.sqrt((E-p)*(E-p)+(w-v)*(w-v));if(d+=T,d>=a){const b=(a-d+T)/T,O=dn(p,E,b),D=dn(v,w,b);g.push(O,D),u.push(g),g=[O,D],d==a&&(f+=o),d=0}else if(d<a)g.push(t[f+o],t[f+o+1]),f+=o;else{const b=T-d,O=dn(p,E,b/T),D=dn(v,w,b/T);g.push(O,D),u.push(g),g=[O,D],d=0,f+=o}}return d>0&&u.push(g),u}function pT(a,t,i,s,o){let u=i,f=i,d=0,g=0,p=i,v,E,w,T,b,O,D,P,k,z;for(E=i;E<s;E+=o){const j=t[E],X=t[E+1];b!==void 0&&(k=j-b,z=X-O,T=Math.sqrt(k*k+z*z),D!==void 0&&(g+=w,v=Math.acos((D*k+P*z)/(w*T)),v>a&&(g>d&&(d=g,u=p,f=E),g=0,p=E-o)),w=T,D=k,P=z),b=j,O=X}return g+=T,g>d?[p,E]:[u,f]}const Ru={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class yT extends Wu{constructor(t,i,s,o){super(t,i,s,o),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,i){const s=this.textFillState_,o=this.textStrokeState_,u=this.textState_;if(this.text_===""||!u||!s&&!o)return;const f=this.coordinates;let d=f.length;const g=t.getType();let p=null,v=t.getStride();if(u.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Zi(this.getBufferedMaxExtent(),t.getExtent()))return;let E;if(p=t.getFlatCoordinates(),g=="LineString")E=[p.length];else if(g=="MultiLineString")E=t.getEnds();else if(g=="Polygon")E=t.getEnds().slice(0,1);else if(g=="MultiPolygon"){const O=t.getEndss();E=[];for(let D=0,P=O.length;D<P;++D)E.push(O[D][0])}this.beginGeometry(t,i);const w=u.repeat,T=w?void 0:u.textAlign;let b=0;for(let O=0,D=E.length;O<D;++O){let P;w?P=_T(w*this.resolution,p,b,E[O],v):P=[p.slice(b,E[O])];for(let k=0,z=P.length;k<z;++k){const j=P[k];let X=0,$=j.length;if(T==null){const rt=pT(u.maxAngle,j,0,j.length,2);X=rt[0],$=rt[1]}for(let rt=X;rt<$;rt+=v)f.push(j[rt],j[rt+1]);const it=f.length;b=E[O],this.drawChars_(d,it),d=it}}this.endGeometry(i)}else{let E=u.overflow?null:[];switch(g){case"Point":case"MultiPoint":p=t.getFlatCoordinates();break;case"LineString":p=t.getFlatMidpoint();break;case"Circle":p=t.getCenter();break;case"MultiLineString":p=t.getFlatMidpoints(),v=2;break;case"Polygon":p=t.getFlatInteriorPoint(),u.overflow||E.push(p[2]/this.resolution),v=3;break;case"MultiPolygon":const D=t.getFlatInteriorPoints();p=[];for(let P=0,k=D.length;P<k;P+=3)u.overflow||E.push(D[P+2]/this.resolution),p.push(D[P],D[P+1]);if(p.length===0)return;v=2;break}const w=this.appendFlatPointCoordinates(p,v);if(w===d)return;if(E&&(w-d)/2!==p.length/v){let D=d/2;E=E.filter((P,k)=>{const z=f[(D+k)*2]===p[k*v]&&f[(D+k)*2+1]===p[k*v+1];return z||--D,z})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);let T=u.padding;if(T!=Ba&&(u.scale[0]<0||u.scale[1]<0)){let D=u.padding[0],P=u.padding[1],k=u.padding[2],z=u.padding[3];u.scale[0]<0&&(P=-P,z=-z),u.scale[1]<0&&(D=-D,k=-k),T=[D,P,k,z]}const b=this.pixelRatio;this.instructions.push([At.DRAW_IMAGE,d,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,T==Ba?Ba:T.map(function(D){return D*b}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);const O=1/b;this.hitDetectionInstructions.push([At.DRAW_IMAGE,d,w,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[O,O],NaN,void 0,this.declutterImageWithText_,T,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),this.endGeometry(i)}}saveTextStates_(){const t=this.textStrokeState_,i=this.textState_,s=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const u=this.textKey_;u in this.textStates||(this.textStates[u]={font:i.font,textAlign:i.textAlign||Gu,justify:i.justify,textBaseline:i.textBaseline||Hh,scale:i.scale});const f=this.fillKey_;s&&(f in this.fillStates||(this.fillStates[f]={fillStyle:s.fillStyle}))}drawChars_(t,i){const s=this.textStrokeState_,o=this.textState_,u=this.strokeKey_,f=this.textKey_,d=this.fillKey_;this.saveTextStates_();const g=this.pixelRatio,p=Ru[o.textBaseline],v=this.textOffsetY_*g,E=this.text_,w=s?s.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([At.DRAW_CHARS,t,i,p,o.overflow,d,o.maxAngle,g,v,u,w*g,E,f,1]),this.hitDetectionInstructions.push([At.DRAW_CHARS,t,i,p,o.overflow,d,o.maxAngle,1,v,u,w,E,f,1/g])}setTextStyle(t,i){let s,o,u;if(!t)this.text_="";else{const f=t.getFill();f?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=us(f.getColor()||Ks)):(o=null,this.textFillState_=o);const d=t.getStroke();if(!d)u=null,this.textStrokeState_=u;else{u=this.textStrokeState_,u||(u={},this.textStrokeState_=u);const b=d.getLineDash(),O=d.getLineDashOffset(),D=d.getWidth(),P=d.getMiterLimit();u.lineCap=d.getLineCap()||Uh,u.lineDash=b?b.slice():Nu,u.lineDashOffset=O===void 0?Iu:O,u.lineJoin=d.getLineJoin()||ol,u.lineWidth=D===void 0?Bu:D,u.miterLimit=P===void 0?ku:P,u.strokeStyle=us(d.getColor()||Fu)}s=this.textState_;const g=t.getFont()||Q0;NC(g);const p=t.getScaleArray();s.overflow=t.getOverflow(),s.font=g,s.maxAngle=t.getMaxAngle(),s.placement=t.getPlacement(),s.textAlign=t.getTextAlign(),s.repeat=t.getRepeat(),s.justify=t.getJustify(),s.textBaseline=t.getTextBaseline()||Hh,s.backgroundFill=t.getBackgroundFill(),s.backgroundStroke=t.getBackgroundStroke(),s.padding=t.getPadding()||Ba,s.scale=p===void 0?[1,1]:p;const v=t.getOffsetX(),E=t.getOffsetY(),w=t.getRotateWithView(),T=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=v===void 0?0:v,this.textOffsetY_=E===void 0?0:E,this.textRotateWithView_=w===void 0?!1:w,this.textRotation_=T===void 0?0:T,this.strokeKey_=u?(typeof u.strokeStyle=="string"?u.strokeStyle:Bt(u.strokeStyle))+u.lineCap+u.lineDashOffset+"|"+u.lineWidth+u.lineJoin+u.miterLimit+"["+u.lineDash.join()+"]":"",this.textKey_=s.font+s.scale+(s.textAlign||"?")+(s.repeat||"?")+(s.justify||"?")+(s.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+Bt(o.fillStyle):""}this.declutterImageWithText_=i}}const vT={Circle:Tv,Default:Wu,Image:gT,LineString:mT,Polygon:Tv,Text:yT};class bv{constructor(t,i,s,o){this.tolerance_=t,this.maxExtent_=i,this.pixelRatio_=o,this.resolution_=s,this.buildersByZIndex_={}}finish(){const t={};for(const i in this.buildersByZIndex_){t[i]=t[i]||{};const s=this.buildersByZIndex_[i];for(const o in s){const u=s[o].finish();t[i][o]=u}}return t}getBuilder(t,i){const s=t!==void 0?t.toString():"0";let o=this.buildersByZIndex_[s];o===void 0&&(o={},this.buildersByZIndex_[s]=o);let u=o[i];if(u===void 0){const f=vT[i];u=new f(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),o[i]=u}return u}}class xT extends Vu{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return It()}getData(t){return null}prepareFrame(t){return It()}renderFrame(t,i){return It()}loadedTileCallback(t,i,s){t[i]||(t[i]={}),t[i][s.tileCoord.toString()]=s}createLoadedTileFinder(t,i,s){return(o,u)=>{const f=this.loadedTileCallback.bind(this,s,o);return t.forEachLoadedTile(i,o,u,f)}}forEachFeatureAtCoordinate(t,i,s,o,u){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===si.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let i=t.getState();return i!=si.LOADED&&i!=si.ERROR&&t.addEventListener(Gt.CHANGE,this.boundHandleImageChange_),i==si.IDLE&&(t.load(),i=t.getState()),i==si.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class ax extends Xn{constructor(t,i,s,o){super(t),this.inversePixelTransform=i,this.frameState=s,this.context=o}}const Rv=[];let Qo=null;function ET(){Qo=Ui(1,1,void 0,{willReadFrequently:!0})}class ox extends xT{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=cs(),this.pixelTransform=cs(),this.inversePixelTransform=cs(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,i,s){Qo||ET(),Qo.clearRect(0,0,1,1);let o;try{Qo.drawImage(t,i,s,1,1,0,0,1,1),o=Qo.getImageData(0,0,1,1).data}catch{return Qo=null,null}return o}getBackground(t){let s=this.getLayer().getBackground();return typeof s=="function"&&(s=s(t.viewState.resolution)),s||void 0}useContainer(t,i,s){const o=this.getLayer().getClassName();let u,f;if(t&&t.className===o&&(!s||t&&t.style.backgroundColor&&tr(Zh(t.style.backgroundColor),Zh(s)))){const d=t.firstElementChild;d instanceof HTMLCanvasElement&&(f=d.getContext("2d"))}if(f&&f.canvas.style.transform===i?(this.container=t,this.context=f,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){u=document.createElement("div"),u.className=o;let d=u.style;d.position="absolute",d.width="100%",d.height="100%",f=Ui();const g=f.canvas;u.appendChild(g),d=g.style,d.position="absolute",d.left="0",d.transformOrigin="top left",this.container=u,this.context=f}!this.containerReused&&s&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=s)}clipUnrotated(t,i,s){const o=Ja(s),u=af(s),f=rf(s),d=sf(s);mi(i.coordinateToPixelTransform,o),mi(i.coordinateToPixelTransform,u),mi(i.coordinateToPixelTransform,f),mi(i.coordinateToPixelTransform,d);const g=this.inversePixelTransform;mi(g,o),mi(g,u),mi(g,f),mi(g,d),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.lineTo(Math.round(f[0]),Math.round(f[1])),t.lineTo(Math.round(d[0]),Math.round(d[1])),t.clip()}dispatchRenderEvent_(t,i,s){const o=this.getLayer();if(o.hasListener(t)){const u=new ax(t,this.inversePixelTransform,s,i);o.dispatchEvent(u)}}preRender(t,i){this.frameState=i,this.dispatchRenderEvent_(ea.PRERENDER,t,i)}postRender(t,i){this.dispatchRenderEvent_(ea.POSTRENDER,t,i)}getRenderTransform(t,i,s,o,u,f,d){const g=u/2,p=f/2,v=o/i,E=-v,w=-t[0]+d,T=-t[1];return sa(this.tempTransform,g,p,v,E,-s,w,T)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function ST(a,t,i,s,o,u,f,d,g,p,v,E){let w=a[t],T=a[t+1],b=0,O=0,D=0,P=0;function k(){b=w,O=T,t+=s,w=a[t],T=a[t+1],P+=D,D=Math.sqrt((w-b)*(w-b)+(T-O)*(T-O))}do k();while(t<i-s&&P+D<u);let z=D===0?0:(u-P)/D;const j=dn(b,w,z),X=dn(O,T,z),$=t-s,it=P,rt=u+d*g(p,o,v);for(;t<i-s&&P+D<rt;)k();z=D===0?0:(rt-P)/D;const dt=dn(b,w,z),pt=dn(O,T,z);let _t;if(E){const F=[j,X,dt,pt];z0(F,0,4,2,E,F,F),_t=F[0]>F[2]}else _t=j>dt;const nt=Math.PI,ot=[],vt=$+s===t;t=$,D=0,P=it,w=a[t],T=a[t+1];let ht;if(vt){k(),ht=Math.atan2(T-O,w-b),_t&&(ht+=ht>0?-nt:nt);const F=(dt+j)/2,H=(pt+X)/2;return ot[0]=[F,H,(rt-u)/2,ht,o],ot}o=o.replace(/\n/g," ");for(let F=0,H=o.length;F<H;){k();let Q=Math.atan2(T-O,w-b);if(_t&&(Q+=Q>0?-nt:nt),ht!==void 0){let lt=Q-ht;if(lt+=lt>nt?-2*nt:lt<-nt?2*nt:0,Math.abs(lt)>f)return null}ht=Q;const yt=F;let A=0;for(;F<H;++F){const lt=_t?H-F-1:F,gt=d*g(p,o[lt],v);if(t+s<i&&P+D<u+A+gt/2)break;A+=gt}if(F===yt)continue;const U=_t?o.substring(H-yt,H-F):o.substring(yt,F);z=D===0?0:(u+A/2-P)/D;const G=dn(b,w,z),st=dn(O,T,z);ot.push([G,st,A/2,Q,U]),u+=A}return ot}const Xo=On(),Yr=[],Hs=[],Ys=[],Xr=[];function Lv(a){return a[3].declutterBox}const wT=new RegExp("[-----]");function Mv(a,t){return(t==="start"||t==="end")&&!wT.test(a)&&(t=t==="start"?"left":"right"),Ru[t]}function CT(a,t,i){return i>0&&a.push(`
`,""),a.push(t,""),a}class TT{constructor(t,i,s,o){this.overlaps=s,this.pixelRatio=i,this.resolution=t,this.alignFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=cs(),this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={}}createLabel(t,i,s,o){const u=t+i+s+o;if(this.labels_[u])return this.labels_[u];const f=o?this.strokeStates[o]:null,d=s?this.fillStates[s]:null,g=this.textStates[i],p=this.pixelRatio,v=[g.scale[0]*p,g.scale[1]*p],E=Array.isArray(t),w=g.justify?Ru[g.justify]:Mv(Array.isArray(t)?t[0]:t,g.textAlign||Gu),T=o&&f.lineWidth?f.lineWidth:0,b=E?t:t.split(`
`).reduce(CT,[]),{width:O,height:D,widths:P,heights:k,lineWidths:z}=kC(g,b),j=O+T,X=[],$=(j+2)*v[0],it=(D+T)*v[1],rt={width:$<0?Math.floor($):Math.ceil($),height:it<0?Math.floor(it):Math.ceil(it),contextInstructions:X};(v[0]!=1||v[1]!=1)&&X.push("scale",v),o&&(X.push("strokeStyle",f.strokeStyle),X.push("lineWidth",T),X.push("lineCap",f.lineCap),X.push("lineJoin",f.lineJoin),X.push("miterLimit",f.miterLimit),X.push("setLineDash",[f.lineDash]),X.push("lineDashOffset",f.lineDashOffset)),s&&X.push("fillStyle",d.fillStyle),X.push("textBaseline","middle"),X.push("textAlign","center");const dt=.5-w;let pt=w*j+dt*T;const _t=[],nt=[];let ot=0,vt=0,ht=0,F=0,H;for(let Q=0,yt=b.length;Q<yt;Q+=2){const A=b[Q];if(A===`
`){vt+=ot,ot=0,pt=w*j+dt*T,++F;continue}const U=b[Q+1]||g.font;U!==H&&(o&&_t.push("font",U),s&&nt.push("font",U),H=U),ot=Math.max(ot,k[ht]);const G=[A,pt+dt*P[ht]+w*(P[ht]-z[F]),.5*(T+ot)+vt];pt+=P[ht],o&&_t.push("strokeText",G),s&&nt.push("fillText",G),++ht}return Array.prototype.push.apply(X,_t),Array.prototype.push.apply(X,nt),this.labels_[u]=rt,rt}replayTextBackground_(t,i,s,o,u,f,d){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,o),t.lineTo.apply(t,u),t.lineTo.apply(t,i),f&&(this.alignFill_=f[2],this.fill_(t)),d&&(this.setStrokeStyle_(t,d),t.stroke())}calculateImageOrLabelDimensions_(t,i,s,o,u,f,d,g,p,v,E,w,T,b,O,D){d*=w[0],g*=w[1];let P=s-d,k=o-g;const z=u+p>t?t-p:u,j=f+v>i?i-v:f,X=b[3]+z*w[0]+b[1],$=b[0]+j*w[1]+b[2],it=P-b[3],rt=k-b[0];(O||E!==0)&&(Yr[0]=it,Xr[0]=it,Yr[1]=rt,Hs[1]=rt,Hs[0]=it+X,Ys[0]=Hs[0],Ys[1]=rt+$,Xr[1]=Ys[1]);let dt;return E!==0?(dt=sa(cs(),s,o,1,1,E,-s,-o),mi(dt,Yr),mi(dt,Hs),mi(dt,Ys),mi(dt,Xr),Qs(Math.min(Yr[0],Hs[0],Ys[0],Xr[0]),Math.min(Yr[1],Hs[1],Ys[1],Xr[1]),Math.max(Yr[0],Hs[0],Ys[0],Xr[0]),Math.max(Yr[1],Hs[1],Ys[1],Xr[1]),Xo)):Qs(Math.min(it,it+X),Math.min(rt,rt+$),Math.max(it,it+X),Math.max(rt,rt+$),Xo),T&&(P=Math.round(P),k=Math.round(k)),{drawImageX:P,drawImageY:k,drawImageW:z,drawImageH:j,originX:p,originY:v,declutterBox:{minX:Xo[0],minY:Xo[1],maxX:Xo[2],maxY:Xo[3],value:D},canvasTransform:dt,scale:w}}replayImageOrLabel_(t,i,s,o,u,f,d){const g=!!(f||d),p=o.declutterBox,v=t.canvas,E=d?d[2]*o.scale[0]/2:0;return p.minX-E<=v.width/i&&p.maxX+E>=0&&p.minY-E<=v.height/i&&p.maxY+E>=0&&(g&&this.replayTextBackground_(t,Yr,Hs,Ys,Xr,f,d),FC(t,o.canvasTransform,u,s,o.originX,o.originY,o.drawImageW,o.drawImageH,o.drawImageX,o.drawImageY,o.scale)),!0}fill_(t){if(this.alignFill_){const i=mi(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(i[0]%s,i[1]%s),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,i){t.strokeStyle=i[1],t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],t.lineDashOffset=i[7],t.setLineDash(i[6])}drawLabelWithPointPlacement_(t,i,s,o){const u=this.textStates[i],f=this.createLabel(t,i,o,s),d=this.strokeStates[s],g=this.pixelRatio,p=Mv(Array.isArray(t)?t[0]:t,u.textAlign||Gu),v=Ru[u.textBaseline||Hh],E=d&&d.lineWidth?d.lineWidth:0,w=f.width/g-2*u.scale[0],T=p*w+2*(.5-p)*E,b=v*f.height/g+2*(.5-v)*E;return{label:f,anchorX:T,anchorY:b}}execute_(t,i,s,o,u,f,d,g){let p;this.pixelCoordinates_&&tr(s,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Ya(this.coordinates,0,this.coordinates.length,2,s,this.pixelCoordinates_),Aw(this.renderedTransform_,s));let v=0;const E=o.length;let w=0,T,b,O,D,P,k,z,j,X,$,it,rt,dt=0,pt=0,_t=null,nt=null;const ot=this.coordinateCache_,vt=this.viewRotation_,ht=Math.round(Math.atan2(-s[1],s[0])*1e12)/1e12,F={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:vt},H=this.instructions!=o||this.overlaps?0:200;let Q,yt,A,U;for(;v<E;){const G=o[v];switch(G[0]){case At.BEGIN_GEOMETRY:Q=G[1],U=G[3],Q.getGeometry()?d!==void 0&&!Zi(d,U.getExtent())?v=G[2]+1:++v:v=G[2];break;case At.BEGIN_PATH:dt>H&&(this.fill_(t),dt=0),pt>H&&(t.stroke(),pt=0),!dt&&!pt&&(t.beginPath(),D=NaN,P=NaN),++v;break;case At.CIRCLE:w=G[1];const lt=p[w],gt=p[w+1],mt=p[w+2],jt=p[w+3],Lt=mt-lt,Et=jt-gt,Mt=Math.sqrt(Lt*Lt+Et*Et);t.moveTo(lt+Mt,gt),t.arc(lt,gt,Mt,0,2*Math.PI,!0),++v;break;case At.CLOSE_PATH:t.closePath(),++v;break;case At.CUSTOM:w=G[1],T=G[2];const se=G[3],me=G[4],_i=G.length==6?G[5]:void 0;F.geometry=se,F.feature=Q,v in ot||(ot[v]=[]);const Qe=ot[v];_i?_i(p,w,T,2,Qe):(Qe[0]=p[w],Qe[1]=p[w+1],Qe.length=2),me(Qe,F),++v;break;case At.DRAW_IMAGE:w=G[1],T=G[2],j=G[3],b=G[4],O=G[5];let ai=G[6];const Ae=G[7],Ct=G[8],Ut=G[9],Jt=G[10];let Ce=G[11];const Je=G[12];let Wt=G[13];const Qt=G[14],Fe=G[15];if(!j&&G.length>=20){X=G[19],$=G[20],it=G[21],rt=G[22];const oi=this.drawLabelWithPointPlacement_(X,$,it,rt);j=oi.label,G[3]=j;const yn=G[23];b=(oi.anchorX-yn)*this.pixelRatio,G[4]=b;const li=G[24];O=(oi.anchorY-li)*this.pixelRatio,G[5]=O,ai=j.height,G[6]=ai,Wt=j.width,G[13]=Wt}let _e;G.length>25&&(_e=G[25]);let Te,ae,be;G.length>17?(Te=G[16],ae=G[17],be=G[18]):(Te=Ba,ae=!1,be=!1),Jt&&ht?Ce+=vt:!Jt&&!ht&&(Ce-=vt);let Se=0;for(;w<T;w+=2){if(_e&&_e[Se++]<Wt/this.pixelRatio)continue;const oi=this.calculateImageOrLabelDimensions_(j.width,j.height,p[w],p[w+1],Wt,ai,b,O,Ct,Ut,Ce,Je,u,Te,ae||be,Q),yn=[t,i,j,oi,Ae,ae?_t:null,be?nt:null];if(g){if(Qt==="none")continue;if(Qt==="obstacle"){g.insert(oi.declutterBox);continue}else{let li,Xi;if(Fe){const $e=T-w;if(!Fe[$e]){Fe[$e]=yn;continue}if(li=Fe[$e],delete Fe[$e],Xi=Lv(li),g.collides(Xi))continue}if(g.collides(oi.declutterBox))continue;li&&(g.insert(Xi),this.replayImageOrLabel_.apply(this,li)),g.insert(oi.declutterBox)}}this.replayImageOrLabel_.apply(this,yn)}++v;break;case At.DRAW_CHARS:const Oi=G[1],Oe=G[2],Hi=G[3],gs=G[4];rt=G[5];const qn=G[6],Ji=G[7],ms=G[8];it=G[9];const Di=G[10];X=G[11],$=G[12];const to=[G[13],G[13]],er=this.textStates[$],Dn=er.font,pn=[er.scale[0]*Ji,er.scale[1]*Ji];let Yi;Dn in this.widths_?Yi=this.widths_[Dn]:(Yi={},this.widths_[Dn]=Yi);const eo=X0(p,Oi,Oe,2),ra=Math.abs(pn[0])*mv(Dn,X,Yi);if(gs||ra<=eo){const oi=this.textStates[$].textAlign,yn=(eo-ra)*Ru[oi],li=ST(p,Oi,Oe,2,X,yn,qn,Math.abs(pn[0]),mv,Dn,Yi,ht?0:this.viewRotation_);t:if(li){const Xi=[];let $e,Pi,De,re,Ze;if(it)for($e=0,Pi=li.length;$e<Pi;++$e){Ze=li[$e],De=Ze[4],re=this.createLabel(De,$,"",it),b=Ze[2]+(pn[0]<0?-Di:Di),O=Hi*re.height+(.5-Hi)*2*Di*pn[1]/pn[0]-ms;const Re=this.calculateImageOrLabelDimensions_(re.width,re.height,Ze[0],Ze[1],re.width,re.height,b,O,0,0,Ze[3],to,!1,Ba,!1,Q);if(g&&g.collides(Re.declutterBox))break t;Xi.push([t,i,re,Re,1,null,null])}if(rt)for($e=0,Pi=li.length;$e<Pi;++$e){Ze=li[$e],De=Ze[4],re=this.createLabel(De,$,rt,""),b=Ze[2],O=Hi*re.height-ms;const Re=this.calculateImageOrLabelDimensions_(re.width,re.height,Ze[0],Ze[1],re.width,re.height,b,O,0,0,Ze[3],to,!1,Ba,!1,Q);if(g&&g.collides(Re.declutterBox))break t;Xi.push([t,i,re,Re,1,null,null])}g&&g.load(Xi.map(Lv));for(let Re=0,bt=Xi.length;Re<bt;++Re)this.replayImageOrLabel_.apply(this,Xi[Re])}}++v;break;case At.END_GEOMETRY:if(f!==void 0){Q=G[1];const oi=f(Q,U);if(oi)return oi}++v;break;case At.FILL:H?dt++:this.fill_(t),++v;break;case At.MOVE_TO_LINE_TO:for(w=G[1],T=G[2],yt=p[w],A=p[w+1],k=yt+.5|0,z=A+.5|0,(k!==D||z!==P)&&(t.moveTo(yt,A),D=k,P=z),w+=2;w<T;w+=2)yt=p[w],A=p[w+1],k=yt+.5|0,z=A+.5|0,(w==T-2||k!==D||z!==P)&&(t.lineTo(yt,A),D=k,P=z);++v;break;case At.SET_FILL_STYLE:_t=G,this.alignFill_=G[2],dt&&(this.fill_(t),dt=0,pt&&(t.stroke(),pt=0)),t.fillStyle=G[1],++v;break;case At.SET_STROKE_STYLE:nt=G,pt&&(t.stroke(),pt=0),this.setStrokeStyle_(t,G),++v;break;case At.STROKE:H?pt++:t.stroke(),++v;break;default:++v;break}}dt&&this.fill_(t),pt&&t.stroke()}execute(t,i,s,o,u,f){this.viewRotation_=o,this.execute_(t,i,s,this.instructions,u,void 0,void 0,f)}executeHitDetection(t,i,s,o,u){return this.viewRotation_=s,this.execute_(t,1,i,this.hitDetectionInstructions,!0,o,u)}}const xg=["Polygon","Circle","LineString","Image","Text","Default"];class Av{constructor(t,i,s,o,u,f){this.maxExtent_=t,this.overlaps_=o,this.pixelRatio_=s,this.resolution_=i,this.renderBuffer_=f,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=cs(),this.createExecutors_(u)}clip(t,i){const s=this.getClipCoords(i);t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(s[2],s[3]),t.lineTo(s[4],s[5]),t.lineTo(s[6],s[7]),t.clip()}createExecutors_(t){for(const i in t){let s=this.executorsByZIndex_[i];s===void 0&&(s={},this.executorsByZIndex_[i]=s);const o=t[i];for(const u in o){const f=o[u];s[u]=new TT(this.resolution_,this.pixelRatio_,this.overlaps_,f)}}}hasExecutors(t){for(const i in this.executorsByZIndex_){const s=this.executorsByZIndex_[i];for(let o=0,u=t.length;o<u;++o)if(t[o]in s)return!0}return!1}forEachFeatureAtCoordinate(t,i,s,o,u,f){o=Math.round(o);const d=o*2+1,g=sa(this.hitDetectionTransform_,o+.5,o+.5,1/i,-1/i,-s,-t[0],-t[1]),p=!this.hitDetectionContext_;p&&(this.hitDetectionContext_=Ui(d,d,void 0,{willReadFrequently:!0}));const v=this.hitDetectionContext_;v.canvas.width!==d||v.canvas.height!==d?(v.canvas.width=d,v.canvas.height=d):p||v.clearRect(0,0,d,d);let E;this.renderBuffer_!==void 0&&(E=On(),Tu(E,t),ef(E,i*(this.renderBuffer_+o),E));const w=bT(o);let T;function b(X,$){const it=v.getImageData(0,0,d,d).data;for(let rt=0,dt=w.length;rt<dt;rt++)if(it[w[rt]]>0){if(!f||T!=="Image"&&T!=="Text"||f.includes(X)){const pt=(w[rt]-3)/4,_t=o-pt%d,nt=o-(pt/d|0),ot=u(X,$,_t*_t+nt*nt);if(ot)return ot}v.clearRect(0,0,d,d);break}}const O=Object.keys(this.executorsByZIndex_).map(Number);O.sort(Xa);let D,P,k,z,j;for(D=O.length-1;D>=0;--D){const X=O[D].toString();for(k=this.executorsByZIndex_[X],P=xg.length-1;P>=0;--P)if(T=xg[P],z=k[T],z!==void 0&&(j=z.executeHitDetection(v,g,s,b,E),j))return j}}getClipCoords(t){const i=this.maxExtent_;if(!i)return null;const s=i[0],o=i[1],u=i[2],f=i[3],d=[s,o,s,f,u,f,u,o];return Ya(d,0,8,2,t,d),d}isEmpty(){return rl(this.executorsByZIndex_)}execute(t,i,s,o,u,f,d){const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(Xa),this.maxExtent_&&(t.save(),this.clip(t,s)),f=f||xg;let p,v,E,w,T,b;for(d&&g.reverse(),p=0,v=g.length;p<v;++p){const O=g[p].toString();for(T=this.executorsByZIndex_[O],E=0,w=f.length;E<w;++E){const D=f[E];b=T[D],b!==void 0&&b.execute(t,i,s,o,u,d)}}this.maxExtent_&&t.restore()}}const Eg={};function bT(a){if(Eg[a]!==void 0)return Eg[a];const t=a*2+1,i=a*a,s=new Array(i+1);for(let u=0;u<=a;++u)for(let f=0;f<=a;++f){const d=u*u+f*f;if(d>i)break;let g=s[d];g||(g=[],s[d]=g),g.push(((a+u)*t+(a+f))*4+3),u>0&&g.push(((a-u)*t+(a+f))*4+3),f>0&&(g.push(((a+u)*t+(a-f))*4+3),u>0&&g.push(((a-u)*t+(a-f))*4+3))}const o=[];for(let u=0,f=s.length;u<f;++u)s[u]&&o.push(...s[u]);return Eg[a]=o,o}class RT extends rx{constructor(t,i,s,o,u,f,d){super(),this.context_=t,this.pixelRatio_=i,this.extent_=s,this.transform_=o,this.transformRotation_=o?_m(Math.atan2(o[1],o[0]),10):0,this.viewRotation_=u,this.squaredTolerance_=f,this.userTransform_=d,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=cs()}drawImages_(t,i,s,o){if(!this.image_)return;const u=Ya(t,i,s,o,this.transform_,this.pixelCoordinates_),f=this.context_,d=this.tmpLocalTransform_,g=f.globalAlpha;this.imageOpacity_!=1&&(f.globalAlpha=g*this.imageOpacity_);let p=this.imageRotation_;this.transformRotation_===0&&(p-=this.viewRotation_),this.imageRotateWithView_&&(p+=this.viewRotation_);for(let v=0,E=u.length;v<E;v+=2){const w=u[v]-this.imageAnchorX_,T=u[v+1]-this.imageAnchorY_;if(p!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const b=w+this.imageAnchorX_,O=T+this.imageAnchorY_;sa(d,b,O,1,1,p,-b,-O),f.setTransform.apply(f,d),f.translate(b,O),f.scale(this.imageScale_[0],this.imageScale_[1]),f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),f.setTransform(1,0,0,1,0,0)}else f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,w,T,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(f.globalAlpha=g)}drawText_(t,i,s,o){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const u=Ya(t,i,s,o,this.transform_,this.pixelCoordinates_),f=this.context_;let d=this.textRotation_;for(this.transformRotation_===0&&(d-=this.viewRotation_),this.textRotateWithView_&&(d+=this.viewRotation_);i<s;i+=o){const g=u[i]+this.textOffsetX_,p=u[i+1]+this.textOffsetY_;d!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(f.translate(g-this.textOffsetX_,p-this.textOffsetY_),f.rotate(d),f.translate(this.textOffsetX_,this.textOffsetY_),f.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&f.strokeText(this.text_,0,0),this.textFillState_&&f.fillText(this.text_,0,0),f.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&f.strokeText(this.text_,g,p),this.textFillState_&&f.fillText(this.text_,g,p))}}moveToLineTo_(t,i,s,o,u){const f=this.context_,d=Ya(t,i,s,o,this.transform_,this.pixelCoordinates_);f.moveTo(d[0],d[1]);let g=d.length;u&&(g-=2);for(let p=2;p<g;p+=2)f.lineTo(d[p],d[p+1]);return u&&f.closePath(),s}drawRings_(t,i,s,o){for(let u=0,f=s.length;u<f;++u)i=this.moveToLineTo_(t,i,s[u],o,!0);return i}drawCircle(t){if(Zi(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=oC(t,this.transform_,this.pixelCoordinates_),s=i[2]-i[0],o=i[3]-i[1],u=Math.sqrt(s*s+o*o),f=this.context_;f.beginPath(),f.arc(i[0],i[1],u,0,2*Math.PI),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,i){const s=i.getGeometryFunction()(t);!s||!Zi(this.extent_,s.getExtent())||(this.setStyle(i),this.drawGeometry(s))}drawGeometryCollection(t){const i=t.getGeometriesArray();for(let s=0,o=i.length;s<o;++s)this.drawGeometry(i[s])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(i,0,i.length,s),this.text_!==""&&this.drawText_(i,0,i.length,s)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),s=t.getStride();this.image_&&this.drawImages_(i,0,i.length,s),this.text_!==""&&this.drawText_(i,0,i.length,s)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zi(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(s,0,s.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getExtent();if(Zi(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,o=t.getFlatCoordinates();let u=0;const f=t.getEnds(),d=t.getStride();s.beginPath();for(let g=0,p=f.length;g<p;++g)u=this.moveToLineTo_(o,u,f[g],d,!1);s.stroke()}if(this.text_!==""){const s=t.getFlatMidpoints();this.drawText_(s,0,s.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getOrientedFlatCoordinates();let o=0;const u=t.getEndss(),f=t.getStride();i.beginPath();for(let d=0,g=u.length;d<g;++d){const p=u[d];o=this.drawRings_(s,o,p,f)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=t.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(t){const i=this.context_,s=this.contextFillState_;s?s.fillStyle!=t.fillStyle&&(s.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const i=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=t.lineCap&&(s.lineCap=t.lineCap,i.lineCap=t.lineCap),tr(s.lineDash,t.lineDash)||i.setLineDash(s.lineDash=t.lineDash),s.lineDashOffset!=t.lineDashOffset&&(s.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset),s.lineJoin!=t.lineJoin&&(s.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),s.lineWidth!=t.lineWidth&&(s.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),s.miterLimit!=t.miterLimit&&(s.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),s.strokeStyle!=t.strokeStyle&&(s.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset,i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const i=this.context_,s=this.contextTextState_,o=t.textAlign?t.textAlign:Gu;s?(s.font!=t.font&&(s.font=t.font,i.font=t.font),s.textAlign!=o&&(s.textAlign=o,i.textAlign=o),s.textBaseline!=t.textBaseline&&(s.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=o,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(!t)this.fillState_=null;else{const s=t.getColor();this.fillState_={fillStyle:us(s||Ks)}}if(!i)this.strokeState_=null;else{const s=i.getColor(),o=i.getLineCap(),u=i.getLineDash(),f=i.getLineDashOffset(),d=i.getLineJoin(),g=i.getWidth(),p=i.getMiterLimit(),v=u||Nu;this.strokeState_={lineCap:o!==void 0?o:Uh,lineDash:this.pixelRatio_===1?v:v.map(E=>E*this.pixelRatio_),lineDashOffset:(f||Iu)*this.pixelRatio_,lineJoin:d!==void 0?d:ol,lineWidth:(g!==void 0?g:Bu)*this.pixelRatio_,miterLimit:p!==void 0?p:ku,strokeStyle:us(s||Fu)}}}setImageStyle(t){let i;if(!t||!(i=t.getSize())){this.image_=null;return}const s=t.getPixelRatio(this.pixelRatio_),o=t.getAnchor(),u=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*s,this.imageAnchorY_=o[1]*s,this.imageHeight_=i[1]*s,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=u[0],this.imageOriginY_=u[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const f=t.getScaleArray();this.imageScale_=[f[0]*this.pixelRatio_/s,f[1]*this.pixelRatio_/s],this.imageWidth_=i[0]*s}setTextStyle(t){if(!t)this.text_="";else{const i=t.getFill();if(!i)this.textFillState_=null;else{const T=i.getColor();this.textFillState_={fillStyle:us(T||Ks)}}const s=t.getStroke();if(!s)this.textStrokeState_=null;else{const T=s.getColor(),b=s.getLineCap(),O=s.getLineDash(),D=s.getLineDashOffset(),P=s.getLineJoin(),k=s.getWidth(),z=s.getMiterLimit();this.textStrokeState_={lineCap:b!==void 0?b:Uh,lineDash:O||Nu,lineDashOffset:D||Iu,lineJoin:P!==void 0?P:ol,lineWidth:k!==void 0?k:Bu,miterLimit:z!==void 0?z:ku,strokeStyle:us(T||Fu)}}const o=t.getFont(),u=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),p=t.getScaleArray(),v=t.getText(),E=t.getTextAlign(),w=t.getTextBaseline();this.textState_={font:o!==void 0?o:Q0,textAlign:E!==void 0?E:Gu,textBaseline:w!==void 0?w:Hh},this.text_=v!==void 0?Array.isArray(v)?v.reduce((T,b,O)=>T+=O%2?" ":b,""):v:"",this.textOffsetX_=u!==void 0?this.pixelRatio_*u:0,this.textOffsetY_=f!==void 0?this.pixelRatio_*f:0,this.textRotateWithView_=d!==void 0?d:!1,this.textRotation_=g!==void 0?g:0,this.textScale_=[this.pixelRatio_*p[0],this.pixelRatio_*p[1]]}}}const ls=.5;function LT(a,t,i,s,o,u,f){const d=a[0]*ls,g=a[1]*ls,p=Ui(d,g);p.imageSmoothingEnabled=!1;const v=p.canvas,E=new RT(p,ls,o,null,f),w=i.length,T=Math.floor((256*256*256-1)/w),b={};for(let D=1;D<=w;++D){const P=i[D-1],k=P.getStyleFunction()||s;if(!s)continue;let z=k(P,u);if(!z)continue;Array.isArray(z)||(z=[z]);const X=(D*T).toString(16).padStart(7,"#00000");for(let $=0,it=z.length;$<it;++$){const rt=z[$],dt=rt.getGeometryFunction()(P);if(!dt||!Zi(o,dt.getExtent()))continue;const pt=rt.clone(),_t=pt.getFill();_t&&_t.setColor(X);const nt=pt.getStroke();nt&&(nt.setColor(X),nt.setLineDash(null)),pt.setText(void 0);const ot=rt.getImage();if(ot&&ot.getOpacity()!==0){const H=ot.getImageSize();if(!H)continue;const Q=Ui(H[0],H[1],void 0,{alpha:!1}),yt=Q.canvas;Q.fillStyle=X,Q.fillRect(0,0,yt.width,yt.height),pt.setImage(new gf({img:yt,imgSize:H,anchor:ot.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ot.getOrigin(),opacity:1,size:ot.getSize(),scale:ot.getScale(),rotation:ot.getRotation(),rotateWithView:ot.getRotateWithView()}))}const vt=pt.getZIndex()||0;let ht=b[vt];ht||(ht={},b[vt]=ht,ht.Polygon=[],ht.Circle=[],ht.LineString=[],ht.Point=[]);const F=dt.getType();if(F==="GeometryCollection"){const H=dt.getGeometriesArrayRecursive();for(let Q=0,yt=H.length;Q<yt;++Q){const A=H[Q];ht[A.getType().replace("Multi","")].push(A,pt)}}else ht[F.replace("Multi","")].push(dt,pt)}}const O=Object.keys(b).map(Number).sort(Xa);for(let D=0,P=O.length;D<P;++D){const k=b[O[D]];for(const z in k){const j=k[z];for(let X=0,$=j.length;X<$;X+=2){E.setStyle(j[X+1]);for(let it=0,rt=t.length;it<rt;++it)E.setTransform(t[it]),E.drawGeometry(j[X])}}}return p.getImageData(0,0,v.width,v.height)}function MT(a,t,i){const s=[];if(i){const o=Math.floor(Math.round(a[0])*ls),u=Math.floor(Math.round(a[1])*ls),f=(Ke(o,0,i.width-1)+Ke(u,0,i.height-1)*i.width)*4,d=i.data[f],g=i.data[f+1],v=i.data[f+2]+256*(g+256*d),E=Math.floor((256*256*256-1)/t.length);v&&v%E===0&&s.push(t[v/E-1])}return s}const AT=.5,lx={Point:GT,LineString:IT,Polygon:ZT,MultiPoint:BT,MultiLineString:kT,MultiPolygon:FT,GeometryCollection:NT,Circle:PT};function OT(a,t){return parseInt(Bt(a),10)-parseInt(Bt(t),10)}function DT(a,t){const i=Vg(a,t);return i*i}function Vg(a,t){return AT*a/t}function PT(a,t,i,s,o){const u=i.getFill(),f=i.getStroke();if(u||f){const g=a.getBuilder(i.getZIndex(),"Circle");g.setFillStrokeStyle(u,f),g.drawCircle(t,s)}const d=i.getText();if(d&&d.getText()){const g=(o||a).getBuilder(i.getZIndex(),"Text");g.setTextStyle(d),g.drawText(t,s)}}function Ov(a,t,i,s,o,u,f){let d=!1;const g=i.getImage();if(g){const p=g.getImageState();p==si.LOADED||p==si.ERROR?g.unlistenImageChange(o):(p==si.IDLE&&g.load(),g.listenImageChange(o),d=!0)}return zT(a,t,i,s,u,f),d}function zT(a,t,i,s,o,u){const f=i.getGeometryFunction()(t);if(!f)return;const d=f.simplifyTransformed(s,o);if(i.getRenderer())ux(a,d,i,t);else{const p=lx[d.getType()];p(a,d,i,t,u)}}function ux(a,t,i,s){if(t.getType()=="GeometryCollection"){const u=t.getGeometries();for(let f=0,d=u.length;f<d;++f)ux(a,u[f],i,s);return}a.getBuilder(i.getZIndex(),"Default").drawCustom(t,s,i.getRenderer(),i.getHitDetectionRenderer())}function NT(a,t,i,s,o){const u=t.getGeometriesArray();let f,d;for(f=0,d=u.length;f<d;++f){const g=lx[u[f].getType()];g(a,u[f],i,s,o)}}function IT(a,t,i,s,o){const u=i.getStroke();if(u){const d=a.getBuilder(i.getZIndex(),"LineString");d.setFillStrokeStyle(null,u),d.drawLineString(t,s)}const f=i.getText();if(f&&f.getText()){const d=(o||a).getBuilder(i.getZIndex(),"Text");d.setTextStyle(f),d.drawText(t,s)}}function kT(a,t,i,s,o){const u=i.getStroke();if(u){const d=a.getBuilder(i.getZIndex(),"LineString");d.setFillStrokeStyle(null,u),d.drawMultiLineString(t,s)}const f=i.getText();if(f&&f.getText()){const d=(o||a).getBuilder(i.getZIndex(),"Text");d.setTextStyle(f),d.drawText(t,s)}}function FT(a,t,i,s,o){const u=i.getFill(),f=i.getStroke();if(f||u){const g=a.getBuilder(i.getZIndex(),"Polygon");g.setFillStrokeStyle(u,f),g.drawMultiPolygon(t,s)}const d=i.getText();if(d&&d.getText()){const g=(o||a).getBuilder(i.getZIndex(),"Text");g.setTextStyle(d),g.drawText(t,s)}}function GT(a,t,i,s,o){const u=i.getImage(),f=i.getText();let d;if(u){if(u.getImageState()!=si.LOADED)return;let g=a;if(o){const v=u.getDeclutterMode();if(v!=="none")if(g=o,v==="obstacle"){const E=a.getBuilder(i.getZIndex(),"Image");E.setImageStyle(u,d),E.drawPoint(t,s)}else f&&f.getText()&&(d={})}const p=g.getBuilder(i.getZIndex(),"Image");p.setImageStyle(u,d),p.drawPoint(t,s)}if(f&&f.getText()){let g=a;o&&(g=o);const p=g.getBuilder(i.getZIndex(),"Text");p.setTextStyle(f,d),p.drawText(t,s)}}function BT(a,t,i,s,o){const u=i.getImage(),f=i.getText();let d;if(u){if(u.getImageState()!=si.LOADED)return;let g=a;if(o){const v=u.getDeclutterMode();if(v!=="none")if(g=o,v==="obstacle"){const E=a.getBuilder(i.getZIndex(),"Image");E.setImageStyle(u,d),E.drawMultiPoint(t,s)}else f&&f.getText()&&(d={})}const p=g.getBuilder(i.getZIndex(),"Image");p.setImageStyle(u,d),p.drawMultiPoint(t,s)}if(f&&f.getText()){let g=a;o&&(g=o);const p=g.getBuilder(i.getZIndex(),"Text");p.setTextStyle(f,d),p.drawText(t,s)}}function ZT(a,t,i,s,o){const u=i.getFill(),f=i.getStroke();if(u||f){const g=a.getBuilder(i.getZIndex(),"Polygon");g.setFillStrokeStyle(u,f),g.drawPolygon(t,s)}const d=i.getText();if(d&&d.getText()){const g=(o||a).getBuilder(i.getZIndex(),"Text");g.setTextStyle(d),g.drawText(t,s)}}class jT extends ox{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=On(),this.wrappedRenderedExtent_=On(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,i,s){const o=i.extent,u=i.viewState,f=u.center,d=u.resolution,g=u.projection,p=u.rotation,v=g.getExtent(),E=this.getLayer().getSource(),w=i.pixelRatio,T=i.viewHints,b=!(T[Mi.ANIMATING]||T[Mi.INTERACTING]),O=this.compositionContext_,D=Math.round(i.size[0]*w),P=Math.round(i.size[1]*w),k=E.getWrapX()&&g.canWrapX(),z=k?we(v):null,j=k?Math.ceil((o[2]-v[2])/z)+1:1;let X=k?Math.floor((o[0]-v[0])/z):0;do{const $=this.getRenderTransform(f,d,p,w,D,P,X*z);t.execute(O,1,$,p,b,void 0,s)}while(++X<j)}setupCompositionContext_(){if(this.opacity_!==1){const t=Ui(this.context.canvas.width,this.context.canvas.height,Rv);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,cf(this.compositionContext_),Rv.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,i){const s=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];Ow(this.pixelTransform,1/s,1/s),fm(this.inversePixelTransform,this.pixelTransform);const u=x0(this.pixelTransform);this.useContainer(i,u,this.getBackground(t));const f=this.context,d=f.canvas,g=this.replayGroup_,p=this.declutterExecutorGroup;if((!g||g.isEmpty())&&(!p||p.isEmpty()))return null;const v=Math.round(t.size[0]*s),E=Math.round(t.size[1]*s);d.width!=v||d.height!=E?(d.width=v,d.height=E,d.style.transform!==u&&(d.style.transform=u)):this.containerReused||f.clearRect(0,0,v,E),this.preRender(f,t);const w=t.viewState;w.projection,this.opacity_=o.opacity,this.setupCompositionContext_();let T=!1,b=!0;if(o.extent&&this.clipping){const O=Jr(o.extent);b=Zi(O,t.extent),T=b&&!Fa(O,t.extent),T&&this.clipUnrotated(this.compositionContext_,t,O)}return b&&this.renderWorlds(g,t),T&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(f,t),this.renderedRotation_!==w.rotation&&(this.renderedRotation_=w.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(i=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const s=[this.context.canvas.width,this.context.canvas.height];mi(this.pixelTransform,s);const o=this.renderedCenter_,u=this.renderedResolution_,f=this.renderedRotation_,d=this.renderedProjection_,g=this.wrappedRenderedExtent_,p=this.getLayer(),v=[],E=s[0]*ls,w=s[1]*ls;v.push(this.getRenderTransform(o,u,f,ls,E,w,0).slice());const T=p.getSource(),b=d.getExtent();if(T.getWrapX()&&d.canWrapX()&&!Fa(b,g)){let O=g[0];const D=we(b);let P=0,k;for(;O<b[0];)--P,k=D*P,v.push(this.getRenderTransform(o,u,f,ls,E,w,k).slice()),O+=D;for(P=0,O=g[2];O>b[2];)++P,k=D*P,v.push(this.getRenderTransform(o,u,f,ls,E,w,k).slice()),O-=D}this.hitDetectionImageData_=LT(s,v,this.renderedFeatures_,p.getStyleFunction(),g,u,f)}i(MT(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,i,s,o,u){if(!this.replayGroup_)return;const f=i.viewState.resolution,d=i.viewState.rotation,g=this.getLayer(),p={},v=function(T,b,O){const D=Bt(T),P=p[D];if(P){if(P!==!0&&O<P.distanceSq){if(O===0)return p[D]=!0,u.splice(u.lastIndexOf(P),1),o(T,g,b);P.geometry=b,P.distanceSq=O}}else{if(O===0)return p[D]=!0,o(T,g,b);u.push(p[D]={feature:T,layer:g,geometry:b,distanceSq:O,callback:o})}};let E;const w=[this.replayGroup_];return this.declutterExecutorGroup&&w.push(this.declutterExecutorGroup),w.some(T=>E=T.forEachFeatureAtCoordinate(t,f,d,s,v,T===this.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(b=>b.value):null)),E}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const i=this.getLayer(),s=i.getSource();if(!s)return!1;const o=t.viewHints[Mi.ANIMATING],u=t.viewHints[Mi.INTERACTING],f=i.getUpdateWhileAnimating(),d=i.getUpdateWhileInteracting();if(this.ready&&!f&&o||!d&&u)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const g=t.extent,p=t.viewState,v=p.projection,E=p.resolution,w=t.pixelRatio,T=i.getRevision(),b=i.getRenderBuffer();let O=i.getRenderOrder();O===void 0&&(O=OT);const D=p.center.slice(),P=ef(g,b*E),k=P.slice(),z=[P.slice()],j=v.getExtent();if(s.getWrapX()&&v.canWrapX()&&!Fa(j,t.extent)){const ht=we(j),F=Math.max(we(P)/2,ht);P[0]=j[0]-F,P[2]=j[2]+F,M0(D,v);const H=b0(z[0],v);H[0]<j[0]&&H[2]<j[2]?z.push([H[0]+ht,H[1],H[2]+ht,H[3]]):H[0]>j[0]&&H[2]>j[2]&&z.push([H[0]-ht,H[1],H[2]-ht,H[3]])}if(this.ready&&this.renderedResolution_==E&&this.renderedRevision_==T&&this.renderedRenderOrder_==O&&Fa(this.wrappedRenderedExtent_,P))return tr(this.renderedExtent_,k)||(this.hitDetectionImageData_=null,this.renderedExtent_=k),this.renderedCenter_=D,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const X=new bv(Vg(E,w),P,E,w);let $;this.getLayer().getDeclutter()&&($=new bv(Vg(E,w),P,E,w));let it;for(let ht=0,F=z.length;ht<F;++ht)s.loadFeatures(z[ht],E,v);const rt=DT(E,w);let dt=!0;const pt=ht=>{let F;const H=ht.getStyleFunction()||i.getStyleFunction();if(H&&(F=H(ht,E)),F){const Q=this.renderFeature(ht,rt,F,X,it,$);dt=dt&&!Q}},_t=Sm(P),nt=s.getFeaturesInExtent(_t);O&&nt.sort(O);for(let ht=0,F=nt.length;ht<F;++ht)pt(nt[ht]);this.renderedFeatures_=nt,this.ready=dt;const ot=X.finish(),vt=new Av(P,E,w,s.getOverlaps(),ot,i.getRenderBuffer());return $&&(this.declutterExecutorGroup=new Av(P,E,w,s.getOverlaps(),$.finish(),i.getRenderBuffer())),this.renderedResolution_=E,this.renderedRevision_=T,this.renderedRenderOrder_=O,this.renderedExtent_=k,this.wrappedRenderedExtent_=P,this.renderedCenter_=D,this.renderedProjection_=v,this.replayGroup_=vt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,i,s,o,u,f){if(!s)return!1;let d=!1;if(Array.isArray(s))for(let g=0,p=s.length;g<p;++g)d=Ov(o,t,s[g],i,this.boundHandleStyleImageChange_,u,f)||d;else d=Ov(o,t,s,i,this.boundHandleStyleImageChange_,u,f);return d}}class Wa extends dT{constructor(t){super(t)}createRenderer(){return new jT(this)}}class qg{constructor(t){this.rbush_=new nx(t),this.items_={}}insert(t,i){const s={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};this.rbush_.insert(s),this.items_[Bt(i)]=s}load(t,i){const s=new Array(i.length);for(let o=0,u=i.length;o<u;o++){const f=t[o],d=i[o],g={minX:f[0],minY:f[1],maxX:f[2],maxY:f[3],value:d};s[o]=g,this.items_[Bt(d)]=g}this.rbush_.load(s)}remove(t){const i=Bt(t),s=this.items_[i];return delete this.items_[i],this.rbush_.remove(s)!==null}update(t,i){const s=this.items_[Bt(i)],o=[s.minX,s.minY,s.maxX,s.maxY];Au(o,t)||(this.remove(i),this.insert(t,i))}getAll(){return this.rbush_.all().map(function(i){return i.value})}getInExtent(t){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(i).map(function(o){return o.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,i){return this.forEach_(this.getInExtent(t),i)}forEach_(t,i){let s;for(let o=0,u=t.length;o<u;o++)if(s=i(t[o]),s)return s;return s}isEmpty(){return rl(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const i=this.rbush_.toJSON();return Qs(i.minX,i.minY,i.maxX,i.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const i in t.items_)this.items_[i]=t.items_[i]}}class cx extends Vn{constructor(t){super(),this.projection=ri(t.projection),this.attributions_=Dv(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(s,o){i.viewResolver=s,i.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Dv(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Dv(a){return a?Array.isArray(a)?function(t){return a}:typeof a=="function"?a:function(t){return[a]}:null}const fn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function UT(a,t){return[[-1/0,-1/0,1/0,1/0]]}let HT=!1;function YT(a,t,i,s,o,u,f){const d=new XMLHttpRequest;d.open("GET",typeof a=="function"?a(i,s,o):a,!0),t.getType()=="arraybuffer"&&(d.responseType="arraybuffer"),d.withCredentials=HT,d.onload=function(g){if(!d.status||d.status>=200&&d.status<300){const p=t.getType();let v;p=="json"||p=="text"?v=d.responseText:p=="xml"?(v=d.responseXML,v||(v=new DOMParser().parseFromString(d.responseText,"application/xml"))):p=="arraybuffer"&&(v=d.response),v?u(t.readFeatures(v,{extent:i,featureProjection:o}),t.readProjection(v)):f()}else f()},d.onerror=f,d.send()}function Pv(a,t){return function(i,s,o,u,f){const d=this;YT(a,t,i,s,o,function(g,p){d.addFeatures(g),u!==void 0&&u(g)},f||sl)}}class Vr extends Xn{constructor(t,i,s){super(t),this.feature=i,this.features=s}}class ll extends cx{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=sl,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Vt(this.format_,7),this.loader_=Pv(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:UT;const i=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=i?new qg:null,this.loadedExtentsRtree_=new qg,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let s,o;Array.isArray(t.features)?o=t.features:t.features&&(s=t.features,o=s.getArray()),!i&&s===void 0&&(s=new _n(o)),o!==void 0&&this.addFeaturesInternal(o),s!==void 0&&this.bindFeaturesCollection_(s)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const i=Bt(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);const s=t.getGeometry();if(s){const o=s.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new Vr(fn.ADDFEATURE,t))}setupChangeEvents_(t,i){this.featureChangeKeys_[t]=[ee(i,Gt.CHANGE,this.handleFeatureChange_,this),ee(i,nl.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,i){let s=!0;const o=i.getId();return o!==void 0&&(o.toString()in this.idIndex_?s=!1:this.idIndex_[o.toString()]=i),s&&(Vt(!(t in this.uidIndex_),30),this.uidIndex_[t]=i),s}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const i=[],s=[],o=[];for(let u=0,f=t.length;u<f;u++){const d=t[u],g=Bt(d);this.addToIndex_(g,d)&&s.push(d)}for(let u=0,f=s.length;u<f;u++){const d=s[u],g=Bt(d);this.setupChangeEvents_(g,d);const p=d.getGeometry();if(p){const v=p.getExtent();i.push(v),o.push(d)}else this.nullGeometryFeatures_[g]=d}if(this.featuresRtree_&&this.featuresRtree_.load(i,o),this.hasListener(fn.ADDFEATURE))for(let u=0,f=s.length;u<f;u++)this.dispatchEvent(new Vr(fn.ADDFEATURE,s[u]))}bindFeaturesCollection_(t){let i=!1;this.addEventListener(fn.ADDFEATURE,function(s){i||(i=!0,t.push(s.feature),i=!1)}),this.addEventListener(fn.REMOVEFEATURE,function(s){i||(i=!0,t.remove(s.feature),i=!1)}),t.addEventListener(qe.ADD,s=>{i||(i=!0,this.addFeature(s.element),i=!1)}),t.addEventListener(qe.REMOVE,s=>{i||(i=!0,this.removeFeature(s.element),i=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const s in this.featureChangeKeys_)this.featureChangeKeys_[s].forEach(Ee);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const s=o=>{this.removeFeatureInternal(o)};this.featuresRtree_.forEach(s);for(const o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const i=new Vr(fn.CLEAR);this.dispatchEvent(i),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,i){const s=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(s,function(o){if(o.getGeometry().intersectsCoordinate(t))return i(o)})}forEachFeatureInExtent(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(t,i){return this.forEachFeatureInExtent(t,function(s){if(s.getGeometry().intersectsExtent(t)){const u=i(s);if(u)return u}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),rl(this.nullGeometryFeatures_)||Hn(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const i=[];return this.forEachFeatureAtCoordinateDirect(t,function(s){i.push(s)}),i}getFeaturesInExtent(t,i){if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const o=kw(t,i);return[].concat(...o.map(u=>this.featuresRtree_.getInExtent(u)))}else if(this.featuresCollection_)return this.featuresCollection_.getArray().slice(0);return[]}getClosestFeatureToCoordinate(t,i){const s=t[0],o=t[1];let u=null;const f=[NaN,NaN];let d=1/0;const g=[-1/0,-1/0,1/0,1/0];return i=i||Va,this.featuresRtree_.forEachInExtent(g,function(p){if(i(p)){const v=p.getGeometry(),E=d;if(d=v.closestPointXY(s,o,f,d),d<E){u=p;const w=Math.sqrt(d);g[0]=s-w,g[1]=o-w,g[2]=s+w,g[3]=o+w}}}),u}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const i=this.idIndex_[t.toString()];return i!==void 0?i:null}getFeatureByUid(t){const i=this.uidIndex_[t];return i!==void 0?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const i=t.target,s=Bt(i),o=i.getGeometry();if(!o)s in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[s]=i);else{const f=o.getExtent();s in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[s],this.featuresRtree_&&this.featuresRtree_.insert(f,i)):this.featuresRtree_&&this.featuresRtree_.update(f,i)}const u=i.getId();if(u!==void 0){const f=u.toString();this.idIndex_[f]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[f]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[s]=i;this.changed(),this.dispatchEvent(new Vr(fn.CHANGEFEATURE,i))}hasFeature(t){const i=t.getId();return i!==void 0?i in this.idIndex_:Bt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&rl(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,i,s){const o=this.loadedExtentsRtree_,u=this.strategy_(t,i,s);for(let f=0,d=u.length;f<d;++f){const g=u[f];o.forEachInExtent(g,function(v){return Fa(v.extent,g)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Vr(fn.FEATURESLOADSTART)),this.loader_.call(this,g,i,s,v=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vr(fn.FEATURESLOADEND,void 0,v))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vr(fn.FEATURESLOADERROR))}),o.insert(g,{extent:g.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const i=this.loadedExtentsRtree_;let s;i.forEachInExtent(t,function(o){if(Au(o.extent,t))return s=o,!0}),s&&i.remove(s)}removeFeature(t){if(!t)return;const i=Bt(t);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const i=Bt(t),s=this.featureChangeKeys_[i];if(!s)return;s.forEach(Ee),delete this.featureChangeKeys_[i];const o=t.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[i],this.dispatchEvent(new Vr(fn.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let i=!1;for(const s in this.idIndex_)if(this.idIndex_[s]===t){delete this.idIndex_[s],i=!0;break}return i}setLoader(t){this.loader_=t}setUrl(t){Vt(this.format_,7),this.url_=t,this.setLoader(Pv(t,this.format_))}}const Ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class hx extends tf{constructor(t,i,s){super(),s=s||{},this.tileCoord=t,this.state=i,this.interimTile=null,this.key="",this.transition_=s.transition===void 0?250:s.transition,this.transitionStarts_={},this.interpolate=!!s.interpolate}changed(){this.dispatchEvent(Gt.CHANGE)}release(){this.state===Ot.ERROR&&this.setState(Ot.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==Ot.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,i=this;do{if(t.getState()==Ot.LOADED){t.interimTile=null;break}else t.getState()==Ot.LOADING?i=t:t.getState()==Ot.IDLE?i.interimTile=t.interimTile:i=t;t=i.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Ot.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){It()}getAlpha(t,i){if(!this.transition_)return 1;let s=this.transitionStarts_[t];if(!s)s=i,this.transitionStarts_[t]=s;else if(s===-1)return 1;const o=i-s+1e3/60;return o>=this.transition_?1:ex(o/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}class fx extends hx{constructor(t,i,s,o,u,f){super(t,i,f),this.crossOrigin_=o,this.src_=s,this.key=s,this.image_=new Image,o!==null&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=u}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Ot.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Ot.ERROR,this.unlistenImage_(),this.image_=XT(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Ot.LOADED:this.state=Ot.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Ot.ERROR&&(this.state=Ot.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ot.IDLE&&(this.state=Ot.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=sx(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function XT(){const a=Ui(1,1);return a.fillStyle="rgba(0,0,0,0)",a.fillRect(0,0,1,1),a.canvas}class VT{constructor(t,i,s){this.decay_=t,this.minVelocity_=i,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let s=i-3;for(;s>0&&this.points_[s+2]>t;)s-=3;const o=this.points_[i+2]-this.points_[s+2];if(o<1e3/60)return!1;const u=this.points_[i]-this.points_[s],f=this.points_[i+1]-this.points_[s+1];return this.angle_=Math.atan2(f,u),this.initialVelocity_=Math.sqrt(u*u+f*f)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class qT extends um{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,i){It()}calculateMatrices2D(t){const i=t.viewState,s=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;sa(s,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),fm(o,s)}forEachFeatureAtCoordinate(t,i,s,o,u,f,d,g){let p;const v=i.viewState;function E(j,X,$,it){return u.call(f,X,j?$:null,it)}const w=v.projection,T=M0(t.slice(),w),b=[[0,0]];if(w.canWrapX()&&o){const j=w.getExtent(),X=we(j);b.push([-X,0],[X,0])}const O=i.layerStatesArray,D=O.length,P=[],k=[];for(let j=0;j<b.length;j++)for(let X=D-1;X>=0;--X){const $=O[X],it=$.layer;if(it.hasRenderer()&&Im($,v)&&d.call(g,it)){const rt=it.getRenderer(),dt=it.getSource();if(rt&&dt){const pt=dt.getWrapX()?T:t,_t=E.bind(null,$.managed);k[0]=pt[0]+b[j][0],k[1]=pt[1]+b[j][1],p=rt.forEachFeatureAtCoordinate(k,i,s,_t,P)}if(p)return p}}if(P.length===0)return;const z=1/P.length;return P.forEach((j,X)=>j.distanceSq+=X*z),P.sort((j,X)=>j.distanceSq-X.distanceSq),P.some(j=>p=j.callback(j.feature,j.layer,j.geometry)),p}hasFeatureAtCoordinate(t,i,s,o,u,f){return this.forEachFeatureAtCoordinate(t,i,s,o,Va,this,u,f)!==void 0}getMap(){return this.map_}renderFrame(t){It()}scheduleExpireIconCache(t){Xh.canExpireCache()&&t.postRenderFunctions.push(KT)}}function KT(a,t){Xh.expire()}class WT extends qT{constructor(t){super(t),this.fontChangeListenerKey_=ee(Xs,nl.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=hf+" ol-layers";const s=t.getViewport();s.insertBefore(this.element_,s.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,i){const s=this.getMap();if(s.hasListener(t)){const o=new ax(t,void 0,i);s.dispatchEvent(o)}}disposeInternal(){Ee(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(ea.PRECOMPOSE,t);const i=t.layerStatesArray.sort(function(f,d){return f.zIndex-d.zIndex}),s=t.viewState;this.children_.length=0;const o=[];let u=null;for(let f=0,d=i.length;f<d;++f){const g=i[f];t.layerIndex=f;const p=g.layer,v=p.getSourceState();if(!Im(g,s)||v!="ready"&&v!="undefined"){p.unrender();continue}const E=p.render(t,u);E&&(E!==u&&(this.children_.push(E),u=E),"getDeclutter"in p&&o.push(p))}for(let f=o.length-1;f>=0;--f)o[f].renderDeclutter(t);DC(this.element_,this.children_),this.dispatchRenderEvent(ea.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}class Qr extends Xn{constructor(t,i){super(t),this.layer=i}}const Sg={LAYERS:"layers"};class gl extends tx{constructor(t){t=t||{};const i=Object.assign({},t);delete i.layers;let s=t.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Sg.LAYERS,this.handleLayersChanged_),s?Array.isArray(s)?s=new _n(s.slice(),{unique:!0}):Vt(typeof s.getArray=="function",43):s=new _n(void 0,{unique:!0}),this.setLayers(s)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ee),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(ee(t,qe.ADD,this.handleLayersAdd_,this),ee(t,qe.REMOVE,this.handleLayersRemove_,this));for(const s in this.listenerKeys_)this.listenerKeys_[s].forEach(Ee);fl(this.listenerKeys_);const i=t.getArray();for(let s=0,o=i.length;s<o;s++){const u=i[s];this.registerLayerListeners_(u),this.dispatchEvent(new Qr("addlayer",u))}this.changed()}registerLayerListeners_(t){const i=[ee(t,nl.PROPERTYCHANGE,this.handleLayerChange_,this),ee(t,Gt.CHANGE,this.handleLayerChange_,this)];t instanceof gl&&i.push(ee(t,"addlayer",this.handleLayerGroupAdd_,this),ee(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Bt(t)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new Qr("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Qr("removelayer",t.layer))}handleLayersAdd_(t){const i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new Qr("addlayer",i)),this.changed()}handleLayersRemove_(t){const i=t.element,s=Bt(i);this.listenerKeys_[s].forEach(Ee),delete this.listenerKeys_[s],this.dispatchEvent(new Qr("removelayer",i)),this.changed()}getLayers(){return this.get(Sg.LAYERS)}setLayers(t){const i=this.getLayers();if(i){const s=i.getArray();for(let o=0,u=s.length;o<u;++o)this.dispatchEvent(new Qr("removelayer",s[o]))}this.set(Sg.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(i){i.getLayersArray(t)}),t}getLayerStatesArray(t){const i=t!==void 0?t:[],s=i.length;this.getLayers().forEach(function(f){f.getLayerStatesArray(i)});const o=this.getLayerState();let u=o.zIndex;!t&&o.zIndex===void 0&&(u=0);for(let f=s,d=i.length;f<d;f++){const g=i[f];g.opacity*=o.opacity,g.visible=g.visible&&o.visible,g.maxResolution=Math.min(g.maxResolution,o.maxResolution),g.minResolution=Math.max(g.minResolution,o.minResolution),g.minZoom=Math.max(g.minZoom,o.minZoom),g.maxZoom=Math.min(g.maxZoom,o.maxZoom),o.extent!==void 0&&(g.extent!==void 0?g.extent=bu(g.extent,o.extent):g.extent=o.extent),g.zIndex===void 0&&(g.zIndex=u)}return i}getSourceState(){return"ready"}}class Jo extends Xn{constructor(t,i,s){super(t),this.map=i,this.frameState=s!==void 0?s:null}}class Wr extends Jo{constructor(t,i,s,o,u,f){super(t,i,u),this.originalEvent=s,this.pixel_=null,this.coordinate_=null,this.dragging=o!==void 0?o:!1,this.activePointers=f}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const de={SINGLECLICK:"singleclick",CLICK:Gt.CLICK,DBLCLICK:Gt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Kg={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class QT extends tf{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const s=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=s,this.pointerdownListenerKey_=ee(s,Kg.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ee(s,Kg.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Gt.TOUCHMOVE,this.boundHandleTouchMove_,v0?{passive:!1}:!1)}emulateClick_(t){let i=new Wr(de.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new Wr(de.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const s=new Wr(de.SINGLECLICK,this.map_,t);this.dispatchEvent(s)},250)}updateActivePointers_(t){const i=t,s=i.pointerId;if(i.type==de.POINTERUP||i.type==de.POINTERCANCEL){delete this.trackedTouches_[s];for(const o in this.trackedTouches_)if(this.trackedTouches_[o].target!==i.target){delete this.trackedTouches_[o];break}}else(i.type==de.POINTERDOWN||i.type==de.POINTERMOVE)&&(this.trackedTouches_[s]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const i=new Wr(de.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ee),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const i=new Wr(de.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const s=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ee(s,de.POINTERMOVE,this.handlePointerMove_,this),ee(s,de.POINTERUP,this.handlePointerUp_,this),ee(this.element_,de.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==s&&this.dragListenerKeys_.push(ee(this.element_.getRootNode(),de.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const i=new Wr(de.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Wr(de.POINTERMOVE,this.map_,t,i))}handleTouchMove_(t){const i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ee(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Gt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ee(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ee),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Vs={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Li={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Vh=1/0;class JT{constructor(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,fl(this.queuedElements_)}dequeue(){const t=this.elements_,i=this.priorities_,s=t[0];t.length==1?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));const o=this.keyFunction_(s);return delete this.queuedElements_[o],s}enqueue(t){Vt(!(this.keyFunction_(t)in this.queuedElements_),31);const i=this.priorityFunction_(t);return i!=Vh?(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const i=this.elements_,s=this.priorities_,o=i.length,u=i[t],f=s[t],d=t;for(;t<o>>1;){const g=this.getLeftChildIndex_(t),p=this.getRightChildIndex_(t),v=p<o&&s[p]<s[g]?p:g;i[t]=i[v],s[t]=s[v],t=v}i[t]=u,s[t]=f,this.siftDown_(d,t)}siftDown_(t,i){const s=this.elements_,o=this.priorities_,u=s[i],f=o[i];for(;i>t;){const d=this.getParentIndex_(i);if(o[d]>f)s[i]=s[d],o[i]=o[d],i=d;else break}s[i]=u,o[i]=f}reprioritize(){const t=this.priorityFunction_,i=this.elements_,s=this.priorities_;let o=0;const u=i.length;let f,d,g;for(d=0;d<u;++d)f=i[d],g=t(f),g==Vh?delete this.queuedElements_[this.keyFunction_(f)]:(s[o]=g,i[o++]=f);i.length=o,s.length=o,this.heapify_()}}class $T extends JT{constructor(t,i){super(function(s){return t.apply(null,s)},function(s){return s[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const i=super.enqueue(t);return i&&t[0].addEventListener(Gt.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const i=t.target,s=i.getState();if(s===Ot.LOADED||s===Ot.ERROR||s===Ot.EMPTY){s!==Ot.ERROR&&i.removeEventListener(Gt.CHANGE,this.boundHandleTileChange_);const o=i.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let s=0,o,u,f;for(;this.tilesLoading_<t&&s<i&&this.getCount()>0;)u=this.dequeue()[0],f=u.getKey(),o=u.getState(),o===Ot.IDLE&&!(f in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[f]=!0,++this.tilesLoading_,++s,u.load())}}function tb(a,t,i,s,o){if(!a||!(i in a.wantedTiles)||!a.wantedTiles[i][t.getKey()])return Vh;const u=a.viewState.center,f=s[0]-u[0],d=s[1]-u[1];return 65536*Math.log(o)+Math.sqrt(f*f+d*d)/o}class km extends Vn{constructor(t){super();const i=t.element;i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){jh(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&jh(this.element);for(let i=0,s=this.listenerKeys.length;i<s;++i)Ee(this.listenerKeys[i]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==sl&&this.listenerKeys.push(ee(t,Vs.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class eb extends km{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const i=t.className!==void 0?t.className:"ol-attribution",s=t.tipLabel!==void 0?t.tipLabel:"Attributions",o=t.expandClassName!==void 0?t.expandClassName:i+"-expand",u=t.collapseLabel!==void 0?t.collapseLabel:"",f=t.collapseClassName!==void 0?t.collapseClassName:i+"-collapse";typeof u=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=u,this.collapseLabel_.className=f):this.collapseLabel_=u;const d=t.label!==void 0?t.label:"i";typeof d=="string"?(this.label_=document.createElement("span"),this.label_.textContent=d,this.label_.className=o):this.label_=d;const g=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=s,this.toggleButton_.appendChild(g),this.toggleButton_.addEventListener(Gt.CLICK,this.handleClick_.bind(this),!1);const p=i+" "+hf+" "+Am+(this.collapsed_&&this.collapsible_?" "+dv:"")+(this.collapsible_?"":" ol-uncollapsible"),v=this.element;v.className=p,v.appendChild(this.toggleButton_),v.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const i=Array.from(new Set(this.getMap().getAllLayers().flatMap(o=>o.getAttributions(t)))),s=!this.getMap().getAllLayers().some(o=>o.getSource()&&o.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(s),i}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const i=this.collectSourceAttributions_(t),s=i.length>0;if(this.renderedVisible_!=s&&(this.element.style.display=s?"":"none",this.renderedVisible_=s),!tr(i,this.renderedAttributions_)){K0(this.ulElement_);for(let o=0,u=i.length;o<u;++o){const f=document.createElement("li");f.innerHTML=i[o],this.ulElement_.appendChild(f)}this.renderedAttributions_=i}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(dv),this.collapsed_?fv(this.collapseLabel_,this.label_):fv(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class ib extends km{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const i=t.className!==void 0?t.className:"ol-rotate",s=t.label!==void 0?t.label:"",o=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof s=="string"?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=s):(this.label_=s,this.label_.classList.add(o));const u=t.tipLabel?t.tipLabel:"Reset rotation",f=document.createElement("button");f.className=i+"-reset",f.setAttribute("type","button"),f.title=u,f.appendChild(this.label_),f.addEventListener(Gt.CLICK,this.handleClick_.bind(this),!1);const d=i+" "+hf+" "+Am,g=this.element;g.className=d,g.appendChild(f),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(wh)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const i=this.getMap().getView();if(!i)return;const s=i.getRotation();s!==void 0&&(this.duration_>0&&s%(2*Math.PI)!==0?i.animate({rotation:0,duration:this.duration_,easing:dl}):i.setRotation(0))}render(t){const i=t.frameState;if(!i)return;const s=i.viewState.rotation;if(s!=this.rotation_){const o="rotate("+s+"rad)";if(this.autoHide_){const u=this.element.classList.contains(wh);!u&&s===0?this.element.classList.add(wh):u&&s!==0&&this.element.classList.remove(wh)}this.label_.style.transform=o}this.rotation_=s}}class nb extends km{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const i=t.className!==void 0?t.className:"ol-zoom",s=t.delta!==void 0?t.delta:1,o=t.zoomInClassName!==void 0?t.zoomInClassName:i+"-in",u=t.zoomOutClassName!==void 0?t.zoomOutClassName:i+"-out",f=t.zoomInLabel!==void 0?t.zoomInLabel:"+",d=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",g=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",p=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=o,v.setAttribute("type","button"),v.title=g,v.appendChild(typeof f=="string"?document.createTextNode(f):f),v.addEventListener(Gt.CLICK,this.handleClick_.bind(this,s),!1);const E=document.createElement("button");E.className=u,E.setAttribute("type","button"),E.title=p,E.appendChild(typeof d=="string"?document.createTextNode(d):d),E.addEventListener(Gt.CLICK,this.handleClick_.bind(this,-s),!1);const w=i+" "+hf+" "+Am,T=this.element;T.className=w,T.appendChild(v),T.appendChild(E),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,i){i.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const s=this.getMap().getView();if(!s)return;const o=s.getZoom();if(o!==void 0){const u=s.getConstrainedZoom(o+t);this.duration_>0?(s.getAnimating()&&s.cancelAnimations(),s.animate({zoom:u,duration:this.duration_,easing:dl})):s.setZoom(u)}}}function sb(a){a=a||{};const t=new _n;return(a.zoom!==void 0?a.zoom:!0)&&t.push(new nb(a.zoomOptions)),(a.rotate!==void 0?a.rotate:!0)&&t.push(new ib(a.rotateOptions)),(a.attribution!==void 0?a.attribution:!0)&&t.push(new eb(a.attributionOptions)),t}const zv={ACTIVE:"active"};class ml extends Vn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(zv.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(zv.ACTIVE,t)}setMap(t){this.map_=t}}function rb(a,t,i){const s=a.getCenterInternal();if(s){const o=[s[0]+t[0],s[1]+t[1]];a.animateInternal({duration:i!==void 0?i:250,easing:WC,center:a.getConstrainedCenter(o)})}}function Fm(a,t,i,s){const o=a.getZoom();if(o===void 0)return;const u=a.getConstrainedZoom(o+t),f=a.getResolutionForZoom(u);a.getAnimating()&&a.cancelAnimations(),a.animate({resolution:f,anchor:i,duration:s!==void 0?s:250,easing:dl})}class ab extends ml{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let i=!1;if(t.type==de.DBLCLICK){const s=t.originalEvent,o=t.map,u=t.coordinate,f=s.shiftKey?-this.delta_:this.delta_,d=o.getView();Fm(d,f,u,this.duration_),s.preventDefault(),i=!0}return!i}}class _l extends ml{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==de.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==de.POINTERUP){const s=this.handleUpEvent(t);this.handlingDownUpSequence=s&&this.targetPointers.length>0}}else if(t.type==de.POINTERDOWN){const s=this.handleDownEvent(t);this.handlingDownUpSequence=s,i=this.stopDown(s)}else t.type==de.POINTERMOVE&&this.handleMoveEvent(t);return!i}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Gm(a){const t=a.length;let i=0,s=0;for(let o=0;o<t;o++)i+=a[o].clientX,s+=a[o].clientY;return{clientX:i/t,clientY:s/t}}function Wg(a){const t=arguments;return function(i){let s=!0;for(let o=0,u=t.length;o<u&&(s=s&&t[o](i),!!s);++o);return s}}const ob=function(a){const t=a.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},lb=function(a){const t=a.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ub=function(a){const t=a.map.getTargetElement(),i=a.map.getOwnerDocument().activeElement;return t.contains(i)},dx=function(a){return a.map.getTargetElement().hasAttribute("tabindex")?ub(a):!0},gx=Va,cb=function(a){return a.type==de.CLICK},mx=function(a){const t=a.originalEvent;return t.button==0&&!(bw&&Rw&&t.ctrlKey)},Nv=Xu,_x=function(a){return a.type==de.SINGLECLICK},px=function(a){const t=a.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},yx=function(a){const t=a.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},vx=function(a){const t=a.originalEvent,i=t.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!t.target.isContentEditable},wg=function(a){const t=a.originalEvent;return Vt(t!==void 0,56),t.pointerType=="mouse"},xx=function(a){const t=a.originalEvent;return Vt(t!==void 0,56),t.isPrimary&&t.button===0};class hb extends _l{constructor(t){super({stopDown:Xu}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=t.condition?t.condition:Wg(px,xx);this.condition_=t.onFocusOnly?Wg(dx,i):i,this.noKinetic_=!1}handleDragEvent(t){const i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const s=this.targetPointers,o=i.getEventPixel(Gm(s));if(s.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){const u=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],d=t.map.getView();Ww(u,d.getResolution()),pm(u,d.getRotation()),d.adjustCenterInternal(u)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=s.length,t.originalEvent.preventDefault()}handleUpEvent(t){const i=t.map,s=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const o=this.kinetic_.getDistance(),u=this.kinetic_.getAngle(),f=s.getCenterInternal(),d=i.getPixelFromCoordinateInternal(f),g=i.getCoordinateFromPixelInternal([d[0]-o*Math.cos(u),d[1]-o*Math.sin(u)]);s.animateInternal({center:s.getConstrainedCenter(g),duration:500,easing:dl})}return this.panning_&&(this.panning_=!1,s.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const s=t.map.getView();return this.lastCentroid=null,s.getAnimating()&&s.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class fb extends _l{constructor(t){t=t||{},super({stopDown:Xu}),this.condition_=t.condition?t.condition:lb,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!wg(t))return;const i=t.map,s=i.getView();if(s.getConstraints().rotation===Nm)return;const o=i.getSize(),u=t.pixel,f=Math.atan2(o[1]/2-u[1],u[0]-o[0]/2);if(this.lastAngle_!==void 0){const d=f-this.lastAngle_;s.adjustRotationInternal(-d)}this.lastAngle_=f}handleUpEvent(t){return wg(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return wg(t)&&mx(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class db extends um{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,i=this.endPixel_,s="px",o=this.element_.style;o.left=Math.min(t[0],i[0])+s,o.top=Math.min(t[1],i[1])+s,o.width=Math.abs(i[0]-t[0])+s,o.height=Math.abs(i[1]-t[1])+s}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,i=this.endPixel_,o=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Ai([o])}getGeometry(){return this.geometry_}}const Lh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Cg extends Xn{constructor(t,i,s){super(t),this.coordinate=i,this.mapBrowserEvent=s}}class gb extends _l{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new db(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:mx,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,i,s){const o=s[0]-i[0],u=s[1]-i[1];return o*o+u*u>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Cg(Lh.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new Cg(i?Lh.BOXEND:Lh.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Cg(Lh.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}class mb extends gb{constructor(t){t=t||{};const i=t.condition?t.condition:yx;super({condition:i,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const s=this.getMap().getView();let o=this.getGeometry();if(this.out_){const u=s.rotatedExtentForGeometry(o),f=s.getResolutionForExtentInternal(u),d=s.getResolution()/f;o=o.clone(),o.scale(d*d)}s.fitInternal(o,{duration:this.duration_,easing:dl})}}const Na={LEFT:37,UP:38,RIGHT:39,DOWN:40};class _b extends ml{constructor(t){super(),t=t||{},this.defaultCondition_=function(i){return px(i)&&vx(i)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let i=!1;if(t.type==Gt.KEYDOWN){const s=t.originalEvent,o=s.keyCode;if(this.condition_(t)&&(o==Na.DOWN||o==Na.LEFT||o==Na.RIGHT||o==Na.UP)){const f=t.map.getView(),d=f.getResolution()*this.pixelDelta_;let g=0,p=0;o==Na.DOWN?p=-d:o==Na.LEFT?g=-d:o==Na.RIGHT?g=d:p=d;const v=[g,p];pm(v,f.getRotation()),rb(f,v,this.duration_),s.preventDefault(),i=!0}}return!i}}class pb extends ml{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:vx,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let i=!1;if(t.type==Gt.KEYDOWN||t.type==Gt.KEYPRESS){const s=t.originalEvent,o=s.key;if(this.condition_(t)&&(o==="+"||o==="-")){const u=t.map,f=o==="+"?this.delta_:-this.delta_,d=u.getView();Fm(d,f,void 0,this.duration_),s.preventDefault(),i=!0}}return!i}}class yb extends ml{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const i=t.condition?t.condition:gx;this.condition_=t.onFocusOnly?Wg(dx,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==Gt.WHEEL)return!0;const s=t.map,o=t.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let u;if(t.type==Gt.WHEEL&&(u=o.deltaY,Cw&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(u/=y0),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(u*=40)),u===0)return!1;this.lastDelta_=u;const f=Date.now();this.startTime_===void 0&&(this.startTime_=f),(!this.mode_||f-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(u)<4?"trackpad":"wheel");const d=s.getView();if(this.mode_==="trackpad"&&!(d.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(d.getAnimating()&&d.cancelAnimations(),d.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),d.adjustZoom(-u/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=f,!1;this.totalDelta_+=u;const g=Math.max(this.timeout_-(f-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,s),g),!1}handleWheelZoom_(t){const i=t.getView();i.getAnimating()&&i.cancelAnimations();let s=-Ke(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(s=s?s>0?1:-1:0),Fm(i,s,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class vb extends _l{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=Xu),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let i=0;const s=this.targetPointers[0],o=this.targetPointers[1],u=Math.atan2(o.clientY-s.clientY,o.clientX-s.clientX);if(this.lastAngle_!==void 0){const g=u-this.lastAngle_;this.rotationDelta_+=g,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=g}this.lastAngle_=u;const f=t.map,d=f.getView();d.getConstraints().rotation!==Nm&&(this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(Gm(this.targetPointers))),this.rotating_&&(f.render(),d.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class xb extends _l{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=Xu),super(i),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let i=1;const s=this.targetPointers[0],o=this.targetPointers[1],u=s.clientX-o.clientX,f=s.clientY-o.clientY,d=Math.sqrt(u*u+f*f);this.lastDistance_!==void 0&&(i=this.lastDistance_/d),this.lastDistance_=d;const g=t.map,p=g.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=g.getCoordinateFromPixelInternal(g.getEventPixel(Gm(this.targetPointers))),g.render(),p.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const s=t.map.getView(),o=this.lastScaleDelta_>1?1:-1;return s.endInteraction(this.duration_,o),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function Eb(a){a=a||{};const t=new _n,i=new VT(-.005,.05,100);return(a.altShiftDragRotate!==void 0?a.altShiftDragRotate:!0)&&t.push(new fb),(a.doubleClickZoom!==void 0?a.doubleClickZoom:!0)&&t.push(new ab({delta:a.zoomDelta,duration:a.zoomDuration})),(a.dragPan!==void 0?a.dragPan:!0)&&t.push(new hb({onFocusOnly:a.onFocusOnly,kinetic:i})),(a.pinchRotate!==void 0?a.pinchRotate:!0)&&t.push(new vb),(a.pinchZoom!==void 0?a.pinchZoom:!0)&&t.push(new xb({duration:a.zoomDuration})),(a.keyboard!==void 0?a.keyboard:!0)&&(t.push(new _b),t.push(new pb({delta:a.zoomDelta,duration:a.zoomDuration}))),(a.mouseWheelZoom!==void 0?a.mouseWheelZoom:!0)&&t.push(new yb({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(a.shiftDragZoom!==void 0?a.shiftDragZoom:!0)&&t.push(new mb({duration:a.zoomDuration})),t}function Ex(a){if(a instanceof df){a.setMapInternal(null);return}a instanceof gl&&a.getLayers().forEach(Ex)}function Sx(a,t){if(a instanceof df){a.setMapInternal(t);return}if(a instanceof gl){const i=a.getLayers().getArray();for(let s=0,o=i.length;s<o;++s)Sx(i[s],t)}}let Sb=class extends Vn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const i=wb(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:y0,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=cs(),this.pixelToCoordinateTransform_=cs(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=i.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=i.controls||sb(),this.interactions=i.interactions||Eb({onFocusOnly:!0}),this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new $T(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Li.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Li.VIEW,this.handleViewChanged_),this.addChangeListener(Li.SIZE,this.handleSizeChanged_),this.addChangeListener(Li.TARGET,this.handleTargetChanged_),this.setProperties(i.values);const s=this;t.view&&!(t.view instanceof os)&&t.view.then(function(o){s.setView(new os(o))}),this.controls.addEventListener(qe.ADD,o=>{o.element.setMap(this)}),this.controls.addEventListener(qe.REMOVE,o=>{o.element.setMap(null)}),this.interactions.addEventListener(qe.ADD,o=>{o.element.setMap(this)}),this.interactions.addEventListener(qe.REMOVE,o=>{o.element.setMap(null)}),this.overlays_.addEventListener(qe.ADD,o=>{this.addOverlayInternal_(o.element)}),this.overlays_.addEventListener(qe.REMOVE,o=>{const u=o.element.getId();u!==void 0&&delete this.overlayIdIndex_[u.toString()],o.element.setMap(null)}),this.controls.forEach(o=>{o.setMap(this)}),this.interactions.forEach(o=>{o.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Sx(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,i,s){if(!this.frameState_||!this.renderer_)return;const o=this.getCoordinateFromPixelInternal(t);s=s!==void 0?s:{};const u=s.hitTolerance!==void 0?s.hitTolerance:0,f=s.layerFilter!==void 0?s.layerFilter:Va,d=s.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,u,d,i,null,f,null)}getFeaturesAtPixel(t,i){const s=[];return this.forEachFeatureAtPixel(t,function(o){s.push(o)},i),s}getAllLayers(){const t=[];function i(s){s.forEach(function(o){o instanceof gl?i(o.getLayers()):t.push(o)})}return i(this.getLayers()),t}hasFeatureAtPixel(t,i){if(!this.frameState_||!this.renderer_)return!1;const s=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const o=i.layerFilter!==void 0?i.layerFilter:Va,u=i.hitTolerance!==void 0?i.hitTolerance:0,f=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(s,this.frameState_,u,f,o,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const s=this.viewport_.getBoundingClientRect(),o=this.getSize(),u=s.width/o[0],f=s.height/o[1],d="changedTouches"in t?t.changedTouches[0]:t;return[(d.clientX-s.left)/u,(d.clientY-s.top)/f]}getTarget(){return this.get(Li.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Du(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const i=this.frameState_;return i?mi(i.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Li.LAYERGROUP)}setLayers(t){const i=this.getLayerGroup();if(t instanceof _n){i.setLayers(t);return}const s=i.getLayers();s.clear(),s.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,s=t.length;i<s;++i){const o=t[i];if(!o.visible)continue;const u=o.layer.getRenderer();if(u&&!u.ready)return!0;const f=o.layer.getSource();if(f&&f.loading)return!0}return!1}getPixelFromCoordinate(t){const i=ni(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)}getPixelFromCoordinateInternal(t){const i=this.frameState_;return i?mi(i.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Li.SIZE)}getView(){return this.get(Li.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,i,s,o){return tb(this.frameState_,t,i,s,o)}handleBrowserEvent(t,i){i=i||t.type;const s=new Wr(i,this,t);this.handleMapBrowserEvent(s)}handleMapBrowserEvent(t){if(!this.frameState_)return;const i=t.originalEvent,s=i.type;if(s===Kg.POINTERDOWN||s===Gt.WHEEL||s===Gt.KEYDOWN){const o=this.getOwnerDocument(),u=this.viewport_.getRootNode?this.viewport_.getRootNode():o,f=i.target;if(this.overlayContainerStopEvent_.contains(f)||!(u===o?o.documentElement:u).contains(f))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const o=this.getInteractions().getArray().slice();for(let u=o.length-1;u>=0;u--){const f=o[u];if(f.getMap()!==this||!f.getActive()||!this.getTargetElement())continue;if(!f.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){let o=this.maxTilesLoading_,u=o;if(t){const f=t.viewHints;if(f[Mi.ANIMATING]||f[Mi.INTERACTING]){const d=Date.now()-t.time>8;o=d?0:8,u=d?0:2}}i.getTilesLoading()<o&&(i.reprioritize(),i.loadMoreTiles(o,u))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(ea.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ea.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Jo(Vs.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Jo(Vs.LOADSTART,this,t))));const s=this.postRenderFunctions_;for(let o=0,u=s.length;o<u;++o)s[o](this,t);s.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let s=0,o=this.targetChangeHandlerKeys_.length;s<o;++s)Ee(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Gt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Gt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,jh(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const s=this.targetElement_.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.unobserve(s.host)}const t=this.getTarget(),i=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=i,!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new WT(this)),this.mapBrowserEventHandler_=new QT(this,this.moveTolerance_);for(const u in de)this.mapBrowserEventHandler_.addEventListener(de[u],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Gt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Gt.WHEEL,this.boundHandleBrowserEvent_,v0?{passive:!1}:!1);const s=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[ee(s,Gt.KEYDOWN,this.handleBrowserEvent,this),ee(s,Gt.KEYPRESS,this.handleBrowserEvent,this)];const o=i.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),this.resizeObserver_.observe(i)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ee(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ee(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ee(t,nl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ee(t,Gt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ee),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Qr("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ee(t,nl.PROPERTYCHANGE,this.render,this),ee(t,Gt.CHANGE,this.render,this),ee(t,"addlayer",this.handleLayerAdd_,this),ee(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,s=t.length;i<s;++i){const o=t[i].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Ex(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const i=this.getSize(),s=this.getView(),o=this.frameState_;let u=null;if(i!==void 0&&cv(i)&&s&&s.isDef()){const f=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),d=s.getState();if(u={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Fg(d.center,d.resolution,d.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:d,viewHints:f,wantedTiles:{},mapId:Bt(this),renderTargets:{}},d.nextCenter&&d.nextResolution){const g=isNaN(d.nextRotation)?d.rotation:d.nextRotation;u.nextExtent=Fg(d.nextCenter,d.nextResolution,g,i)}}this.frameState_=u,this.renderer_.renderFrame(u),u&&(u.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,u.postRenderFunctions),o&&(!this.previousExtent_||!gm(this.previousExtent_)&&!Au(u.extent,this.previousExtent_))&&(this.dispatchEvent(new Jo(Vs.MOVESTART,this,o)),this.previousExtent_=qu(this.previousExtent_)),this.previousExtent_&&!u.viewHints[Mi.ANIMATING]&&!u.viewHints[Mi.INTERACTING]&&!Au(u.extent,this.previousExtent_)&&(this.dispatchEvent(new Jo(Vs.MOVEEND,this,u)),E0(u.extent,this.previousExtent_))),this.dispatchEvent(new Jo(Vs.POSTRENDER,this,u)),this.renderComplete_=this.hasListener(Vs.LOADSTART)||this.hasListener(Vs.LOADEND)||this.hasListener(ea.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const i=this.getLayerGroup();i&&this.handleLayerRemove_(new Qr("removelayer",i)),this.set(Li.LAYERGROUP,t)}setSize(t){this.set(Li.SIZE,t)}setTarget(t){this.set(Li.TARGET,t)}setView(t){if(!t||t instanceof os){this.set(Li.VIEW,t);return}this.set(Li.VIEW,new os);const i=this;t.then(function(s){i.setView(new os(s))})}updateSize(){const t=this.getTargetElement();let i;if(t){const o=getComputedStyle(t),u=t.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),f=t.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(u)&&!isNaN(f)&&(i=[u,f],!cv(i)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&O0("No map visible because the map container's width or height are 0."))}const s=this.getSize();i&&(!s||!tr(i,s))&&(this.setSize(i),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let i;const s=getComputedStyle(this.viewport_);s.width&&s.height&&(i=[parseInt(s.width,10),parseInt(s.height,10)]),t.setViewportSize(i)}}};function wb(a){let t=null;a.keyboardEventTarget!==void 0&&(t=typeof a.keyboardEventTarget=="string"?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);const i={},s=a.layers&&typeof a.layers.getLayers=="function"?a.layers:new gl({layers:a.layers});i[Li.LAYERGROUP]=s,i[Li.TARGET]=a.target,i[Li.VIEW]=a.view instanceof os?a.view:new os;let o;a.controls!==void 0&&(Array.isArray(a.controls)?o=new _n(a.controls.slice()):(Vt(typeof a.controls.getArray=="function",47),o=a.controls));let u;a.interactions!==void 0&&(Array.isArray(a.interactions)?u=new _n(a.interactions.slice()):(Vt(typeof a.interactions.getArray=="function",48),u=a.interactions));let f;return a.overlays!==void 0?Array.isArray(a.overlays)?f=new _n(a.overlays.slice()):(Vt(typeof a.overlays.getArray=="function",49),f=a.overlays):f=new _n,{controls:o,interactions:u,keyboardEventTarget:t,overlays:f,values:i}}const Ri={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Qg extends Vn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+PC,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ri.ELEMENT,this.handleElementChanged),this.addChangeListener(Ri.MAP,this.handleMapChanged),this.addChangeListener(Ri.OFFSET,this.handleOffsetChanged),this.addChangeListener(Ri.POSITION,this.handlePositionChanged),this.addChangeListener(Ri.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Ri.ELEMENT)}getId(){return this.id}getMap(){return this.get(Ri.MAP)||null}getOffset(){return this.get(Ri.OFFSET)}getPosition(){return this.get(Ri.POSITION)}getPositioning(){return this.get(Ri.POSITIONING)}handleElementChanged(){K0(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(jh(this.element),Ee(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=ee(t,Vs.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Ri.ELEMENT,t)}setMap(t){this.set(Ri.MAP,t)}setOffset(t){this.set(Ri.OFFSET,t)}setPosition(t){this.set(Ri.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const i=this.getMap();if(!i||!i.getTargetElement()||!this.get(Ri.POSITION))return;const s=this.getRect(i.getTargetElement(),i.getSize()),o=this.getElement(),u=this.getRect(o,[AC(o),OC(o)]);t=t||{};const f=t.margin===void 0?20:t.margin;if(!Fa(s,u)){const d=u[0]-s[0],g=s[2]-u[2],p=u[1]-s[1],v=s[3]-u[3],E=[0,0];if(d<0?E[0]=d-f:g<0&&(E[0]=Math.abs(g)+f),p<0?E[1]=p-f:v<0&&(E[1]=Math.abs(v)+f),E[0]!==0||E[1]!==0){const w=i.getView().getCenterInternal(),T=i.getPixelFromCoordinateInternal(w);if(!T)return;const b=[T[0]+E[0],T[1]+E[1]],O=t.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(b),duration:O.duration,easing:O.easing})}}}getRect(t,i){const s=t.getBoundingClientRect(),o=s.left+window.pageXOffset,u=s.top+window.pageYOffset;return[o,u,o+i[0],u+i[1]]}setPositioning(t){this.set(Ri.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i){this.setVisible(!1);return}const s=t.getPixelFromCoordinate(i),o=t.getSize();this.updateRenderedPosition(s,o)}updateRenderedPosition(t,i){const s=this.element.style,o=this.getOffset(),u=this.getPositioning();this.setVisible(!0);const f=Math.round(t[0]+o[0])+"px",d=Math.round(t[1]+o[1])+"px";let g="0%",p="0%";u=="bottom-right"||u=="center-right"||u=="top-right"?g="-100%":(u=="bottom-center"||u=="center-center"||u=="top-center")&&(g="-50%"),u=="bottom-left"||u=="bottom-center"||u=="bottom-right"?p="-100%":(u=="center-left"||u=="center-center"||u=="center-right")&&(p="-50%");const v=`translate(${g}, ${p}) translate(${f}, ${d})`;this.rendered.transform_!=v&&(this.rendered.transform_=v,s.transform=v)}getOptions(){return this.options}}class Cb{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let i=this.oldest_;for(;i;)t(i.value_,i.key_,this),i=i.newer}get(t,i){const s=this.entries_[t];return Vt(s!==void 0,15),s===this.newest_||(s===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(s.newer.older=s.older,s.older.newer=s.newer),s.newer=null,s.older=this.newest_,this.newest_.newer=s,this.newest_=s),s.value_}remove(t){const i=this.entries_[t];return Vt(i!==void 0,15),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let i=0,s;for(s=this.newest_;s;s=s.older)t[i++]=s.key_;return t}getValues(){const t=new Array(this.count_);let i=0,s;for(s=this.newest_;s;s=s.older)t[i++]=s.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,i){this.get(t),this.entries_[t].value_=i}set(t,i){Vt(!(t in this.entries_),16);const s={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=s:this.oldest_=s,this.newest_=s,this.entries_[t]=s,++this.count_}setSize(t){this.highWaterMark=t}}function Iv(a,t,i,s){return s!==void 0?(s[0]=a,s[1]=t,s[2]=i,s):[a,t,i]}function mf(a,t,i){return a+"/"+t+"/"+i}function wx(a){return mf(a[0],a[1],a[2])}function Tb(a){return a.split("/").map(Number)}function bb(a){return(a[1]<<a[0])+a[2]}function Rb(a,t){const i=a[0],s=a[1],o=a[2];if(t.getMinZoom()>i||i>t.getMaxZoom())return!1;const u=t.getFullTileRange(i);return u?u.containsXY(s,o):!0}class Cx extends Cb{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),s=Tb(t)[0];this.forEach(o=>{o.tileCoord[0]!==s&&(this.remove(wx(o.tileCoord)),o.release())})}}class Bm{constructor(t,i,s,o){this.minX=t,this.maxX=i,this.minY=s,this.maxY=o}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Vo(a,t,i,s,o){return o!==void 0?(o.minX=a,o.maxX=t,o.minY=i,o.maxY=s,o):new Bm(a,t,i,s)}class qh extends N0{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ee),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,i=this.geometries_.length;t<i;++t)this.changeEventsKeys_.push(ee(this.geometries_[t],Gt.CHANGE,this.changed,this))}clone(){const t=new qh(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,i,s,o){if(o<Qa(this.getExtent(),t,i))return o;const u=this.geometries_;for(let f=0,d=u.length;f<d;++f)o=u[f].closestPointXY(t,i,s,o);return o}containsXY(t,i){const s=this.geometries_;for(let o=0,u=s.length;o<u;++o)if(s[o].containsXY(t,i))return!0;return!1}computeExtent(t){qu(t);const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)w0(t,i[s].getExtent());return t}getGeometries(){return kv(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].getType()===this.getType()?t=t.concat(i[s].getGeometriesArrayRecursive()):t.push(i[s]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=[],s=this.geometries_;let o=!1;for(let u=0,f=s.length;u<f;++u){const d=s[u],g=d.getSimplifiedGeometry(t);i.push(g),g!==d&&(o=!0)}if(o){const u=new qh(null);return u.setGeometriesArray(i),u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)if(i[s].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,i){const s=this.geometries_;for(let o=0,u=s.length;o<u;++o)s[o].rotate(t,i);this.changed()}scale(t,i,s){s||(s=qa(this.getExtent()));const o=this.geometries_;for(let u=0,f=o.length;u<f;++u)o[u].scale(t,i,s);this.changed()}setGeometries(t){this.setGeometriesArray(kv(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].applyTransform(t);this.changed()}translate(t,i){const s=this.geometries_;for(let o=0,u=s.length;o<u;++o)s[o].translate(t,i);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function kv(a){const t=[];for(let i=0,s=a.length;i<s;++i)t.push(a[i].clone());return t}class Kh extends $a{constructor(t,i,s){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,i);else if(i!==void 0&&s)this.setFlatCoordinates(i,t),this.ends_=s;else{let o=this.getLayout();const u=t,f=[],d=[];for(let g=0,p=u.length;g<p;++g){const v=u[g];g===0&&(o=v.getLayout()),Hn(f,v.getFlatCoordinates()),d.push(f.length)}this.setFlatCoordinates(o,f),this.ends_=d}}appendLineString(t){this.flatCoordinates?Hn(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Kh(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,s,o){return o<Qa(this.getExtent(),t,i)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Cm(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bm(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,s,o))}getCoordinateAtM(t,i,s){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(i=i!==void 0?i:!1,s=s!==void 0?s:!1,wC(this.flatCoordinates,0,this.ends_,this.stride,t,i,s))}getCoordinates(){return Pu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Ka(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,i=this.ends_,s=this.layout,o=[];let u=0;for(let f=0,d=i.length;f<d;++f){const g=i[f],p=new Ka(t.slice(u,g),s);o.push(p),u=g}return o}getFlatMidpoints(){const t=[],i=this.flatCoordinates;let s=0;const o=this.ends_,u=this.stride;for(let f=0,d=o.length;f<d;++f){const g=o[f],p=Y0(i,s,g,u,.5);Hn(t,p),s=g}return t}getSimplifiedGeometryInternal(t){const i=[],s=[];return i.length=fC(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,s),new Kh(i,"XY",s)}getType(){return"MultiLineString"}intersectsExtent(t){return vC(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=Rm(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}class _f extends $a{constructor(t,i){super(),i&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendPoint(t){this.flatCoordinates?Hn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new _f(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,s,o){if(o<Qa(this.getExtent(),t,i))return o;const u=this.flatCoordinates,f=this.stride;for(let d=0,g=u.length;d<g;d+=f){const p=ja(t,i,u[d],u[d+1]);if(p<o){o=p;for(let v=0;v<f;++v)s[v]=u[d+v];s.length=f}}return o}getCoordinates(){return $r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const i=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||i<=t?null:new Yn(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,i=this.layout,s=this.stride,o=[];for(let u=0,f=t.length;u<f;u+=s){const d=new Yn(t.slice(u,u+s),i);o.push(d)}return o}getType(){return"MultiPoint"}intersectsExtent(t){const i=this.flatCoordinates,s=this.stride;for(let o=0,u=i.length;o<u;o+=s){const f=i[o],d=i[o+1];if(dm(t,f,d))return!0}return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=of(this.flatCoordinates,0,t,this.stride),this.changed()}}function Lb(a,t,i,s){const o=[];let u=On();for(let f=0,d=i.length;f<d;++f){const g=i[f];u=S0(a,t,g[0],s),o.push((u[0]+u[2])/2,(u[1]+u[3])/2),t=g[g.length-1]}return o}class Wh extends $a{constructor(t,i,s){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(t[0])){let o=this.getLayout();const u=t,f=[],d=[];for(let g=0,p=u.length;g<p;++g){const v=u[g];g===0&&(o=v.getLayout());const E=f.length,w=v.getEnds();for(let T=0,b=w.length;T<b;++T)w[T]+=E;Hn(f,v.getFlatCoordinates()),d.push(w)}i=o,t=f,s=d}i!==void 0&&s?(this.setFlatCoordinates(i,t),this.endss_=s):this.setCoordinates(t,i)}appendPolygon(t){let i;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();else{const s=this.flatCoordinates.length;Hn(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(let o=0,u=i.length;o<u;++o)i[o]+=s}this.endss_.push(i),this.changed()}clone(){const t=this.endss_.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=this.endss_[o].slice();const s=new Wh(this.flatCoordinates.slice(),this.layout,i);return s.applyProperties(this),s}closestPointXY(t,i,s,o){return o<Qa(this.getExtent(),t,i)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lC(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,s,o))}containsXY(t,i){return pC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)}getArea(){return mC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),lv(i,0,this.endss_,this.stride,t)):i=this.flatCoordinates,jg(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Lb(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=yC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new _f(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;SC(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=lv(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],s=[];return i.length=gC(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,s),new Wh(i,"XY",s)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let i;if(t===0)i=0;else{const u=this.endss_[t-1];i=u[u.length-1]}const s=this.endss_[t].slice(),o=s[s.length-1];if(i!==0)for(let u=0,f=s.length;u<f;++u)s[u]-=i;return new Ai(this.flatCoordinates.slice(i,o),this.layout,s)}getPolygons(){const t=this.layout,i=this.flatCoordinates,s=this.endss_,o=[];let u=0;for(let f=0,d=s.length;f<d;++f){const g=s[f].slice(),p=g[g.length-1];if(u!==0)for(let E=0,w=g.length;E<w;++E)g[E]-=u;const v=new Ai(i.slice(u,p),t,g);o.push(v),u=p}return o}getType(){return"MultiPolygon"}intersectsExtent(t){return xC(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=hC(this.flatCoordinates,0,t,this.stride,this.endss_);if(s.length===0)this.flatCoordinates.length=0;else{const o=s[s.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()}}class Mb{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,i){if(i){let s=i.dataProjection?ri(i.dataProjection):this.readProjection(t);i.extent&&s&&s.getUnits()==="tile-pixels"&&(s=ri(s),s.setWorldExtent(i.extent)),i={dataProjection:s,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return It()}readFeature(t,i){return It()}readFeatures(t,i){return It()}readGeometry(t,i){return It()}readProjection(t){return It()}writeFeature(t,i){return It()}writeFeatures(t,i){return It()}writeGeometry(t,i){return It()}}function Tx(a,t,i){const s=i?ri(i.featureProjection):null,o=i?ri(i.dataProjection):null;let u;if(s&&o&&!ka(s,o)?u=(t?a.clone():a).transform(t?s:o,t?o:s):u=a,t&&i&&i.decimals!==void 0){const f=Math.pow(10,i.decimals),d=function(g){for(let p=0,v=g.length;p<v;++p)g[p]=Math.round(g[p]*f)/f;return g};u===a&&(u=a.clone()),u.applyTransform(d)}return u}const Ab=.5,Ob=10,Fv=.25;class Db{constructor(t,i,s,o,u,f){this.sourceProj_=t,this.targetProj_=i;let d={};const g=Bh(this.targetProj_,this.sourceProj_);this.transformInv_=function(k){const z=k[0]+"/"+k[1];return d[z]||(d[z]=g(k)),d[z]},this.maxSourceExtent_=o,this.errorThresholdSquared_=u*u,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&we(o)==we(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?we(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?we(this.targetProj_.getExtent()):null;const p=Ja(s),v=af(s),E=rf(s),w=sf(s),T=this.transformInv_(p),b=this.transformInv_(v),O=this.transformInv_(E),D=this.transformInv_(w),P=Ob+(f?Math.max(0,Math.ceil(Math.log2(kg(s)/(f*f*256*256)))):0);if(this.addQuad_(p,v,E,w,T,b,O,D,P),this.wrapsXInSource_){let k=1/0;this.triangles_.forEach(function(z,j,X){k=Math.min(k,z.source[0][0],z.source[1][0],z.source[2][0])}),this.triangles_.forEach(z=>{if(Math.max(z.source[0][0],z.source[1][0],z.source[2][0])-k>this.sourceWorldWidth_/2){const j=[[z.source[0][0],z.source[0][1]],[z.source[1][0],z.source[1][1]],[z.source[2][0],z.source[2][1]]];j[0][0]-k>this.sourceWorldWidth_/2&&(j[0][0]-=this.sourceWorldWidth_),j[1][0]-k>this.sourceWorldWidth_/2&&(j[1][0]-=this.sourceWorldWidth_),j[2][0]-k>this.sourceWorldWidth_/2&&(j[2][0]-=this.sourceWorldWidth_);const X=Math.min(j[0][0],j[1][0],j[2][0]);Math.max(j[0][0],j[1][0],j[2][0])-X<this.sourceWorldWidth_/2&&(z.source=j)}})}d={}}addTriangle_(t,i,s,o,u,f){this.triangles_.push({source:[o,u,f],target:[t,i,s]})}addQuad_(t,i,s,o,u,f,d,g,p){const v=jn([u,f,d,g]),E=this.sourceWorldWidth_?we(v)/this.sourceWorldWidth_:null,w=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&E>.5&&E<1;let b=!1;if(p>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const D=jn([t,i,s,o]);b=we(D)/this.targetWorldWidth_>Fv||b}!T&&this.sourceProj_.isGlobal()&&E&&(b=E>Fv||b)}if(!b&&this.maxSourceExtent_&&isFinite(v[0])&&isFinite(v[1])&&isFinite(v[2])&&isFinite(v[3])&&!Zi(v,this.maxSourceExtent_))return;let O=0;if(!b&&(!isFinite(u[0])||!isFinite(u[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(d[0])||!isFinite(d[1])||!isFinite(g[0])||!isFinite(g[1]))){if(p>0)b=!0;else if(O=(!isFinite(u[0])||!isFinite(u[1])?8:0)+(!isFinite(f[0])||!isFinite(f[1])?4:0)+(!isFinite(d[0])||!isFinite(d[1])?2:0)+(!isFinite(g[0])||!isFinite(g[1])?1:0),O!=1&&O!=2&&O!=4&&O!=8)return}if(p>0){if(!b){const D=[(t[0]+s[0])/2,(t[1]+s[1])/2],P=this.transformInv_(D);let k;T?k=(Ha(u[0],w)+Ha(d[0],w))/2-Ha(P[0],w):k=(u[0]+d[0])/2-P[0];const z=(u[1]+d[1])/2-P[1];b=k*k+z*z>this.errorThresholdSquared_}if(b){if(Math.abs(t[0]-s[0])<=Math.abs(t[1]-s[1])){const D=[(i[0]+s[0])/2,(i[1]+s[1])/2],P=this.transformInv_(D),k=[(o[0]+t[0])/2,(o[1]+t[1])/2],z=this.transformInv_(k);this.addQuad_(t,i,D,k,u,f,P,z,p-1),this.addQuad_(k,D,s,o,z,P,d,g,p-1)}else{const D=[(t[0]+i[0])/2,(t[1]+i[1])/2],P=this.transformInv_(D),k=[(s[0]+o[0])/2,(s[1]+o[1])/2],z=this.transformInv_(k);this.addQuad_(t,D,k,o,u,P,z,g,p-1),this.addQuad_(D,i,s,k,P,f,d,z,p-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(O&11)==0&&this.addTriangle_(t,s,o,u,d,g),(O&14)==0&&this.addTriangle_(t,s,i,u,d,f),O&&((O&13)==0&&this.addTriangle_(i,o,t,f,g,u),(O&7)==0&&this.addTriangle_(i,o,s,f,g,d))}calculateSourceExtent(){const t=On();return this.triangles_.forEach(function(i,s,o){const u=i.source;Tu(t,u[0]),Tu(t,u[1]),Tu(t,u[2])}),t}getTriangles(){return this.triangles_}}let Tg;const el=[];function Gv(a,t,i,s,o){a.beginPath(),a.moveTo(0,0),a.lineTo(t,i),a.lineTo(s,o),a.closePath(),a.save(),a.clip(),a.fillRect(0,0,Math.max(t,s)+1,Math.max(i,o)),a.restore()}function bg(a,t){return Math.abs(a[t*4]-210)>2||Math.abs(a[t*4+3]-.75*255)>2}function Pb(){if(Tg===void 0){const a=Ui(6,6,el);a.globalCompositeOperation="lighter",a.fillStyle="rgba(210, 0, 0, 0.75)",Gv(a,4,5,4,0),Gv(a,4,5,0,5);const t=a.getImageData(0,0,3,3).data;Tg=bg(t,0)||bg(t,4)||bg(t,8),cf(a),el.push(a.canvas)}return Tg}function Bv(a,t,i,s){const o=Em(i,t,a);let u=nv(t,s,i);const f=t.getMetersPerUnit();f!==void 0&&(u*=f);const d=a.getMetersPerUnit();d!==void 0&&(u/=d);const g=a.getExtent();if(!g||nf(g,o)){const p=nv(a,u,o)/u;isFinite(p)&&p>0&&(u/=p)}return u}function zb(a,t,i,s){const o=qa(i);let u=Bv(a,t,o,s);return(!isFinite(u)||u<=0)&&T0(i,function(f){return u=Bv(a,t,f,s),isFinite(u)&&u>0}),u}function Nb(a,t,i,s,o,u,f,d,g,p,v,E){const w=Ui(Math.round(i*a),Math.round(i*t),el);if(E||(w.imageSmoothingEnabled=!1),g.length===0)return w.canvas;w.scale(i,i);function T(j){return Math.round(j*i)/i}w.globalCompositeOperation="lighter";const b=On();g.forEach(function(j,X,$){w0(b,j.extent)});const O=we(b),D=fs(b),P=Ui(Math.round(i*O/s),Math.round(i*D/s),el);E||(P.imageSmoothingEnabled=!1);const k=i/s;g.forEach(function(j,X,$){const it=j.extent[0]-b[0],rt=-(j.extent[3]-b[3]),dt=we(j.extent),pt=fs(j.extent);j.image.width>0&&j.image.height>0&&P.drawImage(j.image,p,p,j.image.width-2*p,j.image.height-2*p,it*k,rt*k,dt*k,pt*k)});const z=Ja(f);return d.getTriangles().forEach(function(j,X,$){const it=j.source,rt=j.target;let dt=it[0][0],pt=it[0][1],_t=it[1][0],nt=it[1][1],ot=it[2][0],vt=it[2][1];const ht=T((rt[0][0]-z[0])/u),F=T(-(rt[0][1]-z[1])/u),H=T((rt[1][0]-z[0])/u),Q=T(-(rt[1][1]-z[1])/u),yt=T((rt[2][0]-z[0])/u),A=T(-(rt[2][1]-z[1])/u),U=dt,G=pt;dt=0,pt=0,_t-=U,nt-=G,ot-=U,vt-=G;const st=[[_t,nt,0,0,H-ht],[ot,vt,0,0,yt-ht],[0,0,_t,nt,Q-F],[0,0,ot,vt,A-F]],lt=qw(st);if(lt){if(w.save(),w.beginPath(),Pb()||!E){w.moveTo(H,Q);const gt=4,mt=ht-H,jt=F-Q;for(let Lt=0;Lt<gt;Lt++)w.lineTo(H+T((Lt+1)*mt/gt),Q+T(Lt*jt/(gt-1))),Lt!=gt-1&&w.lineTo(H+T((Lt+1)*mt/gt),Q+T((Lt+1)*jt/(gt-1)));w.lineTo(yt,A)}else w.moveTo(H,Q),w.lineTo(ht,F),w.lineTo(yt,A);w.clip(),w.transform(lt[0],lt[2],lt[1],lt[3],ht,F),w.translate(b[0]-U,b[3]-G),w.scale(s/i,-s/i),w.drawImage(P.canvas,0,0),w.restore()}}),cf(P),el.push(P.canvas),v&&(w.save(),w.globalCompositeOperation="source-over",w.strokeStyle="black",w.lineWidth=1,d.getTriangles().forEach(function(j,X,$){const it=j.target,rt=(it[0][0]-z[0])/u,dt=-(it[0][1]-z[1])/u,pt=(it[1][0]-z[0])/u,_t=-(it[1][1]-z[1])/u,nt=(it[2][0]-z[0])/u,ot=-(it[2][1]-z[1])/u;w.beginPath(),w.moveTo(pt,_t),w.lineTo(rt,dt),w.lineTo(nt,ot),w.closePath(),w.stroke()}),w.restore()),w.canvas}class Jg extends hx{constructor(t,i,s,o,u,f,d,g,p,v,E,w){super(u,Ot.IDLE,{interpolate:!!w}),this.renderEdges_=E!==void 0?E:!1,this.pixelRatio_=d,this.gutter_=g,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=o,this.wrappedTileCoord_=f||u,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const T=o.getTileCoordExtent(this.wrappedTileCoord_),b=this.targetTileGrid_.getExtent();let O=this.sourceTileGrid_.getExtent();const D=b?bu(T,b):T;if(kg(D)===0){this.state=Ot.EMPTY;return}const P=t.getExtent();P&&(O?O=bu(O,P):O=P);const k=o.getResolution(this.wrappedTileCoord_[0]),z=zb(t,s,D,k);if(!isFinite(z)||z<=0){this.state=Ot.EMPTY;return}const j=v!==void 0?v:Ab;if(this.triangulation_=new Db(t,s,D,O,z*j,k),this.triangulation_.getTriangles().length===0){this.state=Ot.EMPTY;return}this.sourceZ_=i.getZForResolution(z);let X=this.triangulation_.calculateSourceExtent();if(O&&(t.canWrapX()?(X[1]=Ke(X[1],O[1],O[3]),X[3]=Ke(X[3],O[1],O[3])):X=bu(X,O)),!kg(X))this.state=Ot.EMPTY;else{const $=i.getTileRangeForExtentAndZ(X,this.sourceZ_);for(let it=$.minX;it<=$.maxX;it++)for(let rt=$.minY;rt<=$.maxY;rt++){const dt=p(this.sourceZ_,it,rt,d);dt&&this.sourceTiles_.push(dt)}this.sourceTiles_.length===0&&(this.state=Ot.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(i=>{i&&i.getState()==Ot.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(i.tileCoord),image:i.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=Ot.ERROR;else{const i=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(i),o=typeof s=="number"?s:s[0],u=typeof s=="number"?s:s[1],f=this.targetTileGrid_.getResolution(i),d=this.sourceTileGrid_.getResolution(this.sourceZ_),g=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Nb(o,u,this.pixelRatio_,d,this.sourceTileGrid_.getExtent(),f,g,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ot.LOADED}this.changed()}load(){if(this.state==Ot.IDLE){this.state=Ot.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(i=>{const s=i.getState();if(s==Ot.IDLE||s==Ot.LOADING){t++;const o=ee(i,Gt.CHANGE,function(u){const f=i.getState();(f==Ot.LOADED||f==Ot.ERROR||f==Ot.EMPTY)&&(Ee(o),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,s,o){i.getState()==Ot.IDLE&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ee),this.sourcesListenerKeys_=null}release(){this.canvas_&&(cf(this.canvas_.getContext("2d")),el.push(this.canvas_),this.canvas_=null),super.release()}}class Ib extends ox{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=On(),this.tmpTileRange_=new Bm(0,0,0,0)}isDrawableTile(t){const i=this.getLayer(),s=t.getState(),o=i.getUseInterimTilesOnError();return s==Ot.LOADED||s==Ot.EMPTY||s==Ot.ERROR&&!o}getTile(t,i,s,o){const u=o.pixelRatio,f=o.viewState.projection,d=this.getLayer();let p=d.getSource().getTile(t,i,s,u,f);return p.getState()==Ot.ERROR&&d.getUseInterimTilesOnError()&&d.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(p)||(p=p.getInterimTile()),p}getData(t){const i=this.frameState;if(!i)return null;const s=this.getLayer(),o=mi(i.pixelToCoordinateTransform,t.slice()),u=s.getExtent();if(u&&!nf(u,o))return null;const f=i.pixelRatio,d=i.viewState.projection,g=i.viewState,p=s.getRenderSource(),v=p.getTileGridForProjection(g.projection),E=p.getTilePixelRatio(i.pixelRatio);for(let w=v.getZForResolution(g.resolution);w>=v.getMinZoom();--w){const T=v.getTileCoordForCoordAndZ(o,w),b=p.getTile(w,T[1],T[2],f,d);if(!(b instanceof fx||b instanceof Jg)||b instanceof Jg&&b.getState()===Ot.EMPTY)return null;if(b.getState()!==Ot.LOADED)continue;const O=v.getOrigin(w),D=mn(v.getTileSize(w)),P=v.getResolution(w),k=Math.floor(E*((o[0]-O[0])/P-T[1]*D[0])),z=Math.floor(E*((O[1]-o[1])/P-T[2]*D[1])),j=Math.round(E*p.getGutterForProjection(g.projection));return this.getImageData(b.getImage(),k+j,z+j)}return null}loadedTileCallback(t,i,s){return this.isDrawableTile(s)?super.loadedTileCallback(t,i,s):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,i){const s=t.layerStatesArray[t.layerIndex],o=t.viewState,u=o.projection,f=o.resolution,d=o.center,g=o.rotation,p=t.pixelRatio,v=this.getLayer(),E=v.getSource(),w=E.getRevision(),T=E.getTileGridForProjection(u),b=T.getZForResolution(f,E.zDirection),O=T.getResolution(b);let D=t.extent;const P=t.viewState.resolution,k=E.getTilePixelRatio(p),z=Math.round(we(D)/P*p),j=Math.round(fs(D)/P*p),X=s.extent&&Jr(s.extent);X&&(D=bu(D,Jr(s.extent)));const $=O*z/2/k,it=O*j/2/k,rt=[d[0]-$,d[1]-it,d[0]+$,d[1]+it],dt=T.getTileRangeForExtentAndZ(D,b),pt={};pt[b]={};const _t=this.createLoadedTileFinder(E,u,pt),nt=this.tmpExtent,ot=this.tmpTileRange_;this.newTiles_=!1;const vt=g?Gg(o.center,P,g,t.size):void 0;for(let st=dt.minX;st<=dt.maxX;++st)for(let lt=dt.minY;lt<=dt.maxY;++lt){if(g&&!T.tileCoordIntersectsViewport([b,st,lt],vt))continue;const gt=this.getTile(b,st,lt,t);if(this.isDrawableTile(gt)){const Lt=Bt(this);if(gt.getState()==Ot.LOADED){pt[b][gt.tileCoord.toString()]=gt;let Et=gt.inTransition(Lt);Et&&s.opacity!==1&&(gt.endTransition(Lt),Et=!1),!this.newTiles_&&(Et||!this.renderedTiles.includes(gt))&&(this.newTiles_=!0)}if(gt.getAlpha(Lt,t.time)===1)continue}const mt=T.getTileCoordChildTileRange(gt.tileCoord,ot,nt);let jt=!1;mt&&(jt=_t(b+1,mt)),jt||T.forEachTileCoordParentTileRange(gt.tileCoord,_t,ot,nt)}const ht=O/f*p/k;sa(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/p,1/p,g,-z/2,-j/2);const F=x0(this.pixelTransform);this.useContainer(i,F,this.getBackground(t));const H=this.context,Q=H.canvas;fm(this.inversePixelTransform,this.pixelTransform),sa(this.tempTransform,z/2,j/2,ht,ht,0,-z/2,-j/2),Q.width!=z||Q.height!=j?(Q.width=z,Q.height=j):this.containerReused||H.clearRect(0,0,z,j),X&&this.clipUnrotated(H,t,X),E.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,t),this.renderedTiles.length=0;let yt=Object.keys(pt).map(Number);yt.sort(Xa);let A,U,G;s.opacity===1&&(!this.containerReused||E.getOpaque(t.viewState.projection))?yt=yt.reverse():(A=[],U=[]);for(let st=yt.length-1;st>=0;--st){const lt=yt[st],gt=E.getTilePixelSize(lt,p,u),jt=T.getResolution(lt)/O,Lt=gt[0]*jt*ht,Et=gt[1]*jt*ht,Mt=T.getTileCoordForCoordAndZ(Ja(rt),lt),se=T.getTileCoordExtent(Mt),me=mi(this.tempTransform,[k*(se[0]-rt[0])/O,k*(rt[3]-se[3])/O]),_i=k*E.getGutterForProjection(u),Qe=pt[lt];for(const ai in Qe){const Ae=Qe[ai],Ct=Ae.tileCoord,Ut=Mt[1]-Ct[1],Jt=Math.round(me[0]-(Ut-1)*Lt),Ce=Mt[2]-Ct[2],Je=Math.round(me[1]-(Ce-1)*Et),Wt=Math.round(me[0]-Ut*Lt),Qt=Math.round(me[1]-Ce*Et),Fe=Jt-Wt,_e=Je-Qt,Te=b===lt,ae=Te&&Ae.getAlpha(Bt(this),t.time)!==1;let be=!1;if(!ae)if(A){G=[Wt,Qt,Wt+Fe,Qt,Wt+Fe,Qt+_e,Wt,Qt+_e];for(let Se=0,Oi=A.length;Se<Oi;++Se)if(b!==lt&&lt<U[Se]){const Oe=A[Se];Zi([Wt,Qt,Wt+Fe,Qt+_e],[Oe[0],Oe[3],Oe[4],Oe[7]])&&(be||(H.save(),be=!0),H.beginPath(),H.moveTo(G[0],G[1]),H.lineTo(G[2],G[3]),H.lineTo(G[4],G[5]),H.lineTo(G[6],G[7]),H.moveTo(Oe[6],Oe[7]),H.lineTo(Oe[4],Oe[5]),H.lineTo(Oe[2],Oe[3]),H.lineTo(Oe[0],Oe[1]),H.clip())}A.push(G),U.push(lt)}else H.clearRect(Wt,Qt,Fe,_e);this.drawTileImage(Ae,t,Wt,Qt,Fe,_e,_i,Te),A&&!ae?(be&&H.restore(),this.renderedTiles.unshift(Ae)):this.renderedTiles.push(Ae),this.updateUsedTiles(t.usedTiles,E,Ae)}}return this.renderedRevision=w,this.renderedResolution=O,this.extentChanged=!this.renderedExtent_||!Au(this.renderedExtent_,rt),this.renderedExtent_=rt,this.renderedPixelRatio=p,this.renderedProjection=u,this.manageTilePyramid(t,E,T,p,u,D,b,v.getPreload()),this.scheduleExpireCache(t,E),this.postRender(H,t),s.extent&&H.restore(),H.imageSmoothingEnabled=!0,F!==Q.style.transform&&(Q.style.transform=F),this.container}drawTileImage(t,i,s,o,u,f,d,g){const p=this.getTileImage(t);if(!p)return;const v=Bt(this),E=i.layerStatesArray[i.layerIndex],w=E.opacity*(g?t.getAlpha(v,i.time):1),T=w!==this.context.globalAlpha;T&&(this.context.save(),this.context.globalAlpha=w),this.context.drawImage(p,d,d,p.width-2*d,p.height-2*d,s,o,u,f),T&&this.context.restore(),w!==E.opacity?i.animate=!0:g&&t.endTransition(v)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,i){if(i.canExpireCache()){const s=(function(o,u,f){const d=Bt(o);d in f.usedTiles&&o.expireCache(f.viewState.projection,f.usedTiles[d])}).bind(null,i);t.postRenderFunctions.push(s)}}updateUsedTiles(t,i,s){const o=Bt(i);o in t||(t[o]={}),t[o][s.getKey()]=!0}manageTilePyramid(t,i,s,o,u,f,d,g,p){const v=Bt(i);v in t.wantedTiles||(t.wantedTiles[v]={});const E=t.wantedTiles[v],w=t.tileQueue,T=s.getMinZoom(),b=t.viewState.rotation,O=b?Gg(t.viewState.center,t.viewState.resolution,b,t.size):void 0;let D=0,P,k,z,j,X,$;for($=T;$<=d;++$)for(k=s.getTileRangeForExtentAndZ(f,$,k),z=s.getResolution($),j=k.minX;j<=k.maxX;++j)for(X=k.minY;X<=k.maxY;++X)b&&!s.tileCoordIntersectsViewport([$,j,X],O)||(d-$<=g?(++D,P=i.getTile($,j,X,o,u),P.getState()==Ot.IDLE&&(E[P.getKey()]=!0,w.isKeyQueued(P.getKey())||w.enqueue([P,v,s.getTileCoordCenter(P.tileCoord),z])),p!==void 0&&p(P)):i.useTile($,j,X,u));i.updateCacheSize(D,u)}}const Mh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},qo=[0,0,0],qr=5;class bx{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Vt(vw(this.resolutions_,function(o,u){return u-o}),17);let i;if(!t.origins){for(let o=0,u=this.resolutions_.length-1;o<u;++o)if(!i)i=this.resolutions_[o]/this.resolutions_[o+1];else if(this.resolutions_[o]/this.resolutions_[o+1]!==i){i=void 0;break}}this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Vt(this.origins_.length==this.resolutions_.length,20));const s=t.extent;s!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ja(s)),Vt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Vt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Dm,Vt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=s!==void 0?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(o,u){const f=new Bm(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(s){const d=this.getTileRangeForExtentAndZ(s,u);f.minX=Math.max(d.minX,f.minX),f.maxX=Math.min(d.maxX,f.maxX),f.minY=Math.max(d.minY,f.minY),f.maxY=Math.min(d.maxY,f.maxY)}return f},this):s&&this.calculateTileRanges_(s)}forEachTileCoord(t,i,s){const o=this.getTileRangeForExtentAndZ(t,i);for(let u=o.minX,f=o.maxX;u<=f;++u)for(let d=o.minY,g=o.maxY;d<=g;++d)s([i,u,d])}forEachTileCoordParentTileRange(t,i,s,o){let u,f,d,g=null,p=t[0]-1;for(this.zoomFactor_===2?(f=t[1],d=t[2]):g=this.getTileCoordExtent(t,o);p>=this.minZoom;){if(this.zoomFactor_===2?(f=Math.floor(f/2),d=Math.floor(d/2),u=Vo(f,f,d,d,s)):u=this.getTileRangeForExtentAndZ(g,p,s),i(p,u))return!0;--p}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,i,s){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const u=t[1]*2,f=t[2]*2;return Vo(u,u+1,f,f+1,i)}const o=this.getTileCoordExtent(t,s||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,i)}return null}getTileRangeForTileCoordAndZ(t,i,s){if(i>this.maxZoom||i<this.minZoom)return null;const o=t[0],u=t[1],f=t[2];if(i===o)return Vo(u,f,u,f,s);if(this.zoomFactor_){const g=Math.pow(this.zoomFactor_,i-o),p=Math.floor(u*g),v=Math.floor(f*g);if(i<o)return Vo(p,p,v,v,s);const E=Math.floor(g*(u+1))-1,w=Math.floor(g*(f+1))-1;return Vo(p,E,v,w,s)}const d=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,i,s)}getTileRangeExtent(t,i,s){const o=this.getOrigin(t),u=this.getResolution(t),f=mn(this.getTileSize(t),this.tmpSize_),d=o[0]+i.minX*f[0]*u,g=o[0]+(i.maxX+1)*f[0]*u,p=o[1]+i.minY*f[1]*u,v=o[1]+(i.maxY+1)*f[1]*u;return Qs(d,p,g,v,s)}getTileRangeForExtentAndZ(t,i,s){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,qo);const o=qo[1],u=qo[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,qo);const f=qo[1],d=qo[2];return Vo(o,f,u,d,s)}getTileCoordCenter(t){const i=this.getOrigin(t[0]),s=this.getResolution(t[0]),o=mn(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*o[0]*s,i[1]-(t[2]+.5)*o[1]*s]}getTileCoordExtent(t,i){const s=this.getOrigin(t[0]),o=this.getResolution(t[0]),u=mn(this.getTileSize(t[0]),this.tmpSize_),f=s[0]+t[1]*u[0]*o,d=s[1]-(t[2]+1)*u[1]*o,g=f+u[0]*o,p=d+u[1]*o;return Qs(f,d,g,p,i)}getTileCoordForCoordAndResolution(t,i,s){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,s)}getTileCoordForXYAndResolution_(t,i,s,o,u){const f=this.getZForResolution(s),d=s/this.getResolution(f),g=this.getOrigin(f),p=mn(this.getTileSize(f),this.tmpSize_);let v=d*(t-g[0])/s/p[0],E=d*(g[1]-i)/s/p[1];return o?(v=Eh(v,qr)-1,E=Eh(E,qr)-1):(v=xh(v,qr),E=xh(E,qr)),Iv(f,v,E,u)}getTileCoordForXYAndZ_(t,i,s,o,u){const f=this.getOrigin(s),d=this.getResolution(s),g=mn(this.getTileSize(s),this.tmpSize_);let p=(t-f[0])/d/g[0],v=(f[1]-i)/d/g[1];return o?(p=Eh(p,qr)-1,v=Eh(v,qr)-1):(p=xh(p,qr),v=xh(v,qr)),Iv(s,p,v,u)}getTileCoordForCoordAndZ(t,i,s){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,s)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,i){const s=cm(this.resolutions_,t,i||0);return Ke(s,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,i){return Z0(i,0,i.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const i=this.resolutions_.length,s=new Array(i);for(let o=this.minZoom;o<i;++o)s[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=s}}const Rg={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function Rx(a){let t=a.getDefaultTileGrid();return t||(t=Bb(a),a.setDefaultTileGrid(t)),t}function kb(a,t,i){const s=t[0],o=a.getTileCoordCenter(t),u=Zm(i);if(!nf(u,o)){const f=we(u),d=Math.ceil((u[0]-o[0])/f);return o[0]+=f*d,a.getTileCoordForCoordAndZ(o,s)}return t}function Fb(a,t,i,s){s=s!==void 0?s:"top-left";const o=Lx(a,t,i);return new bx({extent:a,origin:zw(a,s),resolutions:o,tileSize:i})}function Gb(a){const t=a||{},i=t.extent||ri("EPSG:3857").getExtent(),s={extent:i,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Lx(i,t.maxZoom,t.tileSize,t.maxResolution)};return new bx(s)}function Lx(a,t,i,s){t=t!==void 0?t:UC,i=mn(i!==void 0?i:Dm);const o=fs(a),u=we(a);s=s>0?s:Math.max(u/i[0],o/i[1]);const f=t+1,d=new Array(f);for(let g=0;g<f;++g)d[g]=s/Math.pow(2,g);return d}function Bb(a,t,i,s){const o=Zm(a);return Fb(o,t,i,s)}function Zm(a){a=ri(a);let t=a.getExtent();if(!t){const i=180*mm.degrees/a.getMetersPerUnit();t=Qs(-i,-i,i,i)}return t}class Zb extends cx{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const i=[256,256];this.tileGrid&&mn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tileCache=new Cx(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,i){const s=this.getTileCacheForProjection(t);s&&s.expireCache(i)}forEachLoadedTile(t,i,s,o){const u=this.getTileCacheForProjection(t);if(!u)return!1;let f=!0,d,g,p;for(let v=s.minX;v<=s.maxX;++v)for(let E=s.minY;E<=s.maxY;++E)g=mf(i,v,E),p=!1,u.containsKey(g)&&(d=u.get(g),p=d.getState()===Ot.LOADED,p&&(p=o(d)!==!1)),p||(f=!1);return f}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const i=t?this.getTileGridForProjection(t):this.tileGrid;return i?i.getResolutions():null}getTile(t,i,s,o,u){return It()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Rx(t)}getTileCacheForProjection(t){const i=this.getProjection();return Vt(i===null||ka(i,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,i,s){const o=this.getTileGridForProjection(s),u=this.getTilePixelRatio(i),f=mn(o.getTileSize(t),this.tmpSize);return u==1?f:CC(f,u,this.tmpSize)}getTileCoordForTileUrlFunction(t,i){i=i!==void 0?i:this.getProjection();const s=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=kb(s,t,i)),Rb(t,s)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,i){const s=this.getTileCacheForProjection(i);t>s.highWaterMark&&(s.highWaterMark=t)}useTile(t,i,s,o){}}class jb extends Xn{constructor(t,i){super(t),this.tile=i}}function Ub(a,t){const i=/\{z\}/g,s=/\{x\}/g,o=/\{y\}/g,u=/\{-y\}/g;return function(f,d,g){if(f)return a.replace(i,f[0].toString()).replace(s,f[1].toString()).replace(o,f[2].toString()).replace(u,function(){const p=f[0],v=t.getFullTileRange(p);return Vt(v,55),(v.getHeight()-f[2]-1).toString()})}}function Hb(a,t){const i=a.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=Ub(a[o],t);return Yb(s)}function Yb(a){return a.length===1?a[0]:function(t,i,s){if(!t)return;const o=bb(t),u=Ha(o,a.length);return a[u](t,i,s)}}function Xb(a){const t=[];let i=/\{([a-z])-([a-z])\}/.exec(a);if(i){const s=i[1].charCodeAt(0),o=i[2].charCodeAt(0);let u;for(u=s;u<=o;++u)t.push(a.replace(i[0],String.fromCharCode(u)));return t}if(i=/\{(\d+)-(\d+)\}/.exec(a),i){const s=parseInt(i[2],10);for(let o=parseInt(i[1],10);o<=s;o++)t.push(a.replace(i[0],o.toString()));return t}return t.push(a),t}class jm extends Zb{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===jm.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const i=t.target,s=Bt(i),o=i.getState();let u;o==Ot.LOADING?(this.tileLoadingKeys_[s]=!0,u=Rg.TILELOADSTART):s in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[s],u=o==Ot.ERROR?Rg.TILELOADERROR:o==Ot.LOADED?Rg.TILELOADEND:void 0),u!=null&&this.dispatchEvent(new jb(u,i))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof i<"u"?this.setKey(i):this.changed()}setUrl(t){const i=Xb(t);this.urls=i,this.setUrls(i)}setUrls(t){this.urls=t;const i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Hb(t,this.tileGrid),i):this.setKey(i)}tileUrlFunction(t,i,s){}useTile(t,i,s){const o=mf(t,i,s);this.tileCache.containsKey(o)&&this.tileCache.get(o)}}class Vb extends Mb{constructor(){super()}getType(){return"json"}readFeature(t,i){return this.readFeatureFromObject(Ah(t),this.getReadOptions(t,i))}readFeatures(t,i){return this.readFeaturesFromObject(Ah(t),this.getReadOptions(t,i))}readFeatureFromObject(t,i){return It()}readFeaturesFromObject(t,i){return It()}readGeometry(t,i){return this.readGeometryFromObject(Ah(t),this.getReadOptions(t,i))}readGeometryFromObject(t,i){return It()}readProjection(t){return this.readProjectionFromObject(Ah(t))}readProjectionFromObject(t){return It()}writeFeature(t,i){return JSON.stringify(this.writeFeatureObject(t,i))}writeFeatureObject(t,i){return It()}writeFeatures(t,i){return JSON.stringify(this.writeFeaturesObject(t,i))}writeFeaturesObject(t,i){return It()}writeGeometry(t,i){return JSON.stringify(this.writeGeometryObject(t,i))}writeGeometryObject(t,i){return It()}}function Ah(a){if(typeof a=="string"){const t=JSON.parse(a);return t||null}else if(a!==null)return a;return null}class Qh extends Vb{constructor(t){t=t||{},super(),this.dataProjection=ri(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=ri(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,i){let s=null;t.type==="Feature"?s=t:s={type:"Feature",geometry:t,properties:null};const o=$g(s.geometry,i),u=new Bi;return this.geometryName_?u.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in s!==void 0&&u.setGeometryName(s.geometry_name),u.setGeometry(o),"id"in s&&u.setId(s.id),s.properties&&u.setProperties(s.properties,!0),u}readFeaturesFromObject(t,i){const s=t;let o=null;if(s.type==="FeatureCollection"){const u=t;o=[];const f=u.features;for(let d=0,g=f.length;d<g;++d)o.push(this.readFeatureFromObject(f[d],i))}else o=[this.readFeatureFromObject(t,i)];return o}readGeometryFromObject(t,i){return $g(t,i)}readProjectionFromObject(t){const i=t.crs;let s;return i?i.type=="name"?s=ri(i.properties.name):i.type==="EPSG"?s=ri("EPSG:"+i.properties.code):Vt(!1,36):s=this.dataProjection,s}writeFeatureObject(t,i){i=this.adaptOptions(i);const s={type:"Feature",geometry:null,properties:null},o=t.getId();if(o!==void 0&&(s.id=o),!t.hasProperties())return s;const u=t.getProperties(),f=t.getGeometry();return f&&(s.geometry=tm(f,i),delete u[t.getGeometryName()]),rl(u)||(s.properties=u),s}writeFeaturesObject(t,i){i=this.adaptOptions(i);const s=[];for(let o=0,u=t.length;o<u;++o)s.push(this.writeFeatureObject(t[o],i));return{type:"FeatureCollection",features:s}}writeGeometryObject(t,i){return tm(t,this.adaptOptions(i))}}function $g(a,t){if(!a)return null;let i;switch(a.type){case"Point":{i=Kb(a);break}case"LineString":{i=Wb(a);break}case"Polygon":{i=tR(a);break}case"MultiPoint":{i=Jb(a);break}case"MultiLineString":{i=Qb(a);break}case"MultiPolygon":{i=$b(a);break}case"GeometryCollection":{i=qb(a);break}default:throw new Error("Unsupported GeoJSON type: "+a.type)}return Tx(i,!1,t)}function qb(a,t){const i=a.geometries.map(function(s){return $g(s,t)});return new qh(i)}function Kb(a){return new Yn(a.coordinates)}function Wb(a){return new Ka(a.coordinates)}function Qb(a){return new Kh(a.coordinates)}function Jb(a){return new _f(a.coordinates)}function $b(a){return new Wh(a.coordinates)}function tR(a){return new Ai(a.coordinates)}function tm(a,t){a=Tx(a,!0,t);const i=a.getType();let s;switch(i){case"Point":{s=aR(a);break}case"LineString":{s=iR(a);break}case"Polygon":{s=oR(a,t);break}case"MultiPoint":{s=sR(a);break}case"MultiLineString":{s=nR(a);break}case"MultiPolygon":{s=rR(a,t);break}case"GeometryCollection":{s=eR(a,t);break}case"Circle":{s={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+i)}return s}function eR(a,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:a.getGeometriesArray().map(function(s){return tm(s,t)})}}function iR(a,t){return{type:"LineString",coordinates:a.getCoordinates()}}function nR(a,t){return{type:"MultiLineString",coordinates:a.getCoordinates()}}function sR(a,t){return{type:"MultiPoint",coordinates:a.getCoordinates()}}function rR(a,t){let i;return t&&(i=t.rightHanded),{type:"MultiPolygon",coordinates:a.getCoordinates(i)}}function aR(a,t){return{type:"Point",coordinates:a.getCoordinates()}}function oR(a,t){let i;return t&&(i=t.rightHanded),{type:"Polygon",coordinates:a.getCoordinates(i)}}class lR extends df{constructor(t){t=t||{};const i=Object.assign({},t);delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(Mh.PRELOAD)}setPreload(t){this.set(Mh.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Mh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Mh.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class Zv extends lR{constructor(t){super(t)}createRenderer(){return new Ib(this)}}class uR extends jm{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:cR,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:fx,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,i){const s=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==s?i:{});for(const o in this.tileCacheForProjection){const u=this.tileCacheForProjection[o];u.expireCache(u==s?i:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!ka(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!ka(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const i=this.getProjection();if(this.tileGrid&&(!i||ka(i,t)))return this.tileGrid;const s=Bt(t);return s in this.tileGridForProjection||(this.tileGridForProjection[s]=Rx(t)),this.tileGridForProjection[s]}getTileCacheForProjection(t){const i=this.getProjection();if(!i||ka(i,t))return this.tileCache;const s=Bt(t);return s in this.tileCacheForProjection||(this.tileCacheForProjection[s]=new Cx(this.tileCache.highWaterMark)),this.tileCacheForProjection[s]}createTile_(t,i,s,o,u,f){const d=[t,i,s],g=this.getTileCoordForTileUrlFunction(d,u),p=g?this.tileUrlFunction(g,o,u):void 0,v=new this.tileClass(d,p!==void 0?Ot.IDLE:Ot.EMPTY,p!==void 0?p:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return v.key=f,v.addEventListener(Gt.CHANGE,this.handleTileChange.bind(this)),v}getTile(t,i,s,o,u){const f=this.getProjection();if(!f||!u||ka(f,u))return this.getTileInternal(t,i,s,o,f||u);const d=this.getTileCacheForProjection(u),g=[t,i,s];let p;const v=wx(g);d.containsKey(v)&&(p=d.get(v));const E=this.getKey();if(p&&p.key==E)return p;const w=this.getTileGridForProjection(f),T=this.getTileGridForProjection(u),b=this.getTileCoordForTileUrlFunction(g,u),O=new Jg(f,w,u,T,g,b,this.getTilePixelRatio(o),this.getGutter(),(D,P,k,z)=>this.getTileInternal(D,P,k,z,f),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return O.key=E,p?(O.interimTile=p,O.refreshInterimChain(),d.replace(v,O)):d.set(v,O),O}getTileInternal(t,i,s,o,u){let f=null;const d=mf(t,i,s),g=this.getKey();if(!this.tileCache.containsKey(d))f=this.createTile_(t,i,s,o,u,g),this.tileCache.set(d,f);else if(f=this.tileCache.get(d),f.key!=g){const p=f;f=this.createTile_(t,i,s,o,u,g),p.getState()==Ot.IDLE?f.interimTile=p.interimTile:f.interimTile=p,f.refreshInterimChain(),this.tileCache.replace(d,f)}return f}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}}setTileGridForProjection(t,i){const s=ri(t);if(s){const o=Bt(s);o in this.tileGridForProjection||(this.tileGridForProjection[o]=i)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function cR(a,t){a.getImage().src=t}class Mx extends uR{constructor(t){t=t||{};const i=t.projection!==void 0?t.projection:"EPSG:3857",s=t.tileGrid!==void 0?t.tileGrid:Gb({extent:Zm(i),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const hR='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class fR extends Mx{constructor(t){t=t||{};let i;t.attributions!==void 0?i=t.attributions:i=[hR];const s=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",o=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:i,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:s,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:o,wrapX:t.wrapX,zDirection:t.zDirection})}}const ji={base:new Ie({stroke:new Ve({color:"#FFFFFF",width:5}),fill:new ii({color:"rgba(0,0,0,0)"})}),draw:new Ie({stroke:new Ve({color:"#FF9B00",width:5}),fill:new ii({color:"rgba(255, 155, 0, 0.2)"})}),edit:new Ie({stroke:new Ve({color:"#e92694",width:5}),fill:new ii({color:"rgba(233, 38, 148, 0.2)"})}),created:new Ie({stroke:new Ve({color:"#2cf5dc",width:5}),fill:new ii({color:"rgba(121, 242, 227, 0.2)"})}),vertex:new Ie({image:new An({radius:6,fill:new ii({color:"#3b82f6"}),stroke:new Ve({color:"#8E1358",width:1})})}),vertexEdit:new Ie({image:new An({radius:6,fill:new ii({color:"#C60AB2"}),stroke:new Ve({color:"#8E1358",width:1})})}),vertexIntermediate:new Ie({image:new An({radius:4,fill:new ii({color:"#D0D0D0"}),stroke:new Ve({color:"#888888",width:1})})}),vertexDelete:new Ie({image:new An({radius:6,fill:new ii({color:"#f87171"}),stroke:new Ve({color:"#dc2626",width:1.5})})}),vertexDraw:new Ie({image:new An({radius:6,fill:new ii({color:"#714808"}),stroke:new Ve({color:"#A0660C",width:1})})}),previewVertex:new Ie({image:new An({radius:6,fill:new ii({color:"#ccc"}),stroke:new Ve({color:"#666",width:1})})}),previewVertexSnap:new Ie({image:new An({radius:6,fill:new ii({color:"lime"}),stroke:new Ve({color:"green",width:1})})}),previewLine:new Ie({stroke:new Ve({color:"#FF5722",width:4,lineDash:[6,6]})})};function dR(a,{setMode:t,setArea:i,setTooltipText:s}){const o=Z.useRef([]),u=Z.useRef([]),f=Z.useRef(null),d=Z.useRef(null),g=Z.useRef(null),p=Z.useRef(null),v=Z.useRef(null),E=Z.useRef(null),w=Z.useRef(null),[T,b]=Z.useState(!1),[O,D]=Z.useState(!1),[P,k]=Z.useState(!1),z=15,j=()=>{o.current=[],u.current=[],f.current=null,d.current=null,w.current=null,b(!1),i(0),D(!1),k(!1),s("")},X=Z.useRef(A=>{gn.modeRef.current==="draw"&&o.current.length>=3&&(D(!0),ht(),A.preventDefault())}).current,$=A=>{if(!v.current||o.current.length===0)return;f.current&&v.current.removeFeature(f.current);const U=o.current[o.current.length-1],G=new Ka([U,A]);f.current=new Bi(G),f.current.setStyle(ji.previewLine),v.current.addFeature(f.current)},it=(A,U)=>{v.current&&(d.current?d.current.getGeometry().setCoordinates(A):(d.current=new Bi(new Yn(A)),v.current.addFeature(d.current)),d.current.setStyle(U?ji.vertexSnap:ji.previewVertex))},rt=A=>{const U=new Bi(new Yn(A));U.setStyle(ji.vertexDraw),u.current.push(U),v.current.addFeature(U)},dt=()=>{if(!v.current||o.current.length<2)return;v.current.getFeatures().forEach(U=>{U.getGeometry()instanceof Ai&&v.current.removeFeature(U)});const A=new Bi(new Ai([o.current]));A.setStyle(ji.draw),v.current.addFeature(A)},pt=()=>{const A=a.current;if(!A||o.current.length<3){g.current&&(A.removeOverlay(g.current),g.current=null),i(0);return}const U=new Ai([o.current]),G=al(U,{projection:"EPSG:3857"});i(G);const st=`${(G/1e4).toFixed(2)} ha`,lt=U.getInteriorPoint().getCoordinates();if(!g.current){const gt=document.createElement("div");gt.className="area-label",gt.textContent=st,g.current=new Qg({element:gt,positioning:"center-center",stopEvent:!1}),A.addOverlay(g.current)}g.current.getElement().textContent=st,g.current.setPosition(lt)},_t=(A,U)=>{const G=a.current;if(G){if(!p.current){const st=document.createElement("div");st.className="map-tooltip",p.current=new Qg({element:st,offset:[0,-15],positioning:"bottom-center",className:"ol-tooltip-text"}),G.addOverlay(p.current)}p.current.getElement().textContent=A,p.current.setPosition(U)}},nt=Z.useRef(A=>{if(gn.modeRef.current!=="draw")return;const U=a.current,G=A.coordinate,st=o.current[0];if(st&&U.getPixelFromCoordinate(G)&&U.getPixelFromCoordinate(st)&&Lg(U.getPixelFromCoordinate(G),U.getPixelFromCoordinate(st))<z&&o.current.length>=3){o.current.push(st),D(!0),ht();return}o.current.push(G),rt(G),dt(),pt(),o.current.length>0?k(!0):k(!1);const mt=o.current.length===1?"Click para continuar dibujando":"Click para cerrar polgono";s(mt),_t(mt,G),b(o.current.length>=3)}).current,ot=Z.useRef(A=>{if(gn.modeRef.current!=="draw")return;const U=a.current,G=A.coordinate,st=o.current[0],gt=(st?Lg(U.getPixelFromCoordinate(G),U.getPixelFromCoordinate(st)):1/0)<z,mt=gt?"Click sobre el primer punto para cerrar":o.current.length===0?"Click para colocar el primer vrtice":"Click para continuar dibujando";s(mt),_t(mt,G),$(G),it(G,gt)}).current,vt=()=>{const A=a.current;A&&(F(),E.current&&A.removeLayer(E.current),v.current=new ll,E.current=new Wa({source:v.current}),A.addLayer(E.current),A.on("click",nt),A.on("pointermove",ot),A.on("dblclick",X),j(),t("draw"),s("Click para colocar el primer vrtice"),document.body.classList.add("draw-mode"),g.current&&(A.removeOverlay(g.current),g.current=null),p.current&&(A.removeOverlay(p.current),p.current=null))},ht=()=>{const A=a.current;if(!A||o.current.length<3)return;const U=o.current[0],G=o.current[o.current.length-1];U&&G&&Lg(U,G)>1&&o.current.push(U),v.current&&(u.current.forEach(lt=>v.current.removeFeature(lt)),f.current&&v.current.removeFeature(f.current),d.current&&v.current.removeFeature(d.current),v.current.getFeatures().forEach(lt=>{lt.getGeometry()instanceof Ai&&v.current.removeFeature(lt)}));const st=new Ai([o.current]);w.current=new Bi(st),v.current.addFeature(w.current),p.current&&(A.removeOverlay(p.current),p.current=null),document.body.classList.remove("draw-mode"),t("draw-finished"),s(""),o.current=[],u.current=[],f.current=null,d.current=null,b(!1),typeof gn.onFinishCallback.current=="function"&&gn.onFinishCallback.current(w.current)},F=()=>{const A=a.current;A&&(A.on("click",nt),A.on("pointermove",ot),A.on("dblclick",X),j(),p.current&&(A.removeOverlay(p.current),p.current=null),document.body.classList.remove("draw-mode"),t(null),s(""),g.current&&(A.removeOverlay(g.current),g.current=null),E.current&&(A.removeLayer(E.current),E.current=null,v.current=null),document.body.classList.remove("draw-mode"))},H=()=>F(),Q=()=>{if(!o.current.length)return;o.current.pop();const A=u.current.pop();if(A&&v.current&&v.current.removeFeature(A),f.current&&v.current&&(v.current.removeFeature(f.current),f.current=null),v.current&&v.current.getFeatures().forEach(U=>{U.getGeometry()instanceof Ai&&v.current.removeFeature(U)}),o.current.length>=2){const U=new Bi(new Ai([o.current]));U.setStyle(ji.draw),v.current.addFeature(U)}if(o.current.length>=1&&p.current){const U=p.current.getPosition();U&&$(U)}pt(),k(o.current.length>0),b(o.current.length>=3)},yt=()=>w.current||null;return Z.useEffect(()=>F,[]),{enableDraw:vt,disableDraw:F,cancelDraw:H,endPolygon:ht,removeLastPoint:Q,getCreatedFeature:yt,canFinish:T,closedBySnap:O,firstVertexDraw:P}}function Lg(a,t){const i=a[0]-t[0],s=a[1]-t[1];return Math.sqrt(i*i+s*s)}const jv=0,Lu=1,Uv=[0,0,0,0],il=[],Mg={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class Ag extends Xn{constructor(t,i,s){super(t),this.features=i,this.mapBrowserEvent=s}}class gR extends _l{constructor(t){super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:xx,this.defaultDeleteCondition_=function(s){return ob(s)&&_x(s)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:gx,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new qg,this.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Wa({source:new ll({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:_R(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let i;if(t.features?i=t.features:t.source&&(this.source_=t.source,i=new _n(this.source_.getFeatures()),this.source_.addEventListener(fn.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(fn.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!i)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(qe.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(qe.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=t.snapToPointer===void 0?!this.hitDetection_:t.snapToPointer}addFeature_(t){const i=t.getGeometry();if(i){const o=this.SEGMENT_WRITERS_[i.getType()];o&&o(t,i)}const s=this.getMap();s&&s.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,s),t.addEventListener(Gt.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,i){if(!this.featuresBeingModified_){this.featuresBeingModified_=new _n;const s=this.featuresBeingModified_.getArray();for(let o=0,u=i.length;o<u;++o){const f=i[o];for(let d=0,g=f.length;d<g;++d){const p=f[d].feature;p&&!s.includes(p)&&this.featuresBeingModified_.push(p)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new Ag(Mg.MODIFYSTART,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Gt.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const i=this.rBush_,s=[];i.forEach(function(o){t===o.feature&&s.push(o)});for(let o=s.length-1;o>=0;--o){const u=s[o];for(let f=this.dragSegments_.length-1;f>=0;--f)this.dragSegments_[f][0]===u&&this.dragSegments_.splice(f,1);i.remove(u)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const i=t.target;this.removeFeature_(i),this.addFeature_(i)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,i){const s=i.getCoordinates(),o={feature:t,geometry:i,segment:[s,s]};this.rBush_.insert(i.getExtent(),o)}writeMultiPointGeometry_(t,i){const s=i.getCoordinates();for(let o=0,u=s.length;o<u;++o){const f=s[o],d={feature:t,geometry:i,depth:[o],index:o,segment:[f,f]};this.rBush_.insert(i.getExtent(),d)}}writeLineStringGeometry_(t,i){const s=i.getCoordinates();for(let o=0,u=s.length-1;o<u;++o){const f=s.slice(o,o+2),d={feature:t,geometry:i,index:o,segment:f};this.rBush_.insert(jn(f),d)}}writeMultiLineStringGeometry_(t,i){const s=i.getCoordinates();for(let o=0,u=s.length;o<u;++o){const f=s[o];for(let d=0,g=f.length-1;d<g;++d){const p=f.slice(d,d+2),v={feature:t,geometry:i,depth:[o],index:d,segment:p};this.rBush_.insert(jn(p),v)}}}writePolygonGeometry_(t,i){const s=i.getCoordinates();for(let o=0,u=s.length;o<u;++o){const f=s[o];for(let d=0,g=f.length-1;d<g;++d){const p=f.slice(d,d+2),v={feature:t,geometry:i,depth:[o],index:d,segment:p};this.rBush_.insert(jn(p),v)}}}writeMultiPolygonGeometry_(t,i){const s=i.getCoordinates();for(let o=0,u=s.length;o<u;++o){const f=s[o];for(let d=0,g=f.length;d<g;++d){const p=f[d];for(let v=0,E=p.length-1;v<E;++v){const w=p.slice(v,v+2),T={feature:t,geometry:i,depth:[d,o],index:v,segment:w};this.rBush_.insert(jn(w),T)}}}}writeCircleGeometry_(t,i){const s=i.getCenter(),o={feature:t,geometry:i,index:jv,segment:[s,s]},u={feature:t,geometry:i,index:Lu,segment:[s,s]},f=[o,u];o.featureSegments=f,u.featureSegments=f,this.rBush_.insert(Nh(s),o);let d=i;this.rBush_.insert(d.getExtent(),u)}writeGeometryCollectionGeometry_(t,i){const s=i.getGeometriesArray();for(let o=0;o<s.length;++o){const u=s[o],f=this.SEGMENT_WRITERS_[u.getType()];f(t,u)}}createOrUpdateVertexFeature_(t,i,s){let o=this.vertexFeature_;return o?o.getGeometry().setCoordinates(t):(o=new Bi(new Yn(t)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o)),o.set("features",i),o.set("geometries",s),o}handleEvent(t){if(!t.originalEvent)return!0;this.lastPointerEvent_=t;let i;return!t.map.getView().getInteracting()&&t.type==de.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(t.type!=de.SINGLECLICK||!this.ignoreNextSingleClick_?i=this.removePoint():i=!0),t.type==de.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!i}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);const i=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],s=[],o=[];for(let u=0,f=this.dragSegments_.length;u<f;++u){const d=this.dragSegments_[u],g=d[0],p=g.feature;s.includes(p)||s.push(p);const v=g.geometry;o.includes(v)||o.push(v);const E=g.depth;let w;const T=g.segment,b=d[1];for(;i.length<v.getStride();)i.push(T[b][i.length]);switch(v.getType()){case"Point":w=i,T[0]=i,T[1]=i;break;case"MultiPoint":w=v.getCoordinates(),w[g.index]=i,T[0]=i,T[1]=i;break;case"LineString":w=v.getCoordinates(),w[g.index+b]=i,T[b]=i;break;case"MultiLineString":w=v.getCoordinates(),w[E[0]][g.index+b]=i,T[b]=i;break;case"Polygon":w=v.getCoordinates(),w[E[0]][g.index+b]=i,T[b]=i;break;case"MultiPolygon":w=v.getCoordinates(),w[E[1]][E[0]][g.index+b]=i,T[b]=i;break;case"Circle":if(T[0]=i,T[1]=i,g.index===jv)this.changingFeature_=!0,v.setCenter(i),this.changingFeature_=!1;else{this.changingFeature_=!0,t.map.getView().getProjection();let O=ev(ni(v.getCenter()),ni(i));v.setRadius(O),this.changingFeature_=!1}break}w&&this.setGeometryCoordinates_(v,w)}this.createOrUpdateVertexFeature_(i,s,o)}handleDownEvent(t){if(!this.condition_(t))return!1;const i=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,i),this.dragSegments_.length=0,this.featuresBeingModified_=null;const s=this.vertexFeature_;if(s){t.map.getView().getProjection();const o=[],u=s.getGeometry().getCoordinates(),f=jn([u]),d=this.rBush_.getInExtent(f),g={};d.sort(mR);for(let p=0,v=d.length;p<v;++p){const E=d[p],w=E.segment;let T=Bt(E.geometry);const b=E.depth;if(b&&(T+="-"+b.join("-")),g[T]||(g[T]=new Array(2)),E.geometry.getType()==="Circle"&&E.index===Lu){const O=Yv(i,E);Un(O,u)&&!g[T][0]&&(this.dragSegments_.push([E,0]),g[T][0]=E);continue}if(Un(w[0],u)&&!g[T][0]){this.dragSegments_.push([E,0]),g[T][0]=E;continue}if(Un(w[1],u)&&!g[T][1]){if(g[T][0]&&g[T][0].index===0){let O=E.geometry.getCoordinates();switch(E.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":O=O[b[1]];case"Polygon":if(E.index!==O[b[0]].length-2)continue;break}}this.dragSegments_.push([E,1]),g[T][1]=E;continue}Bt(w)in this.vertexSegments_&&!g[T][0]&&!g[T][1]&&this.insertVertexCondition_(t)&&o.push(E)}o.length&&this.willModifyFeatures_(t,[o]);for(let p=o.length-1;p>=0;--p)this.insertVertex_(o[p],u)}return!!this.vertexFeature_}handleUpEvent(t){for(let i=this.dragSegments_.length-1;i>=0;--i){const s=this.dragSegments_[i][0],o=s.geometry;if(o.getType()==="Circle"){const u=o.getCenter(),f=s.featureSegments[0],d=s.featureSegments[1];f.segment[0]=u,f.segment[1]=u,d.segment[0]=u,d.segment[1]=u,this.rBush_.update(Nh(u),f);let g=o;this.rBush_.update(g.getExtent(),d)}else this.rBush_.update(jn(s.segment),s)}return this.featuresBeingModified_&&(this.dispatchEvent(new Ag(Mg.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)}handlePointerAtPixel_(t,i,s){const o=s||i.getCoordinateFromPixel(t);i.getView().getProjection();const u=function(g,p){return Hv(o,g)-Hv(o,p)};let f,d;if(this.hitDetection_){const g=typeof this.hitDetection_=="object"?p=>p===this.hitDetection_:void 0;i.forEachFeatureAtPixel(t,(p,v,E)=>{const w=E||p.getGeometry();if(w.getType()==="Point"&&p instanceof Bi&&this.features_.getArray().includes(p)){d=w;const T=d.getFlatCoordinates().slice(0,2);f=[{feature:p,geometry:d,segment:[T,T]}]}return!0},{layerFilter:g})}if(!f){const g=Jr(Nh(o,Uv)),p=i.getView().getResolution()*this.pixelTolerance_,v=Sm(ef(g,p,Uv));f=this.rBush_.getInExtent(v)}if(f&&f.length>0){const g=f.sort(u)[0],p=g.segment;let v=Yv(o,g);const E=i.getPixelFromCoordinate(v);let w=ev(t,E);if(d||w<=this.pixelTolerance_){const T={};if(T[Bt(p)]=!0,this.snapToPointer_||(this.delta_[0]=v[0]-o[0],this.delta_[1]=v[1]-o[1]),g.geometry.getType()==="Circle"&&g.index===Lu)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(v,[g.feature],[g.geometry]);else{const b=i.getPixelFromCoordinate(p[0]),O=i.getPixelFromCoordinate(p[1]),D=Ou(E,b),P=Ou(E,O);w=Math.sqrt(Math.min(D,P)),this.snappedToVertex_=w<=this.pixelTolerance_,this.snappedToVertex_&&(v=D>P?p[1]:p[0]),this.createOrUpdateVertexFeature_(v,[g.feature],[g.geometry]);const k={};k[Bt(g.geometry)]=!0;for(let z=1,j=f.length;z<j;++z){const X=f[z].segment;if(Un(p[0],X[0])&&Un(p[1],X[1])||Un(p[0],X[1])&&Un(p[1],X[0])){const $=Bt(f[z].geometry);$ in k||(k[$]=!0,T[Bt(X)]=!0)}else break}}this.vertexSegments_=T;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,i){const s=t.segment,o=t.feature,u=t.geometry,f=t.depth,d=t.index;let g;for(;i.length<u.getStride();)i.push(0);switch(u.getType()){case"MultiLineString":g=u.getCoordinates(),g[f[0]].splice(d+1,0,i);break;case"Polygon":g=u.getCoordinates(),g[f[0]].splice(d+1,0,i);break;case"MultiPolygon":g=u.getCoordinates(),g[f[1]][f[0]].splice(d+1,0,i);break;case"LineString":g=u.getCoordinates(),g.splice(d+1,0,i);break;default:return}this.setGeometryCoordinates_(u,g);const p=this.rBush_;p.remove(t),this.updateSegmentIndices_(u,d,f,1);const v={segment:[s[0],i],feature:o,geometry:u,depth:f,index:d};p.insert(jn(v.segment),v),this.dragSegments_.push([v,1]);const E={segment:[i,s[1]],feature:o,geometry:u,depth:f,index:d+1};p.insert(jn(E.segment),E),this.dragSegments_.push([E,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=de.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);const i=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Ag(Mg.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,i}return!1}removeVertex_(){const t=this.dragSegments_,i={};let s=!1,o,u,f,d,g,p,v,E,w,T,b;for(g=t.length-1;g>=0;--g)f=t[g],T=f[0],b=Bt(T.feature),T.depth&&(b+="-"+T.depth.join("-")),b in i||(i[b]={}),f[1]===0?(i[b].right=T,i[b].index=T.index):f[1]==1&&(i[b].left=T,i[b].index=T.index+1);for(b in i){switch(w=i[b].right,v=i[b].left,p=i[b].index,E=p-1,v!==void 0?T=v:T=w,E<0&&(E=0),d=T.geometry,u=d.getCoordinates(),o=u,s=!1,d.getType()){case"MultiLineString":u[T.depth[0]].length>2&&(u[T.depth[0]].splice(p,1),s=!0);break;case"LineString":u.length>2&&(u.splice(p,1),s=!0);break;case"MultiPolygon":o=o[T.depth[1]];case"Polygon":o=o[T.depth[0]],o.length>4&&(p==o.length-1&&(p=0),o.splice(p,1),s=!0,p===0&&(o.pop(),o.push(o[0]),E=o.length-1));break}if(s){this.setGeometryCoordinates_(d,u);const O=[];if(v!==void 0&&(this.rBush_.remove(v),O.push(v.segment[0])),w!==void 0&&(this.rBush_.remove(w),O.push(w.segment[1])),v!==void 0&&w!==void 0){const D={depth:T.depth,feature:T.feature,geometry:T.geometry,index:E,segment:O};this.rBush_.insert(jn(D.segment),D)}this.updateSegmentIndices_(d,p,T.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return s}setGeometryCoordinates_(t,i){this.changingFeature_=!0,t.setCoordinates(i),this.changingFeature_=!1}updateSegmentIndices_(t,i,s,o){this.rBush_.forEachInExtent(t.getExtent(),function(u){u.geometry===t&&(s===void 0||u.depth===void 0||tr(u.depth,s))&&u.index>i&&(u.index+=o)})}}function mR(a,t){return a.index-t.index}function Hv(a,t,i){const s=t.geometry;if(s.getType()==="Circle"){let u=s;if(t.index===Lu){const f=Ou(u.getCenter(),ni(a)),d=Math.sqrt(f)-u.getRadius();return d*d}}const o=ni(a);return il[0]=ni(t.segment[0]),il[1]=ni(t.segment[1]),Qw(o,il)}function Yv(a,t,i){const s=t.geometry;if(s.getType()==="Circle"&&t.index===Lu)return Du(s.getClosestPoint(ni(a)));const o=ni(a);return il[0]=ni(t.segment[0]),il[1]=ni(t.segment[1]),Du(L0(o,il))}function _R(){const a=$0();return function(t,i){return a.Point}}const pR={SELECT:"select"};class yR extends Xn{constructor(t,i,s,o){super(t),this.selected=i,this.deselected=s,this.mapBrowserEvent=o}}const Oh={};class Um extends ml{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:_x,this.addCondition_=t.addCondition?t.addCondition:Nv,this.removeCondition_=t.removeCondition?t.removeCondition:Nv,this.toggleCondition_=t.toggleCondition?t.toggleCondition:yx,this.multi_=t.multi?t.multi:!1,this.filter_=t.filter?t.filter:Va,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=t.style!==void 0?t.style:vR(),this.features_=t.features||new _n;let i;if(t.layers)if(typeof t.layers=="function")i=t.layers;else{const s=t.layers;i=function(o){return s.includes(o)}}else i=Va;this.layerFilter_=i,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,i){this.featureLayerAssociation_[Bt(t)]=i}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[Bt(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(qe.ADD,this.boundAddFeature_),this.features_.addEventListener(qe.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(qe.ADD,this.boundAddFeature_),this.features_.removeEventListener(qe.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const i=t.element;if(this.style_&&this.applySelectedStyle_(i),!this.getLayer(i)){const s=this.getMap().getAllLayers().find(function(o){if(o instanceof Wa&&o.getSource()&&o.getSource().hasFeature(i))return o});s&&this.addFeatureLayerAssociation_(i,s)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const i=Bt(t);i in Oh||(Oh[i]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const i=this.getMap().getInteractions().getArray();for(let o=i.length-1;o>=0;--o){const u=i[o];if(u!==this&&u instanceof Um&&u.getStyle()&&u.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(u.getStyle());return}}const s=Bt(t);t.setStyle(Oh[s]),delete Oh[s]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[Bt(t)]}handleEvent(t){if(!this.condition_(t))return!0;const i=this.addCondition_(t),s=this.removeCondition_(t),o=this.toggleCondition_(t),u=!i&&!s&&!o,f=t.map,d=this.getFeatures(),g=[],p=[];if(u){fl(this.featureLayerAssociation_),f.forEachFeatureAtPixel(t.pixel,(v,E)=>{if(!(!(v instanceof Bi)||!this.filter_(v,E)))return this.addFeatureLayerAssociation_(v,E),p.push(v),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let v=d.getLength()-1;v>=0;--v){const E=d.item(v),w=p.indexOf(E);w>-1?p.splice(w,1):(d.remove(E),g.push(E))}p.length!==0&&d.extend(p)}else{f.forEachFeatureAtPixel(t.pixel,(v,E)=>{if(!(!(v instanceof Bi)||!this.filter_(v,E)))return(i||o)&&!d.getArray().includes(v)?(this.addFeatureLayerAssociation_(v,E),p.push(v)):(s||o)&&d.getArray().includes(v)&&(g.push(v),this.removeFeatureLayerAssociation_(v)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let v=g.length-1;v>=0;--v)d.remove(g[v]);d.extend(p)}return(p.length>0||g.length>0)&&this.dispatchEvent(new yR(pR.SELECT,p,g,t)),!0}}function vR(){const a=$0();return Hn(a.Polygon,a.LineString),Hn(a.GeometryCollection,a.LineString),function(t){return t.getGeometry()?a[t.getGeometry().getType()]:null}}function xR(a,{setMode:t},i=()=>{}){const s=Z.useRef(null),o=Z.useRef(null),u=Z.useRef([]),f=Z.useRef([]),d=Z.useRef(!1),g=Z.useRef(null),p=Z.useRef(null),v=Z.useRef(null),E=Z.useRef(null),w=$=>{const it=a.current;if(!it||!$)return;D();const rt=$.getGeometry();if(!rt)return;t("edit");let dt;if(rt.getType()==="Polygon"){const F=rt.getCoordinates();dt=Array.isArray(F[0])?F[0]:[]}else if(rt.getType()==="MultiPolygon"){const F=rt.getCoordinates();dt=Array.isArray(F[0][0])?F[0][0]:[]}else{console.error("Tipo no soportado:",rt.getType());return}if(dt.length<3)return;const pt=new ll,_t=new Wa({source:pt,style:ji.edit});s.current=_t,it.addLayer(_t);const nt=$.clone();nt.setStyle(ji.edit),pt.addFeature(nt),v.current=nt,it.getLayers().forEach(F=>{var Q,yt;const H=(Q=F.getSource)==null?void 0:Q.call(F);H&&((yt=H.hasFeature)!=null&&yt.call(H,$))&&H.removeFeature($)}),o.current=new Wa({source:new ll,style:null}),it.addLayer(o.current);const ot=new gR({source:pt});g.current=ot;const vt=F=>{it.forEachFeatureAtPixel(F.pixel,H=>{H.get("insertAfter")!==void 0&&(o.current.getSource().removeFeature(H),f.current=f.current.filter(Q=>Q!==H))})};it.on("pointerdown",vt),g.current._pointerDownHandler=vt,it.getOverlays().getArray().forEach(F=>{const H=F.getElement();H&&H.className.includes("area-label")&&it.removeOverlay(F)});const ht=()=>{var G;const F=nt.getGeometry();if(!F||F.getType()!=="Polygon")return;const H=(G=F.getCoordinates())==null?void 0:G[0];if(!H||H.length<3)return;const Q=new Ai([H]),A=`${(al(Q,{projection:"EPSG:3857"})/1e4).toFixed(2)} ha`,U=Q.getInteriorPoint().getCoordinates();if(!E.current){const st=document.createElement("div");st.className="area-label",st.textContent=A,E.current=new Qg({element:st,positioning:"center-center",stopEvent:!1}),it.addOverlay(E.current)}E.current.getElement().textContent=A,E.current.setPosition(U)};ot.on("modifyend",F=>{const H=F.features.item(0);if(!H)return;const Q=H.getGeometry(),yt=X(Q);T(yt),i(j(yt)),ht()}),nt.getGeometry().on("change",()=>{const F=nt.getGeometry(),H=X(F);T(H),i(j(H)),ht()}),it.addInteraction(ot),T(dt),i(j(dt)),ht()},T=$=>{var pt;const it=a.current,rt=(pt=o.current)==null?void 0:pt.getSource();if(!it||!rt||!Array.isArray($)||$.length<2)return;rt.clear(),u.current=[],f.current=[];const dt=$.slice(0,-1);dt.forEach((_t,nt)=>{const ot=new Bi(new Yn(_t));ot.set("vertexIndex",nt),ot.setStyle(ji.vertexEdit),rt.addFeature(ot),u.current.push(ot)});for(let _t=0;_t<dt.length;_t++){const nt=dt[_t],ot=dt[(_t+1)%dt.length],vt=[(nt[0]+ot[0])/2,(nt[1]+ot[1])/2],ht=new Bi(new Yn(vt));ht.set("insertAfter",_t),ht.setStyle(ji.vertexIntermediate),rt.addFeature(ht),f.current.push(ht)}},b=()=>{var pt;const $=a.current,it=(pt=s.current)==null?void 0:pt.getSource(),rt=k();if(!$||!it||!rt)return;d.current=!0;const dt=new Um({condition:cb,layers:[o.current],filter:_t=>_t.getGeometry().getType()==="Point"});dt.on("select",_t=>{const nt=_t.selected[0],ot=nt==null?void 0:nt.get("vertexIndex");if(ot===void 0)return;const vt=z();vt.length<=4||(vt.splice(ot,1),vt[vt.length-1]=vt[0],rt.getGeometry().setCoordinates([vt]),T(vt),i(j(vt)))}),p.current=dt,$.addInteraction(dt)},O=()=>{const $=a.current;if(!$||!p.current)return;$.removeInteraction(p.current),p.current=null,d.current=!1,k()&&T(z())},D=()=>{const $=a.current;if($){if(s.current&&($.removeLayer(s.current),s.current=null),o.current&&($.removeLayer(o.current),o.current=null),g.current){$.removeInteraction(g.current);const it=g.current._pointerDownHandler;it&&$.un("pointerdown",it),g.current=null}p.current&&($.removeInteraction(p.current),p.current=null),E.current&&($.removeOverlay(E.current),E.current=null),u.current=[],f.current=[],d.current=!1,v.current=null,t(null)}},P=()=>v.current||null,k=()=>{var $,it;return((it=($=s.current)==null?void 0:$.getSource())==null?void 0:it.getFeatures().find(rt=>rt.getGeometry().getType()==="Polygon"))||null},z=()=>{const $=k();return X($==null?void 0:$.getGeometry())},j=$=>$.map(it=>{const[rt,dt]=iC(it);return{lat:dt,lng:rt}}),X=$=>{if(!$||typeof $.getCoordinates!="function")return[];const it=$.getCoordinates();return $.getType()==="Polygon"&&Array.isArray(it)&&Array.isArray(it[0])?it[0]:$.getType()==="MultiPolygon"&&Array.isArray(it)&&Array.isArray(it[0])&&Array.isArray(it[0][0])?it[0][0]:[]};return{activateEditMode:w,clearEdit:D,getEditedFeature:P,activateDeleteMode:b,disableDeleteMode:O}}function Ax(a,t=()=>{}){const i=mw(),s=dR(a,{setMode:i.setMode,setArea:i.setArea,setTooltipText:i.setTooltipText}),o=xR(a,{setMode:i.setMode},t);return{...i,...s,...o}}let Og=null,Dg=null;function Hm(a,[t,i]){Og=new Zv({source:new fR,visible:!1,title:"OSM Base"}),Dg=new Zv({source:new Mx({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:"UB  Satlite"}),visible:!0,title:"ESRI Sat"});const s=new Sb({target:a,layers:[Dg,Og],view:new os({center:Gh([i,t]),zoom:15,maxZoom:17,minZoom:4}),controls:[]});return window._ol_map_instance=s,window.osm=Og,window.esriSat=Dg,s}function Xv([a,t]){return Gh([a,t])}async function ia(){const a=await fetch("/config/api/parcelas/init");if(!a.ok)throw new Error("Error al cargar datos");return await a.json()}async function ER(a){const t=await fetch("/config/api/parcelas/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){const i=await t.json();throw new Error(i.message||"Error al guardar")}return await t.json()}async function Ox(a,t,i="",s="",o){const u=await fetch(`/config/api/parcelas/${a}/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({geojson:t,nombre:i,descripcion:s,area:o})});if(!u.ok){const f=await u.json();throw new Error(f.message||"Error al actualizar")}return await u.json()}async function SR(a){const t=await fetch(`/config/api/parcelas/${a}/delete`,{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar la parcela");return await t.json()}function Vv(){var mt,jt,Lt;const[a,t]=Z.useState({}),[i,s]=Z.useState({}),[o,u]=Z.useState({campo_id:"",parcela_id:""}),[f,d]=Z.useState({lat:-36.79,lon:-64.31}),[g,p]=Z.useState(!0),[v,E]=Z.useState(!1),[w,T]=Z.useState(0),[b,O]=Z.useState(0),[D,P]=Z.useState(!1),k=Z.useRef(null),z=Z.useRef(null),j=Z.useRef(null),X=hl(),{enableDraw:$,cancelDraw:it,endPolygon:rt,canFinish:dt,closedBySnap:pt,activateEditMode:_t,clearEdit:nt,getEditedLayer:ot,activateDeleteMode:vt,disableDeleteMode:ht}=Ax(k,Et=>{var Mt;if((Mt=Et==null?void 0:Et.geometry)!=null&&Mt.coordinates){const se=new Qh().readGeometry(Et.geometry,{featureProjection:"EPSG:3857"}),me=al(se);O(me)}}),F=Et=>{const Mt=Et.getGeometry();return al(Mt,{projection:"EPSG:3857"})},H=(Et,Mt)=>{if(z.current){const se=z.current.getSource(),me=se.getFeatureById(Et.id);me&&se.removeFeature(me)}_t(Et),u(se=>({...se,parcela_id:Et.id})),O(F(Mt))},Q=()=>{const Et=k.current;if(!Et||!o.campo_id)return;const Mt=new ll,se=new Qh,me=i[o.campo_id]||[];let _i=0;me.forEach(ai=>{console.log("Parcela GeoJSON a procesar:",ai);const Ae=se.readFeature(ai,{featureProjection:"EPSG:3857"});Ae.setId(ai.id),Mt.addFeature(Ae),_i+=F(Ae)});const Qe=new Wa({source:Mt,style:new Ie({stroke:new Ve({color:ji.base.color,width:ji.base.weight}),fill:new ii({color:`rgba(255,255,255,${ji.base.fillOpacity})`})})});z.current&&Et.removeLayer(z.current),z.current=Qe,Et.addLayer(Qe),Et.once("singleclick",ai=>{Et.forEachFeatureAtPixel(ai.pixel,Ae=>{const Ct=Ae.getId(),Ut=me.find(Jt=>Jt.id===Ct);Ut&&H(Ut,Ae)})}),T(_i),O(0)},yt=async()=>{const Et=await ia();s(Et.parcelas),Q()},A=async()=>{const Et=ot();if(!Et||!o.parcela_id){alert("Seleccion una parcela para guardar los cambios.");return}try{await Ox(o.parcela_id,Et),u(Mt=>({...Mt,parcela_id:""})),O(0),nt(),P(!1),yt()}catch(Mt){console.error("Error al guardar cambios:",Mt)}},U=Et=>{u({campo_id:Et,parcela_id:""});const Mt=a[Et];if(Mt&&k.current){const se=Gh([Mt.lon,Mt.lat]);k.current.getView().animate({center:se,zoom:15})}},G=()=>{const Et=window.osmLayer,Mt=window.esriSatLayer;if(!Et||!Mt)return;const se=Et.getVisible();Et.setVisible(!se),Mt.setVisible(se)},st=()=>{P(Et=>{const Mt=!Et;return Mt?vt():ht(),Mt})},lt=()=>{X("/home")},gt=()=>{navigator.geolocation&&k.current&&navigator.geolocation.getCurrentPosition(Et=>{const Mt=Gh([Et.coords.longitude,Et.coords.latitude]);k.current.getView().animate({center:Mt,zoom:16})})};return Z.useEffect(()=>{async function Et(){try{const Mt=await ia();t(Mt.campos),s(Mt.parcelas),d(Mt.center);const se=Mt.campo_preferido_id||Object.keys(Mt.campos)[0];u({campo_id:se,parcela_id:""}),p(!1)}catch(Mt){console.error("Error al cargar datos del mapa:",Mt)}}Et()},[]),Z.useEffect(()=>{if(!g&&!k.current){const Et=Hm("map",[f.lat,f.lon]);k.current=Et}g||Q()},[g]),Z.useEffect(()=>{!g&&k.current&&Q()},[o.campo_id]),Z.useEffect(()=>{function Et(Mt){j.current&&!j.current.contains(Mt.target)&&E(!1)}return document.addEventListener("mousedown",Et),()=>document.removeEventListener("mousedown",Et)},[]),g?K.jsx("div",{className:"p-4",children:"Cargando mapa..."}):K.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[K.jsx("div",{id:"map",className:"absolute inset-0 z-0"}),K.jsxs("div",{className:"absolute top-4 left-4 z-40 flex flex-col gap-2",children:[K.jsx("button",{onClick:lt,title:"Home",className:"bg-white rounded-full p-3 shadow-md",children:K.jsx(BS,{className:"w-6 h-6 text-gray-800"})}),K.jsx("button",{onClick:G,title:"Cambiar capa",className:"bg-white rounded-full p-3 shadow-md",children:K.jsx(jS,{className:"w-6 h-6 text-gray-800"})}),K.jsx("button",{onClick:gt,title:"Mi ubicacin",className:"bg-white rounded-full p-3 shadow-md",children:K.jsx(HS,{className:"w-6 h-6 text-gray-800"})})]}),K.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:K.jsxs("div",{ref:j,className:"relative",children:[K.jsxs("button",{onClick:()=>E(!v),className:"flex items-center gap-2 px-6 py-3 bg-black/60 backdrop-blur-md rounded-full shadow-lg text-white font-semibold text-sm hover:bg-black/70 transition-all",children:[K.jsxs("div",{className:"flex flex-col text-left",children:[K.jsx("span",{className:"text-xs text-gray-300",children:((mt=a[o.campo_id])==null?void 0:mt.nombre)||"Seleccionar campo"}),o.parcela_id?K.jsxs("div",{className:"flex items-center gap-1",children:[K.jsx(om,{size:14,className:"text-cyan-400"}),K.jsx("span",{className:"text-sm",children:((Lt=(jt=i[o.campo_id])==null?void 0:jt.find(Et=>Et.id==o.parcela_id))==null?void 0:Lt.nombre)||"Parcela"}),K.jsxs("span",{className:"text-xs text-green-400 ml-2",children:[(b/1e4).toFixed(2)," ha"]})]}):K.jsxs("span",{className:"text-xs text-green-400",children:[(w/1e4).toFixed(2)," ha"]})]}),K.jsx(d0,{size:16,className:"text-white"})]}),v&&K.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-md shadow-md text-sm overflow-hidden z-20 w-full",children:Object.entries(a).map(([Et,Mt])=>K.jsx("button",{onClick:()=>{U(Et),E(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100",children:Mt.nombre},Et))})]})}),K.jsx(_0,{onStart:$,onFinish:rt,onCancel:it,onUndo:()=>{},canFinish:dt,closedBySnap:pt}),o.parcela_id&&K.jsxs(K.Fragment,{children:[K.jsx("div",{style:{bottom:"8.5rem"},className:"absolute right-4 z-40 flex flex-row-reverse gap-2",children:K.jsx("button",{onClick:st,className:"p-3 rounded-full shadow-md bg-white",title:"Eliminar vrtices",children:K.jsx(g0,{className:"w-6 h-6"})})}),K.jsx("div",{className:"absolute bottom-20 right-4 z-40 flex flex-row-reverse gap-2",children:K.jsx("button",{onClick:A,className:"bg-white p-3 rounded-full shadow-md",title:"Guardar cambios",children:K.jsx(lm,{className:"w-6 h-6"})})})]})]})}function Dh(a){if(!a)return 0;try{return al(a,{projection:"EPSG:3857"})}catch{return 0}}function wR(){var Ae;const[a,t]=Z.useState(!0),[i,s]=Z.useState({}),[o,u]=Z.useState({}),[f,d]=Z.useState({lat:-36.79,lon:-64.31}),[g,p]=Z.useState({campo_id:"",parcela_id:"",nombre:"",descripcion:""}),[v,E]=Z.useState(!1),[w,T]=Z.useState(!1),[b,O]=Z.useState(!1),[D,P]=Z.useState(0),[k,z]=Z.useState(0),[j,X]=Z.useState(!1),[$,it]=Z.useState(!1),rt=Z.useRef(null),dt=Z.useRef(null),pt=Z.useRef([]),_t=Z.useRef(null);hl();const{enableDraw:nt,disableDraw:ot,cancelDraw:vt,endPolygon:ht,removeLastPoint:F,canFinish:H,closedBySnap:Q,firstVertexDraw:yt,activateDeleteMode:A,disableDeleteMode:U,activateEditMode:G,clearEdit:st,getEditedFeature:lt,getCreatedFeature:gt,polygonMode:mt}=Ax(rt,()=>{var Jt;const Ct=(Jt=lt())==null?void 0:Jt.getGeometry(),Ut=Dh(Ct);z(Ut)});Z.useEffect(()=>{gn.onFinishCallback.current=Ct=>{if(Ct){it(!0),T(!0),G(Ct),p(Jt=>({...Jt,parcela_id:""}));const Ut=Ct.getGeometry();if(Ut){const Jt=Dh(Ut);z(Jt)}}}},[]),Z.useEffect(()=>{async function Ct(){const Ut=await ia();s(Ut.campos),u(Ut.parcelas),d(Ut.center);const Jt=Ut.campo_preferido_id||Object.keys(Ut.campos)[0];p({campo_id:Jt,parcela_id:"",nombre:"",descripcion:""}),t(!1)}return Ct(),()=>{_t.current&&rt.current&&(rt.current.un("click",_t.current),_t.current=null)}},[]),Z.useEffect(()=>{const Ct=document.getElementById("map");Ct&&(gn.modeRef.current==="draw"?Ct.classList.add("cursor-draw"):Ct.classList.remove("cursor-draw"))},[gn.modeRef.current]),Z.useEffect(()=>{if(a||rt.current)return;const Ct=Hm("map",[f.lat,f.lon]);rt.current=Ct},[a]),Z.useEffect(()=>{!g.campo_id||!rt.current||jt()},[g.campo_id,g.parcela_id,o]);const jt=()=>{const Ct=rt.current;st(),pt.current.forEach(Wt=>Ct.removeLayer(Wt)),pt.current=[],_t.current&&Ct.un("click",_t.current);const Ut=Wt=>{var Fe;if(gn.modeRef.current==="draw")return;const Qt=gt();if(Qt&&((Fe=Qt.getGeometry())!=null&&Fe.intersectsCoordinate(Wt.coordinate))){st(),G(Qt);return}Ct.forEachFeatureAtPixel(Wt.pixel,_e=>{var Oe;const Te=gt();if(Te&&((Oe=Te.getGeometry())!=null&&Oe.intersectsCoordinate(Wt.coordinate))){st(),G(Te);return}if(!_e||!_e.getGeometry())return;const ae=_e.getGeometry().getType();if(ae!=="Polygon"&&ae!=="MultiPolygon")return;const be=_e.getId()||_e.get("parcela_id"),Se=g.campo_id,Oi=(o[Se]||[]).find(Hi=>Hi.id==be);if(Oi){p({campo_id:Se,parcela_id:Oi.id,nombre:Oi.nombre||"",descripcion:Oi.descripcion||""});try{const Hi=_e.clone();Hi.setId(Oi.id),G(Hi)}catch(Hi){console.error("Error al clonar feature o activar edicin:",Hi)}}})};Ct.on("click",Ut),_t.current=Ut;const Jt=o[g.campo_id]||[];let Ce=0;const Je=new Qh;if(g.parcela_id===""||g.parcela_id==="temporal")Jt.forEach(Wt=>{let Qt;try{Qt=Je.readFeature(Wt,{featureProjection:"EPSG:3857"})}catch(be){console.error("Error al leer feature GeoJSON:",be,Wt);return}if(!Qt.getGeometry())return;Qt.setId(Wt.id);const Fe=new ll({features:[Qt]}),_e=new Wa({source:Fe,style:ji.base});_e.set("parcela_id",Wt.id),Ct.addLayer(_e),pt.current.push(_e);const Te=Qt.getGeometry(),ae=Dh(Te);Ce+=ae}),P(Ce),z(0);else{const Wt=Jt.find(Qt=>Qt.id==g.parcela_id);if(Wt){let Qt;try{Qt=Je.readFeature(Wt,{featureProjection:"EPSG:3857"})}catch(Te){console.error("Error al leer feature seleccionada:",Te);return}if(!Qt.getGeometry())return;Qt.setId(Wt.id),G(Qt);const Fe=Qt.getGeometry(),_e=Dh(Fe);z(_e)}}},Lt=()=>gn.modeRef.current==="edit"?lt():gt(),Et=Ct=>{const{name:Ut,value:Jt}=Ct.target;if(Ut==="campo_id"){const Ce=i[Jt];Ce&&rt.current&&rt.current.getView().setCenter(Xv([Ce.lon,Ce.lat])),p({campo_id:Jt,parcela_id:"",nombre:"",descripcion:""}),z(0)}else p(Ce=>({...Ce,[Ut]:Jt}))},Mt=async()=>{if(!g.campo_id||!g.nombre){alert("Todos los campos son obligatorios.");return}const Ct=Lt();if(!Ct){alert("Debe crear o seleccionar una parcela.");return}const Ut=new Qh,Jt=Ct.clone();Jt.getGeometry().transform("EPSG:3857","EPSG:4326");const Ce=Ut.writeFeatureObject(Jt,{featureProjection:"EPSG:4326"});try{g.parcela_id&&g.parcela_id!=="temporal"?await Ox(g.parcela_id,Ce,g.nombre,g.descripcion):await ER({campo_id:g.campo_id,nombre:g.nombre,descripcion:g.descripcion,perimetro_geojson:Ce});const Je=await ia();u(Je.parcelas),p(Wt=>({...Wt,parcela_id:"",nombre:"",descripcion:""})),E(!1),it(!1),T(!1),z(0),st(),ot()}catch(Je){console.error("Error al guardar:",Je)}},se=async()=>{if(!(!g.parcela_id||g.parcela_id==="temporal")&&window.confirm("Ests seguro que quers eliminar esta parcela?"))try{await SR(g.parcela_id);const Ct=await ia();u(Ct.parcelas),p(Ut=>({...Ut,parcela_id:"",nombre:"",descripcion:""})),z(0)}catch(Ct){console.error("Error al eliminar parcela:",Ct)}},me=()=>{ht(),it(!0),T(!0)},_i=()=>{vt(),st(),it(!1),T(!1)},Qe=()=>{st(),U(),E(!1),it(!1),T(!1),p(Ct=>({...Ct,parcela_id:"",nombre:"",descripcion:""})),z(0)},ai=()=>{E(Ct=>!Ct),v?U():A()};return a?K.jsx("div",{className:"p-4",children:"Cargando mapa..."}):K.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[K.jsx("div",{id:"map",className:"relative z-0 w-full h-full"}),K.jsxs("div",{className:"absolute top-4 left-4 z-40 flex flex-row-reverse items-end gap-2",children:[g.parcela_id&&K.jsx("button",{onClick:se,className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center",title:"Eliminar parcela",children:K.jsx(XS,{className:"w-6 h-6"})}),K.jsx("button",{className:"bg-white p-3 rounded-full shadow-md transition-all duration-300",onClick:()=>O(Ct=>!Ct),children:K.jsx(qS,{className:"w-6 h-6"})})]}),K.jsxs("div",{className:`absolute top-20 left-4 right-4 md:left-4 md:right-auto md:w-[350px] bg-white/60 rounded-2xl shadow-lg p-2 z-10 overflow-y-auto max-h-[90%] max-w-[70%] flex flex-col gap-2 transform transition-all duration-500 ${b?"scale-100 opacity-100":"scale-0 opacity-0 pointer-events-none"}`,children:[K.jsxs("div",{className:"flex flex-col gap-1",children:[K.jsx("label",{className:"block font-medium text-xs",children:"Seleccionar campo"}),K.jsx("select",{name:"campo_id",value:g.campo_id,onChange:Et,className:"form-select w-full border p-1 rounded-full text-xs bg-white/70",children:Object.entries(i).map(([Ct,Ut])=>K.jsx("option",{value:Ct,children:Ut.nombre},Ct))})]}),K.jsxs("div",{className:"flex flex-col gap-1",children:[K.jsx("label",{className:"block font-medium text-xs",children:"Nombre del rea"}),K.jsx("input",{name:"nombre",value:g.nombre,onChange:Et,className:"w-full border p-1 rounded-full text-xs bg-white/70"})]}),K.jsxs("div",{className:"flex flex-col gap-1",children:[K.jsx("label",{className:"block font-medium text-xs",children:"Descripcin de la parcela"}),K.jsx("input",{name:"descripcion",value:g.descripcion,onChange:Et,className:"w-full border p-1 rounded-full text-xs bg-white/70"})]})]}),K.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:K.jsxs("div",{ref:dt,className:"relative",children:[K.jsxs("button",{onClick:()=>X(!j),className:"flex items-center gap-2 px-6 py-3 bg-black/60 backdrop-blur-md rounded-full shadow-lg text-white font-semibold text-sm hover:bg-black/70 transition-all",children:[K.jsxs("div",{className:"flex flex-col text-left",children:[K.jsx("span",{className:"text-xs text-gray-300",children:((Ae=i[g.campo_id])==null?void 0:Ae.nombre)||"Seleccionar campo"}),g.parcela_id?K.jsxs("div",{className:"flex items-center gap-1",children:[K.jsx(om,{size:14,className:"text-cyan-400"}),K.jsx("span",{className:"text-sm",children:g.nombre||""}),K.jsxs("span",{className:"text-xs text-green-400 ml-2",children:[(k/1e4).toFixed(2)," ha"]})]}):K.jsxs("span",{className:"text-xs text-green-400",children:[(D/1e4).toFixed(2)," ha"]})]}),K.jsx(d0,{size:16,className:"text-white"})]}),j&&K.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-md shadow-md text-sm overflow-hidden z-20 w-full",children:Object.entries(i).map(([Ct,Ut])=>K.jsx("button",{onClick:()=>{const Jt=i[Ct];Jt&&rt.current&&rt.current.getView().setCenter(Xv([Jt.lon,Jt.lat])),p({campo_id:Ct,parcela_id:"",nombre:"",descripcion:""}),X(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100",children:Ut.nombre},Ct))})]})}),K.jsxs("div",{className:"absolute bottom-20 right-4 z-40 flex flex-col items-end space-y-2",children:[mt==="edit"&&K.jsx("button",{onClick:ai,className:`p-3 rounded-full shadow-md flex items-center justify-center ${v?"bg-red-600":"bg-white"}`,title:"Eliminar vrtices",children:K.jsx(g0,{className:"w-6 h-6"})}),mt==="edit"&&g.parcela_id!==""&&K.jsx("button",{onClick:Qe,className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center",title:"Cancelar edicin",children:K.jsx(m0,{className:"w-6 h-6"})}),g.parcela_id===""&&b&&K.jsx(_0,{open:w,setOpen:T,onStart:nt,onFinish:me,onUndo:F,onCancel:_i,canFinish:H,closedBySnap:Q,firstVertexDraw:yt,finished:$}),(b||g.parcela_id!=="")&&K.jsx("button",{onClick:Mt,className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center",title:"Guardar cambios",children:K.jsx(lm,{className:"w-6 h-6"})})]})]})}var Cu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var CR=Cu.exports,qv;function TR(){return qv||(qv=1,function(a,t){(function(i,s){s(t)})(CR,function(i){var s="1.9.4";function o(r){var c,m,x,S;for(m=1,x=arguments.length;m<x;m++){S=arguments[m];for(c in S)r[c]=S[c]}return r}var u=Object.create||function(){function r(){}return function(c){return r.prototype=c,new r}}();function f(r,c){var m=Array.prototype.slice;if(r.bind)return r.bind.apply(r,m.call(arguments,1));var x=m.call(arguments,2);return function(){return r.apply(c,x.length?x.concat(m.call(arguments)):arguments)}}var d=0;function g(r){return"_leaflet_id"in r||(r._leaflet_id=++d),r._leaflet_id}function p(r,c,m){var x,S,R,N;return N=function(){x=!1,S&&(R.apply(m,S),S=!1)},R=function(){x?S=arguments:(r.apply(m,arguments),setTimeout(N,c),x=!0)},R}function v(r,c,m){var x=c[1],S=c[0],R=x-S;return r===x&&m?r:((r-S)%R+R)%R+S}function E(){return!1}function w(r,c){if(c===!1)return r;var m=Math.pow(10,c===void 0?6:c);return Math.round(r*m)/m}function T(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function b(r){return T(r).split(/\s+/)}function O(r,c){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?u(r.options):{});for(var m in c)r.options[m]=c[m];return r.options}function D(r,c,m){var x=[];for(var S in r)x.push(encodeURIComponent(m?S.toUpperCase():S)+"="+encodeURIComponent(r[S]));return(!c||c.indexOf("?")===-1?"?":"&")+x.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function k(r,c){return r.replace(P,function(m,x){var S=c[x];if(S===void 0)throw new Error("No value provided for variable "+m);return typeof S=="function"&&(S=S(c)),S})}var z=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function j(r,c){for(var m=0;m<r.length;m++)if(r[m]===c)return m;return-1}var X="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var it=0;function rt(r){var c=+new Date,m=Math.max(0,16-(c-it));return it=c+m,window.setTimeout(r,m)}var dt=window.requestAnimationFrame||$("RequestAnimationFrame")||rt,pt=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function _t(r,c,m){if(m&&dt===rt)r.call(c);else return dt.call(window,f(r,c))}function nt(r){r&&pt.call(window,r)}var ot={__proto__:null,extend:o,create:u,bind:f,get lastId(){return d},stamp:g,throttle:p,wrapNum:v,falseFn:E,formatNum:w,trim:T,splitWords:b,setOptions:O,getParamString:D,template:k,isArray:z,indexOf:j,emptyImageUrl:X,requestFn:dt,cancelFn:pt,requestAnimFrame:_t,cancelAnimFrame:nt};function vt(){}vt.extend=function(r){var c=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=c.__super__=this.prototype,x=u(m);x.constructor=c,c.prototype=x;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(c[S]=this[S]);return r.statics&&o(c,r.statics),r.includes&&(ht(r.includes),o.apply(null,[x].concat(r.includes))),o(x,r),delete x.statics,delete x.includes,x.options&&(x.options=m.options?u(m.options):{},o(x.options,r.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,N=x._initHooks.length;R<N;R++)x._initHooks[R].call(this)}},c},vt.include=function(r){var c=this.prototype.options;return o(this.prototype,r),r.options&&(this.prototype.options=c,this.mergeOptions(r.options)),this},vt.mergeOptions=function(r){return o(this.prototype.options,r),this},vt.addInitHook=function(r){var c=Array.prototype.slice.call(arguments,1),m=typeof r=="function"?r:function(){this[r].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function ht(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=z(r)?r:[r];for(var c=0;c<r.length;c++)r[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var F={on:function(r,c,m){if(typeof r=="object")for(var x in r)this._on(x,r[x],c);else{r=b(r);for(var S=0,R=r.length;S<R;S++)this._on(r[S],c,m)}return this},off:function(r,c,m){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var x in r)this._off(x,r[x],c);else{r=b(r);for(var S=arguments.length===1,R=0,N=r.length;R<N;R++)S?this._off(r[R]):this._off(r[R],c,m)}return this},_on:function(r,c,m,x){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(r,c,m)===!1){m===this&&(m=void 0);var S={fn:c,ctx:m};x&&(S.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(S)}},_off:function(r,c,m){var x,S,R;if(this._events&&(x=this._events[r],!!x)){if(arguments.length===1){if(this._firingCount)for(S=0,R=x.length;S<R;S++)x[S].fn=E;delete this._events[r];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var N=this._listens(r,c,m);if(N!==!1){var V=x[N];this._firingCount&&(V.fn=E,this._events[r]=x=x.slice()),x.splice(N,1)}}},fire:function(r,c,m){if(!this.listens(r,m))return this;var x=o({},c,{type:r,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var S=this._events[r];if(S){this._firingCount=this._firingCount+1||1;for(var R=0,N=S.length;R<N;R++){var V=S[R],et=V.fn;V.once&&this.off(r,et,V.ctx),et.call(V.ctx||this,x)}this._firingCount--}}return m&&this._propagateEvent(x),this},listens:function(r,c,m,x){typeof r!="string"&&console.warn('"string" type argument expected');var S=c;typeof c!="function"&&(x=!!c,S=void 0,m=void 0);var R=this._events&&this._events[r];if(R&&R.length&&this._listens(r,S,m)!==!1)return!0;if(x){for(var N in this._eventParents)if(this._eventParents[N].listens(r,c,m,x))return!0}return!1},_listens:function(r,c,m){if(!this._events)return!1;var x=this._events[r]||[];if(!c)return!!x.length;m===this&&(m=void 0);for(var S=0,R=x.length;S<R;S++)if(x[S].fn===c&&x[S].ctx===m)return S;return!1},once:function(r,c,m){if(typeof r=="object")for(var x in r)this._on(x,r[x],c,!0);else{r=b(r);for(var S=0,R=r.length;S<R;S++)this._on(r[S],c,m,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[g(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[g(r)],this},_propagateEvent:function(r){for(var c in this._eventParents)this._eventParents[c].fire(r.type,o({layer:r.target,propagatedFrom:r.target},r),!0)}};F.addEventListener=F.on,F.removeEventListener=F.clearAllEventListeners=F.off,F.addOneTimeEventListener=F.once,F.fireEvent=F.fire,F.hasEventListeners=F.listens;var H=vt.extend(F);function Q(r,c,m){this.x=m?Math.round(r):r,this.y=m?Math.round(c):c}var yt=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(r){return this.clone()._add(A(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(A(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new Q(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new Q(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=yt(this.x),this.y=yt(this.y),this},distanceTo:function(r){r=A(r);var c=r.x-this.x,m=r.y-this.y;return Math.sqrt(c*c+m*m)},equals:function(r){return r=A(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=A(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function A(r,c,m){return r instanceof Q?r:z(r)?new Q(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new Q(r.x,r.y):new Q(r,c,m)}function U(r,c){if(r)for(var m=c?[r,c]:r,x=0,S=m.length;x<S;x++)this.extend(m[x])}U.prototype={extend:function(r){var c,m;if(!r)return this;if(r instanceof Q||typeof r[0]=="number"||"x"in r)c=m=A(r);else if(r=G(r),c=r.min,m=r.max,!c||!m)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=m.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(r){return A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return A(this.min.x,this.max.y)},getTopRight:function(){return A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var c,m;return typeof r[0]=="number"||r instanceof Q?r=A(r):r=G(r),r instanceof U?(c=r.min,m=r.max):c=m=r,c.x>=this.min.x&&m.x<=this.max.x&&c.y>=this.min.y&&m.y<=this.max.y},intersects:function(r){r=G(r);var c=this.min,m=this.max,x=r.min,S=r.max,R=S.x>=c.x&&x.x<=m.x,N=S.y>=c.y&&x.y<=m.y;return R&&N},overlaps:function(r){r=G(r);var c=this.min,m=this.max,x=r.min,S=r.max,R=S.x>c.x&&x.x<m.x,N=S.y>c.y&&x.y<m.y;return R&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var c=this.min,m=this.max,x=Math.abs(c.x-m.x)*r,S=Math.abs(c.y-m.y)*r;return G(A(c.x-x,c.y-S),A(m.x+x,m.y+S))},equals:function(r){return r?(r=G(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function G(r,c){return!r||r instanceof U?r:new U(r,c)}function st(r,c){if(r)for(var m=c?[r,c]:r,x=0,S=m.length;x<S;x++)this.extend(m[x])}st.prototype={extend:function(r){var c=this._southWest,m=this._northEast,x,S;if(r instanceof gt)x=r,S=r;else if(r instanceof st){if(x=r._southWest,S=r._northEast,!x||!S)return this}else return r?this.extend(mt(r)||lt(r)):this;return!c&&!m?(this._southWest=new gt(x.lat,x.lng),this._northEast=new gt(S.lat,S.lng)):(c.lat=Math.min(x.lat,c.lat),c.lng=Math.min(x.lng,c.lng),m.lat=Math.max(S.lat,m.lat),m.lng=Math.max(S.lng,m.lng)),this},pad:function(r){var c=this._southWest,m=this._northEast,x=Math.abs(c.lat-m.lat)*r,S=Math.abs(c.lng-m.lng)*r;return new st(new gt(c.lat-x,c.lng-S),new gt(m.lat+x,m.lng+S))},getCenter:function(){return new gt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new gt(this.getNorth(),this.getWest())},getSouthEast:function(){return new gt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof gt||"lat"in r?r=mt(r):r=lt(r);var c=this._southWest,m=this._northEast,x,S;return r instanceof st?(x=r.getSouthWest(),S=r.getNorthEast()):x=S=r,x.lat>=c.lat&&S.lat<=m.lat&&x.lng>=c.lng&&S.lng<=m.lng},intersects:function(r){r=lt(r);var c=this._southWest,m=this._northEast,x=r.getSouthWest(),S=r.getNorthEast(),R=S.lat>=c.lat&&x.lat<=m.lat,N=S.lng>=c.lng&&x.lng<=m.lng;return R&&N},overlaps:function(r){r=lt(r);var c=this._southWest,m=this._northEast,x=r.getSouthWest(),S=r.getNorthEast(),R=S.lat>c.lat&&x.lat<m.lat,N=S.lng>c.lng&&x.lng<m.lng;return R&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,c){return r?(r=lt(r),this._southWest.equals(r.getSouthWest(),c)&&this._northEast.equals(r.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function lt(r,c){return r instanceof st?r:new st(r,c)}function gt(r,c,m){if(isNaN(r)||isNaN(c))throw new Error("Invalid LatLng object: ("+r+", "+c+")");this.lat=+r,this.lng=+c,m!==void 0&&(this.alt=+m)}gt.prototype={equals:function(r,c){if(!r)return!1;r=mt(r);var m=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return m<=(c===void 0?1e-9:c)},toString:function(r){return"LatLng("+w(this.lat,r)+", "+w(this.lng,r)+")"},distanceTo:function(r){return Lt.distance(this,mt(r))},wrap:function(){return Lt.wrapLatLng(this)},toBounds:function(r){var c=180*r/40075017,m=c/Math.cos(Math.PI/180*this.lat);return lt([this.lat-c,this.lng-m],[this.lat+c,this.lng+m])},clone:function(){return new gt(this.lat,this.lng,this.alt)}};function mt(r,c,m){return r instanceof gt?r:z(r)&&typeof r[0]!="object"?r.length===3?new gt(r[0],r[1],r[2]):r.length===2?new gt(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new gt(r.lat,"lng"in r?r.lng:r.lon,r.alt):c===void 0?null:new gt(r,c,m)}var jt={latLngToPoint:function(r,c){var m=this.projection.project(r),x=this.scale(c);return this.transformation._transform(m,x)},pointToLatLng:function(r,c){var m=this.scale(c),x=this.transformation.untransform(r,m);return this.projection.unproject(x)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var c=this.projection.bounds,m=this.scale(r),x=this.transformation.transform(c.min,m),S=this.transformation.transform(c.max,m);return new U(x,S)},infinite:!1,wrapLatLng:function(r){var c=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,m=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,x=r.alt;return new gt(m,c,x)},wrapLatLngBounds:function(r){var c=r.getCenter(),m=this.wrapLatLng(c),x=c.lat-m.lat,S=c.lng-m.lng;if(x===0&&S===0)return r;var R=r.getSouthWest(),N=r.getNorthEast(),V=new gt(R.lat-x,R.lng-S),et=new gt(N.lat-x,N.lng-S);return new st(V,et)}},Lt=o({},jt,{wrapLng:[-180,180],R:6371e3,distance:function(r,c){var m=Math.PI/180,x=r.lat*m,S=c.lat*m,R=Math.sin((c.lat-r.lat)*m/2),N=Math.sin((c.lng-r.lng)*m/2),V=R*R+Math.cos(x)*Math.cos(S)*N*N,et=2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V));return this.R*et}}),Et=6378137,Mt={R:Et,MAX_LATITUDE:85.0511287798,project:function(r){var c=Math.PI/180,m=this.MAX_LATITUDE,x=Math.max(Math.min(m,r.lat),-m),S=Math.sin(x*c);return new Q(this.R*r.lng*c,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(r){var c=180/Math.PI;return new gt((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*c,r.x*c/this.R)},bounds:function(){var r=Et*Math.PI;return new U([-r,-r],[r,r])}()};function se(r,c,m,x){if(z(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=c,this._c=m,this._d=x}se.prototype={transform:function(r,c){return this._transform(r.clone(),c)},_transform:function(r,c){return c=c||1,r.x=c*(this._a*r.x+this._b),r.y=c*(this._c*r.y+this._d),r},untransform:function(r,c){return c=c||1,new Q((r.x/c-this._b)/this._a,(r.y/c-this._d)/this._c)}};function me(r,c,m,x){return new se(r,c,m,x)}var _i=o({},Lt,{code:"EPSG:3857",projection:Mt,transformation:function(){var r=.5/(Math.PI*Mt.R);return me(r,.5,-r,.5)}()}),Qe=o({},_i,{code:"EPSG:900913"});function ai(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Ae(r,c){var m="",x,S,R,N,V,et;for(x=0,R=r.length;x<R;x++){for(V=r[x],S=0,N=V.length;S<N;S++)et=V[S],m+=(S?"L":"M")+et.x+" "+et.y;m+=c?bt.svg?"z":"x":""}return m||"M0 0"}var Ct=document.documentElement.style,Ut="ActiveXObject"in window,Jt=Ut&&!document.addEventListener,Ce="msLaunchUri"in navigator&&!("documentMode"in document),Je=Re("webkit"),Wt=Re("android"),Qt=Re("android 2")||Re("android 3"),Fe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_e=Wt&&Re("Google")&&Fe<537&&!("AudioNode"in window),Te=!!window.opera,ae=!Ce&&Re("chrome"),be=Re("gecko")&&!Je&&!Te&&!Ut,Se=!ae&&Re("safari"),Oi=Re("phantom"),Oe="OTransition"in Ct,Hi=navigator.platform.indexOf("Win")===0,gs=Ut&&"transition"in Ct,qn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qt,Ji="MozPerspective"in Ct,ms=!window.L_DISABLE_3D&&(gs||qn||Ji)&&!Oe&&!Oi,Di=typeof orientation<"u"||Re("mobile"),to=Di&&Je,er=Di&&qn,Dn=!window.PointerEvent&&window.MSPointerEvent,pn=!!(window.PointerEvent||Dn),Yi="ontouchstart"in window||!!window.TouchEvent,eo=!window.L_NO_TOUCH&&(Yi||pn),ra=Di&&Te,oi=Di&&be,yn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,li=function(){var r=!1;try{var c=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",E,c),window.removeEventListener("testPassiveEventSupport",E,c)}catch{}return r}(),Xi=function(){return!!document.createElement("canvas").getContext}(),$e=!!(document.createElementNS&&ai("svg").createSVGRect),Pi=!!$e&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),De=!$e&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var c=r.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),re=navigator.platform.indexOf("Mac")===0,Ze=navigator.platform.indexOf("Linux")===0;function Re(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var bt={ie:Ut,ielt9:Jt,edge:Ce,webkit:Je,android:Wt,android23:Qt,androidStock:_e,opera:Te,chrome:ae,gecko:be,safari:Se,phantom:Oi,opera12:Oe,win:Hi,ie3d:gs,webkit3d:qn,gecko3d:Ji,any3d:ms,mobile:Di,mobileWebkit:to,mobileWebkit3d:er,msPointer:Dn,pointer:pn,touch:eo,touchNative:Yi,mobileOpera:ra,mobileGecko:oi,retina:yn,passiveEvents:li,canvas:Xi,svg:$e,vml:De,inlineSvg:Pi,mac:re,linux:Ze},Qu=bt.msPointer?"MSPointerDown":"pointerdown",pl=bt.msPointer?"MSPointerMove":"pointermove",ir=bt.msPointer?"MSPointerUp":"pointerup",io=bt.msPointer?"MSPointerCancel":"pointercancel",Kn={touchstart:Qu,touchmove:pl,touchend:ir,touchcancel:io},_s={touchstart:tc,touchmove:aa,touchend:aa,touchcancel:aa},vn={},ps=!1;function He(r,c,m){return c==="touchstart"&&pf(),_s[c]?(m=_s[c].bind(this,m),r.addEventListener(Kn[c],m,!1),m):(console.warn("wrong event specified:",c),E)}function Ju(r,c,m){if(!Kn[c]){console.warn("wrong event specified:",c);return}r.removeEventListener(Kn[c],m,!1)}function $u(r){vn[r.pointerId]=r}function ys(r){vn[r.pointerId]&&(vn[r.pointerId]=r)}function vs(r){delete vn[r.pointerId]}function pf(){ps||(document.addEventListener(Qu,$u,!0),document.addEventListener(pl,ys,!0),document.addEventListener(ir,vs,!0),document.addEventListener(io,vs,!0),ps=!0)}function aa(r,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var m in vn)c.touches.push(vn[m]);c.changedTouches=[c],r(c)}}function tc(r,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Ge(c),aa(r,c)}function yf(r){var c={},m,x;for(x in r)m=r[x],c[x]=m&&m.bind?m.bind(r):m;return r=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var no=200;function so(r,c){r.addEventListener("dblclick",c);var m=0,x;function S(R){if(R.detail!==1){x=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var N=xl(R);if(!(N.some(function(et){return et instanceof HTMLLabelElement&&et.attributes.for})&&!N.some(function(et){return et instanceof HTMLInputElement||et instanceof HTMLSelectElement}))){var V=Date.now();V-m<=no?(x++,x===2&&c(yf(R))):x=1,m=V}}}return r.addEventListener("click",S),{dblclick:c,simDblclick:S}}function Pn(r,c){r.removeEventListener("dblclick",c.dblclick),r.removeEventListener("click",c.simDblclick)}var oa=ar(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),nr=ar(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xs=nr==="webkitTransition"||nr==="OTransition"?nr+"End":"transitionend";function ro(r){return typeof r=="string"?document.getElementById(r):r}function Es(r,c){var m=r.style[c]||r.currentStyle&&r.currentStyle[c];if((!m||m==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(r,null);m=x?x[c]:null}return m==="auto"?null:m}function $t(r,c,m){var x=document.createElement(r);return x.className=c||"",m&&m.appendChild(x),x}function pe(r){var c=r.parentNode;c&&c.removeChild(r)}function pi(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Ss(r){var c=r.parentNode;c&&c.lastChild!==r&&c.appendChild(r)}function sr(r){var c=r.parentNode;c&&c.firstChild!==r&&c.insertBefore(r,c.firstChild)}function rr(r,c){if(r.classList!==void 0)return r.classList.contains(c);var m=yi(r);return m.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(m)}function Ft(r,c){if(r.classList!==void 0)for(var m=b(c),x=0,S=m.length;x<S;x++)r.classList.add(m[x]);else if(!rr(r,c)){var R=yi(r);yl(r,(R?R+" ":"")+c)}}function ye(r,c){r.classList!==void 0?r.classList.remove(c):yl(r,T((" "+yi(r)+" ").replace(" "+c+" "," ")))}function yl(r,c){r.className.baseVal===void 0?r.className=c:r.className.baseVal=c}function yi(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function wi(r,c){"opacity"in r.style?r.style.opacity=c:"filter"in r.style&&ec(r,c)}function ec(r,c){var m=!1,x="DXImageTransform.Microsoft.Alpha";try{m=r.filters.item(x)}catch{if(c===1)return}c=Math.round(c*100),m?(m.Enabled=c!==100,m.Opacity=c):r.style.filter+=" progid:"+x+"(opacity="+c+")"}function ar(r){for(var c=document.documentElement.style,m=0;m<r.length;m++)if(r[m]in c)return r[m];return!1}function Vi(r,c,m){var x=c||new Q(0,0);r.style[oa]=(bt.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(m?" scale("+m+")":"")}function Pe(r,c){r._leaflet_pos=c,bt.any3d?Vi(r,c):(r.style.left=c.x+"px",r.style.top=c.y+"px")}function Wn(r){return r._leaflet_pos||new Q(0,0)}var xn,la,ao;if("onselectstart"in document)xn=function(){kt(window,"selectstart",Ge)},la=function(){ie(window,"selectstart",Ge)};else{var or=ar(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xn=function(){if(or){var r=document.documentElement.style;ao=r[or],r[or]="none"}},la=function(){or&&(document.documentElement.style[or]=ao,ao=void 0)}}function ua(){kt(window,"dragstart",Ge)}function vl(){ie(window,"dragstart",Ge)}var oo,lr;function ca(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(ur(),oo=r,lr=r.style.outlineStyle,r.style.outlineStyle="none",kt(window,"keydown",ur))}function ur(){oo&&(oo.style.outlineStyle=lr,oo=void 0,lr=void 0,ie(window,"keydown",ur))}function ws(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Qn(r){var c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}var ic={__proto__:null,TRANSFORM:oa,TRANSITION:nr,TRANSITION_END:xs,get:ro,getStyle:Es,create:$t,remove:pe,empty:pi,toFront:Ss,toBack:sr,hasClass:rr,addClass:Ft,removeClass:ye,setClass:yl,getClass:yi,setOpacity:wi,testProp:ar,setTransform:Vi,setPosition:Pe,getPosition:Wn,get disableTextSelection(){return xn},get enableTextSelection(){return la},disableImageDrag:ua,enableImageDrag:vl,preventOutline:ca,restoreOutline:ur,getSizedParentNode:ws,getScale:Qn};function kt(r,c,m,x){if(c&&typeof c=="object")for(var S in c)Cs(r,S,c[S],m);else{c=b(c);for(var R=0,N=c.length;R<N;R++)Cs(r,c[R],m,x)}return this}var $i="_leaflet_events";function ie(r,c,m,x){if(arguments.length===1)En(r),delete r[$i];else if(c&&typeof c=="object")for(var S in c)Sn(r,S,c[S],m);else if(c=b(c),arguments.length===2)En(r,function(V){return j(c,V)!==-1});else for(var R=0,N=c.length;R<N;R++)Sn(r,c[R],m,x);return this}function En(r,c){for(var m in r[$i]){var x=m.split(/\d/)[0];(!c||c(x))&&Sn(r,x,null,null,m)}}var ha={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cs(r,c,m,x){var S=c+g(m)+(x?"_"+g(x):"");if(r[$i]&&r[$i][S])return this;var R=function(V){return m.call(x||r,V||window.event)},N=R;!bt.touchNative&&bt.pointer&&c.indexOf("touch")===0?R=He(r,c,R):bt.touch&&c==="dblclick"?R=so(r,R):"addEventListener"in r?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?r.addEventListener(ha[c]||c,R,bt.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(R=function(V){V=V||window.event,bs(r,V)&&N(V)},r.addEventListener(ha[c],R,!1)):r.addEventListener(c,N,!1):r.attachEvent("on"+c,R),r[$i]=r[$i]||{},r[$i][S]=R}function Sn(r,c,m,x,S){S=S||c+g(m)+(x?"_"+g(x):"");var R=r[$i]&&r[$i][S];if(!R)return this;!bt.touchNative&&bt.pointer&&c.indexOf("touch")===0?Ju(r,c,R):bt.touch&&c==="dblclick"?Pn(r,R):"removeEventListener"in r?r.removeEventListener(ha[c]||c,R,!1):r.detachEvent("on"+c,R),r[$i][S]=null}function zn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function cr(r){return Cs(r,"wheel",zn),this}function hr(r){return kt(r,"mousedown touchstart dblclick contextmenu",zn),r._leaflet_disable_click=!0,this}function Ge(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function wn(r){return Ge(r),zn(r),this}function xl(r){if(r.composedPath)return r.composedPath();for(var c=[],m=r.target;m;)c.push(m),m=m.parentNode;return c}function vi(r,c){if(!c)return new Q(r.clientX,r.clientY);var m=Qn(c),x=m.boundingClientRect;return new Q((r.clientX-x.left)/m.x-c.clientLeft,(r.clientY-x.top)/m.y-c.clientTop)}var Ts=bt.linux&&bt.chrome?window.devicePixelRatio:bt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fa(r){return bt.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Ts:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function bs(r,c){var m=c.relatedTarget;if(!m)return!0;try{for(;m&&m!==r;)m=m.parentNode}catch{return!1}return m!==r}var vf={__proto__:null,on:kt,off:ie,stopPropagation:zn,disableScrollPropagation:cr,disableClickPropagation:hr,preventDefault:Ge,stop:wn,getPropagationPath:xl,getMousePosition:vi,getWheelDelta:fa,isExternalTarget:bs,addListener:kt,removeListener:ie},lo=H.extend({run:function(r,c,m,x){this.stop(),this._el=r,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=Wn(r),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=_t(this._animate,this),this._step()},_step:function(r){var c=+new Date-this._startTime,m=this._duration*1e3;c<m?this._runFrame(this._easeOut(c/m),r):(this._runFrame(1),this._complete())},_runFrame:function(r,c){var m=this._startPos.add(this._offset.multiplyBy(r));c&&m._round(),Pe(this._el,m),this.fire("step")},_complete:function(){nt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Yt=H.extend({options:{crs:_i,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,c){c=O(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(mt(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=nr&&bt.any3d&&!bt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),kt(this._proxy,xs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,c,m){if(c=c===void 0?this._zoom:this._limitZoom(c),r=this._limitCenter(mt(r),c,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=o({animate:m.animate},m.zoom),m.pan=o({animate:m.animate,duration:m.duration},m.pan));var x=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,c,m.zoom):this._tryAnimatedPan(r,m.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(r,c,m.pan&&m.pan.noMoveStart),this},setZoom:function(r,c){return this._loaded?this.setView(this.getCenter(),r,{zoom:c}):(this._zoom=r,this)},zoomIn:function(r,c){return r=r||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,c)},zoomOut:function(r,c){return r=r||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,c)},setZoomAround:function(r,c,m){var x=this.getZoomScale(c),S=this.getSize().divideBy(2),R=r instanceof Q?r:this.latLngToContainerPoint(r),N=R.subtract(S).multiplyBy(1-1/x),V=this.containerPointToLatLng(S.add(N));return this.setView(V,c,{zoom:m})},_getBoundsCenterZoom:function(r,c){c=c||{},r=r.getBounds?r.getBounds():lt(r);var m=A(c.paddingTopLeft||c.padding||[0,0]),x=A(c.paddingBottomRight||c.padding||[0,0]),S=this.getBoundsZoom(r,!1,m.add(x));if(S=typeof c.maxZoom=="number"?Math.min(c.maxZoom,S):S,S===1/0)return{center:r.getCenter(),zoom:S};var R=x.subtract(m).divideBy(2),N=this.project(r.getSouthWest(),S),V=this.project(r.getNorthEast(),S),et=this.unproject(N.add(V).divideBy(2).add(R),S);return{center:et,zoom:S}},fitBounds:function(r,c){if(r=lt(r),!r.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(r,c);return this.setView(m.center,m.zoom,c)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,c){return this.setView(r,this._zoom,{pan:c})},panBy:function(r,c){if(r=A(r).round(),c=c||{},!r.x&&!r.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new lo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ft(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,m,c.duration||.25,c.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,c,m){if(m=m||{},m.animate===!1||!bt.any3d)return this.setView(r,c,m);this._stop();var x=this.project(this.getCenter()),S=this.project(r),R=this.getSize(),N=this._zoom;r=mt(r),c=c===void 0?N:c;var V=Math.max(R.x,R.y),et=V*this.getZoomScale(N,c),ft=S.distanceTo(x)||1,xt=1.42,St=xt*xt;function Tt(Le){var bn=Le?-1:1,kn=Le?et:V,is=et*et-V*V+bn*St*St*ft*ft,Fn=2*kn*St*ft,Ta=is/Fn,So=Math.sqrt(Ta*Ta+1)-Ta,ba=So<1e-9?-18:Math.log(So);return ba}function Nt(Le){return(Math.exp(Le)-Math.exp(-Le))/2}function ve(Le){return(Math.exp(Le)+Math.exp(-Le))/2}function ze(Le){return Nt(Le)/ve(Le)}var ci=Tt(0);function qi(Le){return V*(ve(ci)/ve(ci+xt*Le))}function Ec(Le){return V*(ve(ci)*ze(ci+xt*Le)-Nt(ci))/St}function Sc(Le){return 1-Math.pow(1-Le,1.5)}var Ca=Date.now(),wr=(Tt(1)-ci)/xt,wc=m.duration?1e3*m.duration:1e3*wr*.8;function Cr(){var Le=(Date.now()-Ca)/wc,bn=Sc(Le)*wr;Le<=1?(this._flyToFrame=_t(Cr,this),this._move(this.unproject(x.add(S.subtract(x).multiplyBy(Ec(bn)/ft)),N),this.getScaleZoom(V/qi(bn),N),{flyTo:!0})):this._move(r,c)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Cr.call(this),this},flyToBounds:function(r,c){var m=this._getBoundsCenterZoom(r,c);return this.flyTo(m.center,m.zoom,c)},setMaxBounds:function(r){return r=lt(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var c=this.options.minZoom;return this.options.minZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var c=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,c){this._enforcingBounds=!0;var m=this.getCenter(),x=this._limitCenter(m,this._zoom,lt(r));return m.equals(x)||this.panTo(x,c),this._enforcingBounds=!1,this},panInside:function(r,c){c=c||{};var m=A(c.paddingTopLeft||c.padding||[0,0]),x=A(c.paddingBottomRight||c.padding||[0,0]),S=this.project(this.getCenter()),R=this.project(r),N=this.getPixelBounds(),V=G([N.min.add(m),N.max.subtract(x)]),et=V.getSize();if(!V.contains(R)){this._enforcingBounds=!0;var ft=R.subtract(V.getCenter()),xt=V.extend(R).getSize().subtract(et);S.x+=ft.x<0?-xt.x:xt.x,S.y+=ft.y<0?-xt.y:xt.y,this.panTo(this.unproject(S),c),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=o({animate:!1,pan:!0},r===!0?{animate:!0}:r);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),x=c.divideBy(2).round(),S=m.divideBy(2).round(),R=x.subtract(S);return!R.x&&!R.y?this:(r.animate&&r.pan?this.panBy(R):(r.pan&&this._rawPanBy(R),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=o({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=f(this._handleGeolocationResponse,this),m=f(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,m,r):navigator.geolocation.getCurrentPosition(c,m,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var c=r.code,m=r.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var c=r.coords.latitude,m=r.coords.longitude,x=new gt(c,m),S=x.toBounds(r.coords.accuracy*2),R=this._locateOptions;if(R.setView){var N=this.getBoundsZoom(S);this.setView(x,R.maxZoom?Math.min(N,R.maxZoom):N)}var V={latlng:x,bounds:S,timestamp:r.timestamp};for(var et in r.coords)typeof r.coords[et]=="number"&&(V[et]=r.coords[et]);this.fire("locationfound",V)}},addHandler:function(r,c){if(!c)return this;var m=this[r]=new c(this);return this._handlers.push(m),this.options[r]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(nt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)pe(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,c){var m="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),x=$t("div",m,c||this._mapPane);return r&&(this._panes[r]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),c=this.unproject(r.getBottomLeft()),m=this.unproject(r.getTopRight());return new st(c,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,c,m){r=lt(r),m=A(m||[0,0]);var x=this.getZoom()||0,S=this.getMinZoom(),R=this.getMaxZoom(),N=r.getNorthWest(),V=r.getSouthEast(),et=this.getSize().subtract(m),ft=G(this.project(V,x),this.project(N,x)).getSize(),xt=bt.any3d?this.options.zoomSnap:1,St=et.x/ft.x,Tt=et.y/ft.y,Nt=c?Math.max(St,Tt):Math.min(St,Tt);return x=this.getScaleZoom(Nt,x),xt&&(x=Math.round(x/(xt/100))*(xt/100),x=c?Math.ceil(x/xt)*xt:Math.floor(x/xt)*xt),Math.max(S,Math.min(R,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,c){var m=this._getTopLeftPoint(r,c);return new U(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,c){var m=this.options.crs;return c=c===void 0?this._zoom:c,m.scale(r)/m.scale(c)},getScaleZoom:function(r,c){var m=this.options.crs;c=c===void 0?this._zoom:c;var x=m.zoom(r*m.scale(c));return isNaN(x)?1/0:x},project:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(mt(r),c)},unproject:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(A(r),c)},layerPointToLatLng:function(r){var c=A(r).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(r){var c=this.project(mt(r))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(mt(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(lt(r))},distance:function(r,c){return this.options.crs.distance(mt(r),mt(c))},containerPointToLayerPoint:function(r){return A(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return A(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var c=this.containerPointToLayerPoint(A(r));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(mt(r)))},mouseEventToContainerPoint:function(r){return vi(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var c=this._container=ro(r);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");kt(c,"scroll",this._onScroll,this),this._containerId=g(c)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&bt.any3d,Ft(r,"leaflet-container"+(bt.touch?" leaflet-touch":"")+(bt.retina?" leaflet-retina":"")+(bt.ielt9?" leaflet-oldie":"")+(bt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Es(r,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pe(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ft(r.markerPane,"leaflet-zoom-hide"),Ft(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,c,m){Pe(this._mapPane,new Q(0,0));var x=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var S=this._zoom!==c;this._moveStart(S,m)._move(r,c)._moveEnd(S),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(r,c){return r&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(r,c,m,x){c===void 0&&(c=this._zoom);var S=this._zoom!==c;return this._zoom=c,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),x?m&&m.pinch&&this.fire("zoom",m):((S||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return nt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Pe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[g(this._container)]=this;var c=r?ie:kt;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),bt.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){nt(this._resizeRequest),this._resizeRequest=_t(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,c){for(var m=[],x,S=c==="mouseout"||c==="mouseover",R=r.target||r.srcElement,N=!1;R;){if(x=this._targets[g(R)],x&&(c==="click"||c==="preclick")&&this._draggableMoved(x)){N=!0;break}if(x&&x.listens(c,!0)&&(S&&!bs(R,r)||(m.push(x),S))||R===this._container)break;R=R.parentNode}return!m.length&&!N&&!S&&this.listens(c,!0)&&(m=[this]),m},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var c=r.target||r.srcElement;if(!(!this._loaded||c._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(c))){var m=r.type;m==="mousedown"&&ca(c),this._fireDOMEvent(r,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,c,m){if(r.type==="click"){var x=o({},r);x.type="preclick",this._fireDOMEvent(x,x.type,m)}var S=this._findEventTargets(r,c);if(m){for(var R=[],N=0;N<m.length;N++)m[N].listens(c,!0)&&R.push(m[N]);S=R.concat(S)}if(S.length){c==="contextmenu"&&Ge(r);var V=S[0],et={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var ft=V.getLatLng&&(!V._radius||V._radius<=10);et.containerPoint=ft?this.latLngToContainerPoint(V.getLatLng()):this.mouseEventToContainerPoint(r),et.layerPoint=this.containerPointToLayerPoint(et.containerPoint),et.latlng=ft?V.getLatLng():this.layerPointToLatLng(et.layerPoint)}for(N=0;N<S.length;N++)if(S[N].fire(c,et,!0),et.originalEvent._stopped||S[N].options.bubblingMouseEvents===!1&&j(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,c=this._handlers.length;r<c;r++)this._handlers[r].disable()},whenReady:function(r,c){return this._loaded?r.call(c||this,{target:this}):this.on("load",r,c),this},_getMapPanePos:function(){return Wn(this._mapPane)||new Q(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,c){var m=r&&c!==void 0?this._getNewPixelOrigin(r,c):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,c){var m=this.getSize()._divideBy(2);return this.project(r,c)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,c,m){var x=this._getNewPixelOrigin(m,c);return this.project(r,c)._subtract(x)},_latLngBoundsToNewLayerBounds:function(r,c,m){var x=this._getNewPixelOrigin(m,c);return G([this.project(r.getSouthWest(),c)._subtract(x),this.project(r.getNorthWest(),c)._subtract(x),this.project(r.getSouthEast(),c)._subtract(x),this.project(r.getNorthEast(),c)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,c,m){if(!m)return r;var x=this.project(r,c),S=this.getSize().divideBy(2),R=new U(x.subtract(S),x.add(S)),N=this._getBoundsOffset(R,m,c);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?r:this.unproject(x.add(N),c)},_limitOffset:function(r,c){if(!c)return r;var m=this.getPixelBounds(),x=new U(m.min.add(r),m.max.add(r));return r.add(this._getBoundsOffset(x,c))},_getBoundsOffset:function(r,c,m){var x=G(this.project(c.getNorthEast(),m),this.project(c.getSouthWest(),m)),S=x.min.subtract(r.min),R=x.max.subtract(r.max),N=this._rebound(S.x,-R.x),V=this._rebound(S.y,-R.y);return new Q(N,V)},_rebound:function(r,c){return r+c>0?Math.round(r-c)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(c))},_limitZoom:function(r){var c=this.getMinZoom(),m=this.getMaxZoom(),x=bt.any3d?this.options.zoomSnap:1;return x&&(r=Math.round(r/x)*x),Math.max(c,Math.min(m,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,c){var m=this._getCenterOffset(r)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,c),!0)},_createAnimProxy:function(){var r=this._proxy=$t("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(c){var m=oa,x=this._proxy.style[m];Vi(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),x===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),c=this.getZoom();Vi(this._proxy,this.project(r,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,c,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(c),S=this._getCenterOffset(r)._divideBy(1-1/x);return m.animate!==!0&&!this.getSize().contains(S)?!1:(_t(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(r,c,!0)},this),!0)},_animateZoom:function(r,c,m,x){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=c,Ft(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:c,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function da(r,c){return new Yt(r,c)}var Ci=vt.extend({options:{position:"topright"},initialize:function(r){O(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var c=this._map;return c&&c.removeControl(this),this.options.position=r,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var c=this._container=this.onAdd(r),m=this.getPosition(),x=r._controlCorners[m];return Ft(c,"leaflet-control"),m.indexOf("bottom")!==-1?x.insertBefore(c,x.firstChild):x.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),fr=function(r){return new Ci(r)};Yt.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},c="leaflet-",m=this._controlContainer=$t("div",c+"control-container",this._container);function x(S,R){var N=c+S+" "+c+R;r[S+R]=$t("div",N,m)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)pe(this._controlCorners[r]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var nc=Ci.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,c,m,x){return m<x?-1:x<m?1:0}},initialize:function(r,c,m){O(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in r)this._addLayer(r[x],x);for(x in c)this._addLayer(c[x],x,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Ci.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,c){return this._addLayer(r,c),this._map?this._update():this},addOverlay:function(r,c){return this._addLayer(r,c,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var c=this._getLayer(g(r));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ft(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(Ft(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",c=this._container=$t("div",r),m=this.options.collapsed;c.setAttribute("aria-haspopup",!0),hr(c),cr(c);var x=this._section=$t("section",r+"-list");m&&(this._map.on("click",this.collapse,this),kt(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=$t("a",r+"-toggle",c);S.href="#",S.title="Layers",S.setAttribute("role","button"),kt(S,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){Ge(R),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=$t("div",r+"-base",x),this._separator=$t("div",r+"-separator",x),this._overlaysList=$t("div",r+"-overlays",x),c.appendChild(x)},_getLayer:function(r){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&g(this._layers[c].layer)===r)return this._layers[c]},_addLayer:function(r,c,m){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:c,overlay:m}),this.options.sortLayers&&this._layers.sort(f(function(x,S){return this.options.sortFunction(x.layer,S.layer,x.name,S.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;pi(this._baseLayersList),pi(this._overlaysList),this._layerControlInputs=[];var r,c,m,x,S=0;for(m=0;m<this._layers.length;m++)x=this._layers[m],this._addItem(x),c=c||x.overlay,r=r||!x.overlay,S+=x.overlay?0:1;return this.options.hideSingleBase&&(r=r&&S>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=c&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var c=this._getLayer(g(r.target)),m=c.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;m&&this._map.fire(m,c)},_createRadioElement:function(r,c){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(c?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=m,x.firstChild},_addItem:function(r){var c=document.createElement("label"),m=this._map.hasLayer(r.layer),x;r.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=m):x=this._createRadioElement("leaflet-base-layers_"+g(this),m),this._layerControlInputs.push(x),x.layerId=g(r.layer),kt(x,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+r.name;var R=document.createElement("span");c.appendChild(R),R.appendChild(x),R.appendChild(S);var N=r.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,c,m,x=[],S=[];this._handlingClick=!0;for(var R=r.length-1;R>=0;R--)c=r[R],m=this._getLayer(c.layerId).layer,c.checked?x.push(m):c.checked||S.push(m);for(R=0;R<S.length;R++)this._map.hasLayer(S[R])&&this._map.removeLayer(S[R]);for(R=0;R<x.length;R++)this._map.hasLayer(x[R])||this._map.addLayer(x[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,c,m,x=this._map.getZoom(),S=r.length-1;S>=0;S--)c=r[S],m=this._getLayer(c.layerId).layer,c.disabled=m.options.minZoom!==void 0&&x<m.options.minZoom||m.options.maxZoom!==void 0&&x>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,kt(r,"click",Ge),this.expand();var c=this;setTimeout(function(){ie(r,"click",Ge),c._preventClick=!1})}}),xf=function(r,c,m){return new nc(r,c,m)},El=Ci.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var c="leaflet-control-zoom",m=$t("div",c+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,c+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,c+"-out",m,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,c,m,x,S){var R=$t("a",m,x);return R.innerHTML=r,R.href="#",R.title=c,R.setAttribute("role","button"),R.setAttribute("aria-label",c),hr(R),kt(R,"click",wn),kt(R,"click",S,this),kt(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var r=this._map,c="leaflet-disabled";ye(this._zoomInButton,c),ye(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(Ft(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(Ft(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Yt.mergeOptions({zoomControl:!0}),Yt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new El,this.addControl(this.zoomControl))});var Sl=function(r){return new El(r)},sc=Ci.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var c="leaflet-control-scale",m=$t("div",c),x=this.options;return this._addScales(x,c+"-line",m),r.on(x.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),m},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,c,m){r.metric&&(this._mScale=$t("div",c,m)),r.imperial&&(this._iScale=$t("div",c,m))},_update:function(){var r=this._map,c=r.getSize().y/2,m=r.distance(r.containerPointToLatLng([0,c]),r.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(m)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var c=this._getRoundNum(r),m=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,m,c/r)},_updateImperial:function(r){var c=r*3.2808399,m,x,S;c>5280?(m=c/5280,x=this._getRoundNum(m),this._updateScale(this._iScale,x+" mi",x/m)):(S=this._getRoundNum(c),this._updateScale(this._iScale,S+" ft",S/c))},_updateScale:function(r,c,m){r.style.width=Math.round(this.options.maxWidth*m)+"px",r.innerHTML=c},_getRoundNum:function(r){var c=Math.pow(10,(Math.floor(r)+"").length-1),m=r/c;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,c*m}}),Ef=function(r){return new sc(r)},Sf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',wl=Ci.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(bt.inlineSvg?Sf+" ":"")+"Leaflet</a>"},initialize:function(r){O(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=$t("div","leaflet-control-attribution"),hr(this._container);for(var c in r._layers)r._layers[c].getAttribution&&this.addAttribution(r._layers[c].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var c in this._attributions)this._attributions[c]&&r.push(c);var m=[];this.options.prefix&&m.push(this.options.prefix),r.length&&m.push(r.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Yt.mergeOptions({attributionControl:!0}),Yt.addInitHook(function(){this.options.attributionControl&&new wl().addTo(this)});var wf=function(r){return new wl(r)};Ci.Layers=nc,Ci.Zoom=El,Ci.Scale=sc,Ci.Attribution=wl,fr.layers=xf,fr.zoom=Sl,fr.scale=Ef,fr.attribution=wf;var tn=vt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(r,c){return r.addHandler(c,this),this};var Cf={Events:F},rc=bt.touch?"touchstart mousedown":"mousedown",Jn=H.extend({options:{clickTolerance:3},initialize:function(r,c,m,x){O(this,x),this._element=r,this._dragStartTarget=c||r,this._preventOutline=m},enable:function(){this._enabled||(kt(this._dragStartTarget,rc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Jn._dragging===this&&this.finishDrag(!0),ie(this._dragStartTarget,rc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!rr(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Jn._dragging===this&&this.finishDrag();return}if(!(Jn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Jn._dragging=this,this._preventOutline&&ca(this._element),ua(),xn(),!this._moving)){this.fire("down");var c=r.touches?r.touches[0]:r,m=ws(this._element);this._startPoint=new Q(c.clientX,c.clientY),this._startPos=Wn(this._element),this._parentScale=Qn(m);var x=r.type==="mousedown";kt(document,x?"mousemove":"touchmove",this._onMove,this),kt(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var c=r.touches&&r.touches.length===1?r.touches[0]:r,m=new Q(c.clientX,c.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,Ge(r),this._moved||(this.fire("dragstart"),this._moved=!0,Ft(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ft(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Pe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){ye(document.body,"leaflet-dragging"),this._lastTarget&&(ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ie(document,"mousemove touchmove",this._onMove,this),ie(document,"mouseup touchend touchcancel",this._onUp,this),vl(),la();var c=this._moved&&this._moving;this._moving=!1,Jn._dragging=!1,c&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function ac(r,c,m){var x,S=[1,4,2,8],R,N,V,et,ft,xt,St,Tt;for(R=0,xt=r.length;R<xt;R++)r[R]._code=Rs(r[R],c);for(V=0;V<4;V++){for(St=S[V],x=[],R=0,xt=r.length,N=xt-1;R<xt;N=R++)et=r[R],ft=r[N],et._code&St?ft._code&St||(Tt=co(ft,et,St,c,m),Tt._code=Rs(Tt,c),x.push(Tt)):(ft._code&St&&(Tt=co(ft,et,St,c,m),Tt._code=Rs(Tt,c),x.push(Tt)),x.push(et));r=x}return r}function uo(r,c){var m,x,S,R,N,V,et,ft,xt;if(!r||r.length===0)throw new Error("latlngs not passed");ui(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var St=mt([0,0]),Tt=lt(r),Nt=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());Nt<1700&&(St=Cl(r));var ve=r.length,ze=[];for(m=0;m<ve;m++){var ci=mt(r[m]);ze.push(c.project(mt([ci.lat-St.lat,ci.lng-St.lng])))}for(V=et=ft=0,m=0,x=ve-1;m<ve;x=m++)S=ze[m],R=ze[x],N=S.y*R.x-R.y*S.x,et+=(S.x+R.x)*N,ft+=(S.y+R.y)*N,V+=N*3;V===0?xt=ze[0]:xt=[et/V,ft/V];var qi=c.unproject(A(xt));return mt([qi.lat+St.lat,qi.lng+St.lng])}function Cl(r){for(var c=0,m=0,x=0,S=0;S<r.length;S++){var R=mt(r[S]);c+=R.lat,m+=R.lng,x++}return mt([c/x,m/x])}var Tf={__proto__:null,clipPolygon:ac,polygonCenter:uo,centroid:Cl};function oc(r,c){if(!c||!r.length)return r.slice();var m=c*c;return r=Lf(r,m),r=Rf(r,m),r}function Tl(r,c,m){return Math.sqrt(Ls(r,c,m,!0))}function bf(r,c,m){return Ls(r,c,m)}function Rf(r,c){var m=r.length,x=typeof Uint8Array<"u"?Uint8Array:Array,S=new x(m);S[0]=S[m-1]=1,bl(r,S,c,0,m-1);var R,N=[];for(R=0;R<m;R++)S[R]&&N.push(r[R]);return N}function bl(r,c,m,x,S){var R=0,N,V,et;for(V=x+1;V<=S-1;V++)et=Ls(r[V],r[x],r[S],!0),et>R&&(N=V,R=et);R>m&&(c[N]=1,bl(r,c,m,x,N),bl(r,c,m,N,S))}function Lf(r,c){for(var m=[r[0]],x=1,S=0,R=r.length;x<R;x++)Mf(r[x],r[S])>c&&(m.push(r[x]),S=x);return S<R-1&&m.push(r[R-1]),m}var lc;function uc(r,c,m,x,S){var R=x?lc:Rs(r,m),N=Rs(c,m),V,et,ft;for(lc=N;;){if(!(R|N))return[r,c];if(R&N)return!1;V=R||N,et=co(r,c,V,m,S),ft=Rs(et,m),V===R?(r=et,R=ft):(c=et,N=ft)}}function co(r,c,m,x,S){var R=c.x-r.x,N=c.y-r.y,V=x.min,et=x.max,ft,xt;return m&8?(ft=r.x+R*(et.y-r.y)/N,xt=et.y):m&4?(ft=r.x+R*(V.y-r.y)/N,xt=V.y):m&2?(ft=et.x,xt=r.y+N*(et.x-r.x)/R):m&1&&(ft=V.x,xt=r.y+N*(V.x-r.x)/R),new Q(ft,xt,S)}function Rs(r,c){var m=0;return r.x<c.min.x?m|=1:r.x>c.max.x&&(m|=2),r.y<c.min.y?m|=4:r.y>c.max.y&&(m|=8),m}function Mf(r,c){var m=c.x-r.x,x=c.y-r.y;return m*m+x*x}function Ls(r,c,m,x){var S=c.x,R=c.y,N=m.x-S,V=m.y-R,et=N*N+V*V,ft;return et>0&&(ft=((r.x-S)*N+(r.y-R)*V)/et,ft>1?(S=m.x,R=m.y):ft>0&&(S+=N*ft,R+=V*ft)),N=r.x-S,V=r.y-R,x?N*N+V*V:new Q(S,R)}function ui(r){return!z(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function cc(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ui(r)}function Rl(r,c){var m,x,S,R,N,V,et,ft;if(!r||r.length===0)throw new Error("latlngs not passed");ui(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var xt=mt([0,0]),St=lt(r),Tt=St.getNorthWest().distanceTo(St.getSouthWest())*St.getNorthEast().distanceTo(St.getNorthWest());Tt<1700&&(xt=Cl(r));var Nt=r.length,ve=[];for(m=0;m<Nt;m++){var ze=mt(r[m]);ve.push(c.project(mt([ze.lat-xt.lat,ze.lng-xt.lng])))}for(m=0,x=0;m<Nt-1;m++)x+=ve[m].distanceTo(ve[m+1])/2;if(x===0)ft=ve[0];else for(m=0,R=0;m<Nt-1;m++)if(N=ve[m],V=ve[m+1],S=N.distanceTo(V),R+=S,R>x){et=(R-x)/S,ft=[V.x-et*(V.x-N.x),V.y-et*(V.y-N.y)];break}var ci=c.unproject(A(ft));return mt([ci.lat+xt.lat,ci.lng+xt.lng])}var hc={__proto__:null,simplify:oc,pointToSegmentDistance:Tl,closestPointOnSegment:bf,clipSegment:uc,_getEdgeIntersection:co,_getBitCode:Rs,_sqClosestPointOnSegment:Ls,isFlat:ui,_flat:cc,polylineCenter:Rl},ho={project:function(r){return new Q(r.lng,r.lat)},unproject:function(r){return new gt(r.y,r.x)},bounds:new U([-180,-90],[180,90])},fo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var c=Math.PI/180,m=this.R,x=r.lat*c,S=this.R_MINOR/m,R=Math.sqrt(1-S*S),N=R*Math.sin(x),V=Math.tan(Math.PI/4-x/2)/Math.pow((1-N)/(1+N),R/2);return x=-m*Math.log(Math.max(V,1e-10)),new Q(r.lng*c*m,x)},unproject:function(r){for(var c=180/Math.PI,m=this.R,x=this.R_MINOR/m,S=Math.sqrt(1-x*x),R=Math.exp(-r.y/m),N=Math.PI/2-2*Math.atan(R),V=0,et=.1,ft;V<15&&Math.abs(et)>1e-7;V++)ft=S*Math.sin(N),ft=Math.pow((1-ft)/(1+ft),S/2),et=Math.PI/2-2*Math.atan(R*ft)-N,N+=et;return new gt(N*c,r.x*c/m)}},fc={__proto__:null,LonLat:ho,Mercator:fo,SphericalMercator:Mt},dr=o({},Lt,{code:"EPSG:3395",projection:fo,transformation:function(){var r=.5/(Math.PI*fo.R);return me(r,.5,-r,.5)}()}),dc=o({},Lt,{code:"EPSG:4326",projection:ho,transformation:me(1/180,1,-1/180,.5)}),Af=o({},jt,{projection:ho,transformation:me(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,c){var m=c.lng-r.lng,x=c.lat-r.lat;return Math.sqrt(m*m+x*x)},infinite:!0});jt.Earth=Lt,jt.EPSG3395=dr,jt.EPSG3857=_i,jt.EPSG900913=Qe,jt.EPSG4326=dc,jt.Simple=Af;var en=H.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[g(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[g(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var c=r.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var m=this.getEvents();c.on(m,this),this.once("remove",function(){c.off(m,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Yt.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var c=g(r);return this._layers[c]?this:(this._layers[c]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var c=g(r);return this._layers[c]?(this._loaded&&r.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return g(r)in this._layers},eachLayer:function(r,c){for(var m in this._layers)r.call(c,this._layers[m]);return this},_addLayers:function(r){r=r?z(r)?r:[r]:[];for(var c=0,m=r.length;c<m;c++)this.addLayer(r[c])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[g(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var c=g(r);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,c=-1/0,m=this._getZoomSpan();for(var x in this._zoomBoundLayers){var S=this._zoomBoundLayers[x].options;r=S.minZoom===void 0?r:Math.min(r,S.minZoom),c=S.maxZoom===void 0?c:Math.max(c,S.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=r===1/0?void 0:r,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ms=en.extend({initialize:function(r,c){O(this,c),this._layers={};var m,x;if(r)for(m=0,x=r.length;m<x;m++)this.addLayer(r[m])},addLayer:function(r){var c=this.getLayerId(r);return this._layers[c]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var c=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(r){var c=typeof r=="number"?r:this.getLayerId(r);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var c=Array.prototype.slice.call(arguments,1),m,x;for(m in this._layers)x=this._layers[m],x[r]&&x[r].apply(x,c);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,c){for(var m in this._layers)r.call(c,this._layers[m]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return g(r)}}),gc=function(r,c){return new Ms(r,c)},zi=Ms.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Ms.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Ms.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new st;for(var c in this._layers){var m=this._layers[c];r.extend(m.getBounds?m.getBounds():m.getLatLng())}return r}}),ga=function(r,c){return new zi(r,c)},gr=vt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){O(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,c){var m=this._getIconUrl(r);if(!m){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(m,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(x,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(r,c){var m=this.options,x=m[c+"Size"];typeof x=="number"&&(x=[x,x]);var S=A(x),R=A(c==="shadow"&&m.shadowAnchor||m.iconAnchor||S&&S.divideBy(2,!0));r.className="leaflet-marker-"+c+" "+(m.className||""),R&&(r.style.marginLeft=-R.x+"px",r.style.marginTop=-R.y+"px"),S&&(r.style.width=S.x+"px",r.style.height=S.y+"px")},_createImg:function(r,c){return c=c||document.createElement("img"),c.src=r,c},_getIconUrl:function(r){return bt.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function go(r){return new gr(r)}var mr=gr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof mr.imagePath!="string"&&(mr.imagePath=this._detectIconPath()),(this.options.imagePath||mr.imagePath)+gr.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var c=function(m,x,S){var R=x.exec(m);return R&&R[S]};return r=c(r,/^url\((['"])?(.+)\1\)$/,2),r&&c(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=$t("div","leaflet-default-icon-path",document.body),c=Es(r,"background-image")||Es(r,"backgroundImage");if(document.body.removeChild(r),c=this._stripUrl(c),c)return c;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Ll=tn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Jn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ft(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var c=this._marker,m=c._map,x=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,R=Wn(c._icon),N=m.getPixelBounds(),V=m.getPixelOrigin(),et=G(N.min._subtract(V).add(S),N.max._subtract(V).subtract(S));if(!et.contains(R)){var ft=A((Math.max(et.max.x,R.x)-et.max.x)/(N.max.x-et.max.x)-(Math.min(et.min.x,R.x)-et.min.x)/(N.min.x-et.min.x),(Math.max(et.max.y,R.y)-et.max.y)/(N.max.y-et.max.y)-(Math.min(et.min.y,R.y)-et.min.y)/(N.min.y-et.min.y)).multiplyBy(x);m.panBy(ft,{animate:!1}),this._draggable._newPos._add(ft),this._draggable._startPos._add(ft),Pe(c._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=_t(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(nt(this._panRequest),this._panRequest=_t(this._adjustPan.bind(this,r)))},_onDrag:function(r){var c=this._marker,m=c._shadow,x=Wn(c._icon),S=c._map.layerPointToLatLng(x);m&&Pe(m,x),c._latlng=S,r.latlng=S,r.oldLatLng=this._oldLatLng,c.fire("move",r).fire("drag",r)},_onDragEnd:function(r){nt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),_r=en.extend({options:{icon:new mr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,c){O(this,c),this._latlng=mt(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var c=this._latlng;return this._latlng=mt(r),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=r.icon.createIcon(this._icon),x=!1;m!==this._icon&&(this._icon&&this._removeIcon(),x=!0,r.title&&(m.title=r.title),m.tagName==="IMG"&&(m.alt=r.alt||"")),Ft(m,c),r.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&kt(m,"focus",this._panOnFocus,this);var S=r.icon.createShadow(this._shadow),R=!1;S!==this._shadow&&(this._removeShadow(),R=!0),S&&(Ft(S,c),S.alt=""),this._shadow=S,r.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&R&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ie(this._icon,"focus",this._panOnFocus,this),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Pe(this._icon,r),this._shadow&&Pe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ft(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ll)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ll(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&wi(this._icon,r),this._shadow&&wi(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var c=this.options.icon.options,m=c.iconSize?A(c.iconSize):A(0,0),x=c.iconAnchor?A(c.iconAnchor):A(0,0);r.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:m.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ml(r,c){return new _r(r,c)}var Nn=en.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return O(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ma=Nn.extend({options:{fill:!0,radius:10},initialize:function(r,c){O(this,c),this._latlng=mt(r),this._radius=this.options.radius},setLatLng:function(r){var c=this._latlng;return this._latlng=mt(r),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var c=r&&r.radius||this._radius;return Nn.prototype.setStyle.call(this,r),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,c=this._radiusY||r,m=this._clickTolerance(),x=[r+m,c+m];this._pxBounds=new U(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function mc(r,c){return new ma(r,c)}var Al=ma.extend({initialize:function(r,c,m){if(typeof c=="number"&&(c=o({},m,{radius:c})),O(this,c),this._latlng=mt(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new st(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Nn.prototype.setStyle,_project:function(){var r=this._latlng.lng,c=this._latlng.lat,m=this._map,x=m.options.crs;if(x.distance===Lt.distance){var S=Math.PI/180,R=this._mRadius/Lt.R/S,N=m.project([c+R,r]),V=m.project([c-R,r]),et=N.add(V).divideBy(2),ft=m.unproject(et).lat,xt=Math.acos((Math.cos(R*S)-Math.sin(c*S)*Math.sin(ft*S))/(Math.cos(c*S)*Math.cos(ft*S)))/S;(isNaN(xt)||xt===0)&&(xt=R/Math.cos(Math.PI/180*c)),this._point=et.subtract(m.getPixelOrigin()),this._radius=isNaN(xt)?0:et.x-m.project([ft,r-xt]).x,this._radiusY=et.y-N.y}else{var St=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(St).x}this._updateBounds()}});function Of(r,c,m){return new Al(r,c,m)}var In=Nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,c){O(this,c),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var c=1/0,m=null,x=Ls,S,R,N=0,V=this._parts.length;N<V;N++)for(var et=this._parts[N],ft=1,xt=et.length;ft<xt;ft++){S=et[ft-1],R=et[ft];var St=x(r,S,R,!0);St<c&&(c=St,m=x(r,S,R))}return m&&(m.distance=Math.sqrt(c)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,c){return c=c||this._defaultShape(),r=mt(r),c.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new st,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return ui(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var c=[],m=ui(r),x=0,S=r.length;x<S;x++)m?(c[x]=mt(r[x]),this._bounds.extend(c[x])):c[x]=this._convertLatLngs(r[x]);return c},_project:function(){var r=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),c=new Q(r,r);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(r,c,m){var x=r[0]instanceof gt,S=r.length,R,N;if(x){for(N=[],R=0;R<S;R++)N[R]=this._map.latLngToLayerPoint(r[R]),m.extend(N[R]);c.push(N)}else for(R=0;R<S;R++)this._projectLatlngs(r[R],c,m)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,m,x,S,R,N,V,et;for(m=0,S=0,R=this._rings.length;m<R;m++)for(et=this._rings[m],x=0,N=et.length;x<N-1;x++)V=uc(et[x],et[x+1],r,x,!0),V&&(c[S]=c[S]||[],c[S].push(V[0]),(V[1]!==et[x+1]||x===N-2)&&(c[S].push(V[1]),S++))}},_simplifyPoints:function(){for(var r=this._parts,c=this.options.smoothFactor,m=0,x=r.length;m<x;m++)r[m]=oc(r[m],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,c){var m,x,S,R,N,V,et=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(m=0,R=this._parts.length;m<R;m++)for(V=this._parts[m],x=0,N=V.length,S=N-1;x<N;S=x++)if(!(!c&&x===0)&&Tl(r,V[S],V[x])<=et)return!0;return!1}});function Df(r,c){return new In(r,c)}In._flat=cc;var pr=In.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return uo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var c=In.prototype._convertLatLngs.call(this,r),m=c.length;return m>=2&&c[0]instanceof gt&&c[0].equals(c[m-1])&&c.pop(),c},_setLatLngs:function(r){In.prototype._setLatLngs.call(this,r),ui(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ui(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,c=this.options.weight,m=new Q(c,c);if(r=new U(r.min.subtract(m),r.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,S=this._rings.length,R;x<S;x++)R=ac(this._rings[x],r,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var c=!1,m,x,S,R,N,V,et,ft;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(R=0,et=this._parts.length;R<et;R++)for(m=this._parts[R],N=0,ft=m.length,V=ft-1;N<ft;V=N++)x=m[N],S=m[V],x.y>r.y!=S.y>r.y&&r.x<(S.x-x.x)*(r.y-x.y)/(S.y-x.y)+x.x&&(c=!c);return c||In.prototype._containsPoint.call(this,r,!0)}});function Ni(r,c){return new pr(r,c)}var Ii=zi.extend({initialize:function(r,c){O(this,c),this._layers={},r&&this.addData(r)},addData:function(r){var c=z(r)?r:r.features,m,x,S;if(c){for(m=0,x=c.length;m<x;m++)S=c[m],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var R=this.options;if(R.filter&&!R.filter(r))return this;var N=_a(r,R);return N?(N.feature=yr(r),N.defaultOptions=N.options,this.resetStyle(N),R.onEachFeature&&R.onEachFeature(r,N),this.addLayer(N)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=o({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(c){this._setLayerStyle(c,r)},this)},_setLayerStyle:function(r,c){r.setStyle&&(typeof c=="function"&&(c=c(r.feature)),r.setStyle(c))}});function _a(r,c){var m=r.type==="Feature"?r.geometry:r,x=m?m.coordinates:null,S=[],R=c&&c.pointToLayer,N=c&&c.coordsToLatLng||mo,V,et,ft,xt;if(!x&&!m)return null;switch(m.type){case"Point":return V=N(x),Ol(R,r,V,c);case"MultiPoint":for(ft=0,xt=x.length;ft<xt;ft++)V=N(x[ft]),S.push(Ol(R,r,V,c));return new zi(S);case"LineString":case"MultiLineString":return et=pa(x,m.type==="LineString"?0:1,N),new In(et,c);case"Polygon":case"MultiPolygon":return et=pa(x,m.type==="Polygon"?1:2,N),new pr(et,c);case"GeometryCollection":for(ft=0,xt=m.geometries.length;ft<xt;ft++){var St=_a({geometry:m.geometries[ft],type:"Feature",properties:r.properties},c);St&&S.push(St)}return new zi(S);case"FeatureCollection":for(ft=0,xt=m.features.length;ft<xt;ft++){var Tt=_a(m.features[ft],c);Tt&&S.push(Tt)}return new zi(S);default:throw new Error("Invalid GeoJSON object.")}}function Ol(r,c,m,x){return r?r(c,m):new _r(m,x&&x.markersInheritOptions&&x)}function mo(r){return new gt(r[1],r[0],r[2])}function pa(r,c,m){for(var x=[],S=0,R=r.length,N;S<R;S++)N=c?pa(r[S],c-1,m):(m||mo)(r[S]),x.push(N);return x}function ya(r,c){return r=mt(r),r.alt!==void 0?[w(r.lng,c),w(r.lat,c),w(r.alt,c)]:[w(r.lng,c),w(r.lat,c)]}function _o(r,c,m,x){for(var S=[],R=0,N=r.length;R<N;R++)S.push(c?_o(r[R],ui(r[R])?0:c-1,m,x):ya(r[R],x));return!c&&m&&S.length>0&&S.push(S[0].slice()),S}function nn(r,c){return r.feature?o({},r.feature,{geometry:c}):yr(c)}function yr(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var As={toGeoJSON:function(r){return nn(this,{type:"Point",coordinates:ya(this.getLatLng(),r)})}};_r.include(As),Al.include(As),ma.include(As),In.include({toGeoJSON:function(r){var c=!ui(this._latlngs),m=_o(this._latlngs,c?1:0,!1,r);return nn(this,{type:(c?"Multi":"")+"LineString",coordinates:m})}}),pr.include({toGeoJSON:function(r){var c=!ui(this._latlngs),m=c&&!ui(this._latlngs[0]),x=_o(this._latlngs,m?2:c?1:0,!0,r);return c||(x=[x]),nn(this,{type:(m?"Multi":"")+"Polygon",coordinates:x})}}),Ms.include({toMultiPoint:function(r){var c=[];return this.eachLayer(function(m){c.push(m.toGeoJSON(r).geometry.coordinates)}),nn(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(r){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(r);var m=c==="GeometryCollection",x=[];return this.eachLayer(function(S){if(S.toGeoJSON){var R=S.toGeoJSON(r);if(m)x.push(R.geometry);else{var N=yr(R);N.type==="FeatureCollection"?x.push.apply(x,N.features):x.push(N)}}}),m?nn(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function po(r,c){return new Ii(r,c)}var _c=po,Cn=en.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,c,m){this._url=r,this._bounds=lt(c),O(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ft(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Ss(this._image),this},bringToBack:function(){return this._map&&sr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=lt(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",c=this._image=r?this._url:$t("img");if(Ft(c,"leaflet-image-layer"),this._zoomAnimated&&Ft(c,"leaflet-zoom-animated"),this.options.className&&Ft(c,this.options.className),c.onselectstart=E,c.onmousemove=E,c.onload=f(this.fire,this,"load"),c.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(r){var c=this._map.getZoomScale(r.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Vi(this._image,m,c)},_reset:function(){var r=this._image,c=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=c.getSize();Pe(r,c.min),r.style.width=m.x+"px",r.style.height=m.y+"px"},_updateOpacity:function(){wi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),vr=function(r,c,m){return new Cn(r,c,m)},yo=Cn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",c=this._image=r?this._url:$t("video");if(Ft(c,"leaflet-image-layer"),this._zoomAnimated&&Ft(c,"leaflet-zoom-animated"),this.options.className&&Ft(c,this.options.className),c.onselectstart=E,c.onmousemove=E,c.onloadeddata=f(this.fire,this,"load"),r){for(var m=c.getElementsByTagName("source"),x=[],S=0;S<m.length;S++)x.push(m[S].src);this._url=m.length>0?x:[c.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var N=$t("source");N.src=this._url[R],c.appendChild(N)}}});function pc(r,c,m){return new yo(r,c,m)}var $n=Cn.extend({_initImage:function(){var r=this._image=this._url;Ft(r,"leaflet-image-layer"),this._zoomAnimated&&Ft(r,"leaflet-zoom-animated"),this.options.className&&Ft(r,this.options.className),r.onselectstart=E,r.onmousemove=E}});function yc(r,c,m){return new $n(r,c,m)}var sn=en.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,c){r&&(r instanceof gt||z(r))?(this._latlng=mt(r),O(this,c)):(O(this,r),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&wi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&wi(this._container,1),this.bringToFront(),this.options.interactive&&(Ft(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(wi(this._container,0),this._removeTimeout=setTimeout(f(pe,void 0,this._container),200)):pe(this._container),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=mt(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ss(this._container),this},bringToBack:function(){return this._map&&sr(this._container),this},_prepareOpen:function(r){var c=this._source;if(!c._map)return!1;if(c instanceof zi){c=null;var m=this._source._layers;for(var x in m)if(m[x]._map){c=m[x];break}if(!c)return!1;this._source=c}if(!r)if(c.getCenter)r=c.getCenter();else if(c.getLatLng)r=c.getLatLng();else if(c.getBounds)r=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")r.innerHTML=c;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),c=A(this.options.offset),m=this._getAnchor();this._zoomAnimated?Pe(this._container,r.add(m)):c=c.add(r).add(m);var x=this._containerBottom=-c.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=x+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});Yt.include({_initOverlay:function(r,c,m,x){var S=c;return S instanceof r||(S=new r(x).setContent(c)),m&&S.setLatLng(m),S}}),en.include({_initOverlay:function(r,c,m,x){var S=m;return S instanceof r?(O(S,x),S._source=this):(S=c&&!x?c:new r(x,this),S.setContent(m)),S}});var va=sn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,sn.prototype.openOn.call(this,r)},onAdd:function(r){sn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nn||this._source.on("preclick",zn))},onRemove:function(r){sn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nn||this._source.off("preclick",zn))},getEvents:function(){var r=sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",c=this._container=$t("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=$t("div",r+"-content-wrapper",c);if(this._contentNode=$t("div",r+"-content",m),hr(c),cr(this._contentNode),kt(c,"contextmenu",zn),this._tipContainer=$t("div",r+"-tip-container",c),this._tip=$t("div",r+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=$t("a",r+"-close-button",c);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',kt(x,"click",function(S){Ge(S),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,c=r.style;c.width="",c.whiteSpace="nowrap";var m=r.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),c.width=m+1+"px",c.whiteSpace="",c.height="";var x=r.offsetHeight,S=this.options.maxHeight,R="leaflet-popup-scrolled";S&&x>S?(c.height=S+"px",Ft(r,R)):ye(r,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),m=this._getAnchor();Pe(this._container,c.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,c=parseInt(Es(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+c,x=this._containerWidth,S=new Q(this._containerLeft,-m-this._containerBottom);S._add(Wn(this._container));var R=r.layerPointToContainerPoint(S),N=A(this.options.autoPanPadding),V=A(this.options.autoPanPaddingTopLeft||N),et=A(this.options.autoPanPaddingBottomRight||N),ft=r.getSize(),xt=0,St=0;R.x+x+et.x>ft.x&&(xt=R.x+x-ft.x+et.x),R.x-xt-V.x<0&&(xt=R.x-V.x),R.y+m+et.y>ft.y&&(St=R.y+m-ft.y+et.y),R.y-St-V.y<0&&(St=R.y-V.y),(xt||St)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([xt,St]))}},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pf=function(r,c){return new va(r,c)};Yt.mergeOptions({closePopupOnClick:!0}),Yt.include({openPopup:function(r,c,m){return this._initOverlay(va,r,c,m).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),en.include({bindPopup:function(r,c){return this._popup=this._initOverlay(va,this._popup,r,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof zi||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){wn(r);var c=r.layer||r.target;if(this._popup._source===c&&!(c instanceof Nn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=c,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var vo=sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){sn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){sn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=sn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",c=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$t("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var c,m,x=this._map,S=this._container,R=x.latLngToContainerPoint(x.getCenter()),N=x.layerPointToContainerPoint(r),V=this.options.direction,et=S.offsetWidth,ft=S.offsetHeight,xt=A(this.options.offset),St=this._getAnchor();V==="top"?(c=et/2,m=ft):V==="bottom"?(c=et/2,m=0):V==="center"?(c=et/2,m=ft/2):V==="right"?(c=0,m=ft/2):V==="left"?(c=et,m=ft/2):N.x<R.x?(V="right",c=0,m=ft/2):(V="left",c=et+(xt.x+St.x)*2,m=ft/2),r=r.subtract(A(c,m,!0)).add(xt).add(St),ye(S,"leaflet-tooltip-right"),ye(S,"leaflet-tooltip-left"),ye(S,"leaflet-tooltip-top"),ye(S,"leaflet-tooltip-bottom"),Ft(S,"leaflet-tooltip-"+V),Pe(S,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&wi(this._container,r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(c)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zf=function(r,c){return new vo(r,c)};Yt.include({openTooltip:function(r,c,m){return this._initOverlay(vo,r,c,m).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),en.include({bindTooltip:function(r,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vo,this._tooltip,r,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var c=r?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[c](m),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof zi||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&(kt(c,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),kt(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var c=r.latlng,m,x;this._tooltip.options.sticky&&r.originalEvent&&(m=this._map.mouseEventToContainerPoint(r.originalEvent),x=this._map.containerPointToLayerPoint(m),c=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(c)}});var Dl=gr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var c=r&&r.tagName==="DIV"?r:document.createElement("div"),m=this.options;if(m.html instanceof Element?(pi(c),c.appendChild(m.html)):c.innerHTML=m.html!==!1?m.html:"",m.bgPos){var x=A(m.bgPos);c.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function vc(r){return new Dl(r)}gr.Default=mr;var Os=en.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){O(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),pe(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ss(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(sr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof Q?r:new Q(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var c=this.getPane().children,m=-r(-1/0,1/0),x=0,S=c.length,R;x<S;x++)R=c[x].style.zIndex,c[x]!==this._container&&R&&(m=r(m,+R));isFinite(m)&&(this.options.zIndex=m+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!bt.ielt9){wi(this._container,this.options.opacity);var r=+new Date,c=!1,m=!1;for(var x in this._tiles){var S=this._tiles[x];if(!(!S.current||!S.loaded)){var R=Math.min(1,(r-S.loaded)/200);wi(S.el,R),R<1?c=!0:(S.active?m=!0:this._onOpaqueTile(S),S.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),c&&(nt(this._fadeFrame),this._fadeFrame=_t(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=$t("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,c=this.options.maxZoom;if(r!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===r?(this._levels[m].el.style.zIndex=c-Math.abs(r-m),this._onUpdateLevel(m)):(pe(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var x=this._levels[r],S=this._map;return x||(x=this._levels[r]={},x.el=$t("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=c,x.origin=S.project(S.unproject(S.getPixelOrigin()),r).round(),x.zoom=r,this._setZoomTransform(x,S.getCenter(),S.getZoom()),E(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var r,c,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)c=this._tiles[r],c.retain=c.current;for(r in this._tiles)if(c=this._tiles[r],c.current&&!c.active){var x=c.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var c in this._tiles)this._tiles[c].coords.z===r&&this._removeTile(c)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)pe(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,c,m,x){var S=Math.floor(r/2),R=Math.floor(c/2),N=m-1,V=new Q(+S,+R);V.z=+N;var et=this._tileCoordsToKey(V),ft=this._tiles[et];return ft&&ft.active?(ft.retain=!0,!0):(ft&&ft.loaded&&(ft.retain=!0),N>x?this._retainParent(S,R,N,x):!1)},_retainChildren:function(r,c,m,x){for(var S=2*r;S<2*r+2;S++)for(var R=2*c;R<2*c+2;R++){var N=new Q(S,R);N.z=m+1;var V=this._tileCoordsToKey(N),et=this._tiles[V];if(et&&et.active){et.retain=!0;continue}else et&&et.loaded&&(et.retain=!0);m+1<x&&this._retainChildren(S,R,m+1,x)}},_resetView:function(r){var c=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var c=this.options;return c.minNativeZoom!==void 0&&r<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<r?c.maxNativeZoom:r},_setView:function(r,c,m,x){var S=Math.round(c);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var R=this.options.updateWhenZooming&&S!==this._tileZoom;(!x||R)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(r),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(r,c)},_setZoomTransforms:function(r,c){for(var m in this._levels)this._setZoomTransform(this._levels[m],r,c)},_setZoomTransform:function(r,c,m){var x=this._map.getZoomScale(m,r.zoom),S=r.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(c,m)).round();bt.any3d?Vi(r.el,S,x):Pe(r.el,S)},_resetGrid:function(){var r=this._map,c=r.options.crs,m=this._tileSize=this.getTileSize(),x=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,c.wrapLng[0]],x).x/m.x),Math.ceil(r.project([0,c.wrapLng[1]],x).x/m.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([c.wrapLat[0],0],x).y/m.x),Math.ceil(r.project([c.wrapLat[1],0],x).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var c=this._map,m=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),x=c.getZoomScale(m,this._tileZoom),S=c.project(r,this._tileZoom).floor(),R=c.getSize().divideBy(x*2);return new U(S.subtract(R),S.add(R))},_update:function(r){var c=this._map;if(c){var m=this._clampZoom(c.getZoom());if(r===void 0&&(r=c.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(r),S=this._pxBoundsToTileRange(x),R=S.getCenter(),N=[],V=this.options.keepBuffer,et=new U(S.getBottomLeft().subtract([V,-V]),S.getTopRight().add([V,-V]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ft in this._tiles){var xt=this._tiles[ft].coords;(xt.z!==this._tileZoom||!et.contains(new Q(xt.x,xt.y)))&&(this._tiles[ft].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(r,m);return}for(var St=S.min.y;St<=S.max.y;St++)for(var Tt=S.min.x;Tt<=S.max.x;Tt++){var Nt=new Q(Tt,St);if(Nt.z=this._tileZoom,!!this._isValidTile(Nt)){var ve=this._tiles[this._tileCoordsToKey(Nt)];ve?ve.current=!0:N.push(Nt)}}if(N.sort(function(ci,qi){return ci.distanceTo(R)-qi.distanceTo(R)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ze=document.createDocumentFragment();for(Tt=0;Tt<N.length;Tt++)this._addTile(N[Tt],ze);this._level.el.appendChild(ze)}}}},_isValidTile:function(r){var c=this._map.options.crs;if(!c.infinite){var m=this._globalTileRange;if(!c.wrapLng&&(r.x<m.min.x||r.x>m.max.x)||!c.wrapLat&&(r.y<m.min.y||r.y>m.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(r);return lt(this.options.bounds).overlaps(x)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var c=this._map,m=this.getTileSize(),x=r.scaleBy(m),S=x.add(m),R=c.unproject(x,r.z),N=c.unproject(S,r.z);return[R,N]},_tileCoordsToBounds:function(r){var c=this._tileCoordsToNwSe(r),m=new st(c[0],c[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var c=r.split(":"),m=new Q(+c[0],+c[1]);return m.z=+c[2],m},_removeTile:function(r){var c=this._tiles[r];c&&(pe(c.el),delete this._tiles[r],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){Ft(r,"leaflet-tile");var c=this.getTileSize();r.style.width=c.x+"px",r.style.height=c.y+"px",r.onselectstart=E,r.onmousemove=E,bt.ielt9&&this.options.opacity<1&&wi(r,this.options.opacity)},_addTile:function(r,c){var m=this._getTilePos(r),x=this._tileCoordsToKey(r),S=this.createTile(this._wrapCoords(r),f(this._tileReady,this,r));this._initTile(S),this.createTile.length<2&&_t(f(this._tileReady,this,r,null,S)),Pe(S,m),this._tiles[x]={el:S,coords:r,current:!0},c.appendChild(S),this.fire("tileloadstart",{tile:S,coords:r})},_tileReady:function(r,c,m){c&&this.fire("tileerror",{error:c,tile:m,coords:r});var x=this._tileCoordsToKey(r);m=this._tiles[x],m&&(m.loaded=+new Date,this._map._fadeAnimated?(wi(m.el,0),nt(this._fadeFrame),this._fadeFrame=_t(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),c||(Ft(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bt.ielt9||!this._map._fadeAnimated?_t(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var c=new Q(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return c.z=r.z,c},_pxBoundsToTileRange:function(r){var c=this.getTileSize();return new U(r.min.unscaleBy(c).floor(),r.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function rn(r){return new Os(r)}var Ds=Os.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,c){this._url=r,c=O(this,c),c.detectRetina&&bt.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,c){return this._url===r&&c===void 0&&(c=!0),this._url=r,c||this.redraw(),this},createTile:function(r,c){var m=document.createElement("img");return kt(m,"load",f(this._tileOnLoad,this,c,m)),kt(m,"error",f(this._tileOnError,this,c,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(r),m},getTileUrl:function(r){var c={r:bt.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-r.y;this.options.tms&&(c.y=m),c["-y"]=m}return k(this._url,o(c,this.options))},_tileOnLoad:function(r,c){bt.ielt9?setTimeout(f(r,this,null,c),0):r(null,c)},_tileOnError:function(r,c,m){var x=this.options.errorTileUrl;x&&c.getAttribute("src")!==x&&(c.src=x),r(m,c)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,c=this.options.maxZoom,m=this.options.zoomReverse,x=this.options.zoomOffset;return m&&(r=c-r),r+x},_getSubdomain:function(r){var c=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var r,c;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(c=this._tiles[r].el,c.onload=E,c.onerror=E,!c.complete)){c.src=X;var m=this._tiles[r].coords;pe(c),delete this._tiles[r],this.fire("tileabort",{tile:c,coords:m})}},_removeTile:function(r){var c=this._tiles[r];if(c)return c.el.setAttribute("src",X),Os.prototype._removeTile.call(this,r)},_tileReady:function(r,c,m){if(!(!this._map||m&&m.getAttribute("src")===X))return Os.prototype._tileReady.call(this,r,c,m)}});function ki(r,c){return new Ds(r,c)}var Fi=Ds.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,c){this._url=r;var m=o({},this.defaultWmsParams);for(var x in c)x in this.options||(m[x]=c[x]);c=O(this,c);var S=c.detectRetina&&bt.retina?2:1,R=this.getTileSize();m.width=R.x*S,m.height=R.y*S,this.wmsParams=m},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Ds.prototype.onAdd.call(this,r)},getTileUrl:function(r){var c=this._tileCoordsToNwSe(r),m=this._crs,x=G(m.project(c[0]),m.project(c[1])),S=x.min,R=x.max,N=(this._wmsVersion>=1.3&&this._crs===dc?[S.y,S.x,R.y,R.x]:[S.x,S.y,R.x,R.y]).join(","),V=Ds.prototype.getTileUrl.call(this,r);return V+D(this.wmsParams,V,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(r,c){return o(this.wmsParams,r),c||this.redraw(),this}});function xr(r,c){return new Fi(r,c)}Ds.WMS=Fi,ki.wms=xr;var an=en.extend({options:{padding:.1},initialize:function(r){O(this,r),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ft(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,c){var m=this._map.getZoomScale(c,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,c),R=x.multiplyBy(-m).add(S).subtract(this._map._getNewPixelOrigin(r,c));bt.any3d?Vi(this._container,R,m):Pe(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,c=this._map.getSize(),m=this._map.containerPointToLayerPoint(c.multiplyBy(-r)).round();this._bounds=new U(m,m.add(c.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xa=an.extend({options:{tolerance:0},getEvents:function(){var r=an.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){an.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");kt(r,"mousemove",this._onMouseMove,this),kt(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),kt(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){nt(this._redrawRequest),delete this._ctx,pe(this._container),ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var c in this._layers)r=this._layers[c],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){an.prototype._update.call(this);var r=this._bounds,c=this._container,m=r.getSize(),x=bt.retina?2:1;Pe(c,r.min),c.width=x*m.x,c.height=x*m.y,c.style.width=m.x+"px",c.style.height=m.y+"px",bt.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){an.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[g(r)]=r;var c=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var c=r._order,m=c.next,x=c.prev;m?m.prev=x:this._drawLast=x,x?x.next=m:this._drawFirst=m,delete r._order,delete this._layers[g(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var c=r.options.dashArray.split(/[, ]+/),m=[],x,S;for(S=0;S<c.length;S++){if(x=Number(c[S]),isNaN(x))return;m.push(x)}r.options._dashArray=m}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||_t(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var c=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(r._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(r._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var c=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,c=this._redrawBounds;if(this._ctx.save(),c){var m=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)r=x.layer,(!c||r._pxBounds&&r._pxBounds.intersects(c))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,c){if(this._drawing){var m,x,S,R,N=r._parts,V=N.length,et=this._ctx;if(V){for(et.beginPath(),m=0;m<V;m++){for(x=0,S=N[m].length;x<S;x++)R=N[m][x],et[x?"lineTo":"moveTo"](R.x,R.y);c&&et.closePath()}this._fillStroke(et,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var c=r._point,m=this._ctx,x=Math.max(Math.round(r._radius),1),S=(Math.max(Math.round(r._radiusY),1)||x)/x;S!==1&&(m.save(),m.scale(1,S)),m.beginPath(),m.arc(c.x,c.y/S,x,0,Math.PI*2,!1),S!==1&&m.restore(),this._fillStroke(m,r)}},_fillStroke:function(r,c){var m=c.options;m.fill&&(r.globalAlpha=m.fillOpacity,r.fillStyle=m.fillColor||m.color,r.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(r.setLineDash&&r.setLineDash(c.options&&c.options._dashArray||[]),r.globalAlpha=m.opacity,r.lineWidth=m.weight,r.strokeStyle=m.color,r.lineCap=m.lineCap,r.lineJoin=m.lineJoin,r.stroke())},_onClick:function(r){for(var c=this._map.mouseEventToLayerPoint(r),m,x,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(c)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(m))&&(x=m);this._fireEvent(x?[x]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,c)}},_handleMouseOut:function(r){var c=this._hoveredLayer;c&&(ye(this._container,"leaflet-interactive"),this._fireEvent([c],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,c){if(!this._mouseHoverThrottled){for(var m,x,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(c)&&(x=m);x!==this._hoveredLayer&&(this._handleMouseOut(r),x&&(Ft(this._container,"leaflet-interactive"),this._fireEvent([x],r,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,c,m){this._map._fireDOMEvent(c,m||c.type,r)},_bringToFront:function(r){var c=r._order;if(c){var m=c.next,x=c.prev;if(m)m.prev=x;else return;x?x.next=m:m&&(this._drawFirst=m),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(r)}},_bringToBack:function(r){var c=r._order;if(c){var m=c.next,x=c.prev;if(x)x.next=m;else return;m?m.prev=x:x&&(this._drawLast=x),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(r)}}});function Ea(r){return bt.canvas?new xa(r):null}var Ps=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Er={_initContainer:function(){this._container=$t("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(an.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var c=r._container=Ps("shape");Ft(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",r._path=Ps("path"),c.appendChild(r._path),this._updateStyle(r),this._layers[g(r)]=r},_addPath:function(r){var c=r._container;this._container.appendChild(c),r.options.interactive&&r.addInteractiveTarget(c)},_removePath:function(r){var c=r._container;pe(c),r.removeInteractiveTarget(c),delete this._layers[g(r)]},_updateStyle:function(r){var c=r._stroke,m=r._fill,x=r.options,S=r._container;S.stroked=!!x.stroke,S.filled=!!x.fill,x.stroke?(c||(c=r._stroke=Ps("stroke")),S.appendChild(c),c.weight=x.weight+"px",c.color=x.color,c.opacity=x.opacity,x.dashArray?c.dashStyle=z(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=x.lineCap.replace("butt","flat"),c.joinstyle=x.lineJoin):c&&(S.removeChild(c),r._stroke=null),x.fill?(m||(m=r._fill=Ps("fill")),S.appendChild(m),m.color=x.fillColor||x.color,m.opacity=x.fillOpacity):m&&(S.removeChild(m),r._fill=null)},_updateCircle:function(r){var c=r._point.round(),m=Math.round(r._radius),x=Math.round(r._radiusY||m);this._setPath(r,r._empty()?"M0 0":"AL "+c.x+","+c.y+" "+m+","+x+" 0,"+65535*360)},_setPath:function(r,c){r._path.v=c},_bringToFront:function(r){Ss(r._container)},_bringToBack:function(r){sr(r._container)}},Sa=bt.vml?Ps:ai,ts=an.extend({_initContainer:function(){this._container=Sa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Sa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){an.prototype._update.call(this);var r=this._bounds,c=r.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,m.setAttribute("width",c.x),m.setAttribute("height",c.y)),Pe(m,r.min),m.setAttribute("viewBox",[r.min.x,r.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(r){var c=r._path=Sa("path");r.options.className&&Ft(c,r.options.className),r.options.interactive&&Ft(c,"leaflet-interactive"),this._updateStyle(r),this._layers[g(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){pe(r._path),r.removeInteractiveTarget(r._path),delete this._layers[g(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var c=r._path,m=r.options;c&&(m.stroke?(c.setAttribute("stroke",m.color),c.setAttribute("stroke-opacity",m.opacity),c.setAttribute("stroke-width",m.weight),c.setAttribute("stroke-linecap",m.lineCap),c.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?c.setAttribute("stroke-dasharray",m.dashArray):c.removeAttribute("stroke-dasharray"),m.dashOffset?c.setAttribute("stroke-dashoffset",m.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),m.fill?(c.setAttribute("fill",m.fillColor||m.color),c.setAttribute("fill-opacity",m.fillOpacity),c.setAttribute("fill-rule",m.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(r,c){this._setPath(r,Ae(r._parts,c))},_updateCircle:function(r){var c=r._point,m=Math.max(Math.round(r._radius),1),x=Math.max(Math.round(r._radiusY),1)||m,S="a"+m+","+x+" 0 1,0 ",R=r._empty()?"M0 0":"M"+(c.x-m)+","+c.y+S+m*2+",0 "+S+-m*2+",0 ";this._setPath(r,R)},_setPath:function(r,c){r._path.setAttribute("d",c)},_bringToFront:function(r){Ss(r._path)},_bringToBack:function(r){sr(r._path)}});bt.vml&&ts.include(Er);function zs(r){return bt.svg||bt.vml?new ts(r):null}Yt.include({getRenderer:function(r){var c=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var c=this._paneRenderers[r];return c===void 0&&(c=this._createRenderer({pane:r}),this._paneRenderers[r]=c),c},_createRenderer:function(r){return this.options.preferCanvas&&Ea(r)||zs(r)}});var xc=pr.extend({initialize:function(r,c){pr.prototype.initialize.call(this,this._boundsToLatLngs(r),c)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=lt(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Gi(r,c){return new xc(r,c)}ts.create=Sa,ts.pointsToPath=Ae,Ii.geometryToLayer=_a,Ii.coordsToLatLng=mo,Ii.coordsToLatLngs=pa,Ii.latLngToCoords=ya,Ii.latLngsToCoords=_o,Ii.getFeature=nn,Ii.asFeature=yr,Yt.mergeOptions({boxZoom:!0});var xo=tn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){kt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xn(),ua(),this._startPoint=this._map.mouseEventToContainerPoint(r),kt(document,{contextmenu:wn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=$t("div","leaflet-zoom-box",this._container),Ft(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var c=new U(this._point,this._startPoint),m=c.getSize();Pe(this._box,c.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(pe(this._box),ye(this._container,"leaflet-crosshair")),la(),vl(),ie(document,{contextmenu:wn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var c=new st(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Yt.addInitHook("addHandler","boxZoom",xo),Yt.mergeOptions({doubleClickZoom:!0});var Tn=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var c=this._map,m=c.getZoom(),x=c.options.zoomDelta,S=r.originalEvent.shiftKey?m-x:m+x;c.options.doubleClickZoom==="center"?c.setZoom(S):c.setZoomAround(r.containerPoint,S)}});Yt.addInitHook("addHandler","doubleClickZoom",Tn),Yt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pl=tn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Jn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}Ft(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ye(this._map._container,"leaflet-grab"),ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=lt(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(c),this._prunePositions(c)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,c){return r-(r-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;r.x<c.min.x&&(r.x=this._viscousLimit(r.x,c.min.x)),r.y<c.min.y&&(r.y=this._viscousLimit(r.y,c.min.y)),r.x>c.max.x&&(r.x=this._viscousLimit(r.x,c.max.x)),r.y>c.max.y&&(r.y=this._viscousLimit(r.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,c=Math.round(r/2),m=this._initialWorldOffset,x=this._draggable._newPos.x,S=(x-c+m)%r+c-m,R=(x+c+m)%r-c-m,N=Math.abs(S+m)<Math.abs(R+m)?S:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(r){var c=this._map,m=c.options,x=!m.inertia||r.noInertia||this._times.length<2;if(c.fire("dragend",r),x)c.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,N=m.easeLinearity,V=S.multiplyBy(N/R),et=V.distanceTo([0,0]),ft=Math.min(m.inertiaMaxSpeed,et),xt=V.multiplyBy(ft/et),St=ft/(m.inertiaDeceleration*N),Tt=xt.multiplyBy(-St/2).round();!Tt.x&&!Tt.y?c.fire("moveend"):(Tt=c._limitOffset(Tt,c.options.maxBounds),_t(function(){c.panBy(Tt,{duration:St,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Yt.addInitHook("addHandler","dragging",Pl),Yt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wa=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),kt(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,c=document.documentElement,m=r.scrollTop||c.scrollTop,x=r.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(x,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var c=this._panKeys={},m=this.keyCodes,x,S;for(x=0,S=m.left.length;x<S;x++)c[m.left[x]]=[-1*r,0];for(x=0,S=m.right.length;x<S;x++)c[m.right[x]]=[r,0];for(x=0,S=m.down.length;x<S;x++)c[m.down[x]]=[0,r];for(x=0,S=m.up.length;x<S;x++)c[m.up[x]]=[0,-1*r]},_setZoomDelta:function(r){var c=this._zoomKeys={},m=this.keyCodes,x,S;for(x=0,S=m.zoomIn.length;x<S;x++)c[m.zoomIn[x]]=r;for(x=0,S=m.zoomOut.length;x<S;x++)c[m.zoomOut[x]]=-r},_addHooks:function(){kt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var c=r.keyCode,m=this._map,x;if(c in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(x=this._panKeys[c],r.shiftKey&&(x=A(x).multiplyBy(3)),m.options.maxBounds&&(x=m._limitOffset(A(x),m.options.maxBounds)),m.options.worldCopyJump){var S=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(x)));m.panTo(S)}else m.panBy(x)}else if(c in this._zoomKeys)m.setZoom(m.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;wn(r)}}});Yt.addInitHook("addHandler","keyboard",wa),Yt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var es=tn.extend({addHooks:function(){kt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var c=fa(r),m=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var x=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),x),wn(r)},_performZoom:function(){var r=this._map,c=r.getZoom(),m=this._map.options.zoomSnap||0;r._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,R=m?Math.ceil(S/m)*m:S,N=r._limitZoom(c+(this._delta>0?R:-R))-c;this._delta=0,this._startTime=null,N&&(r.options.scrollWheelZoom==="center"?r.setZoom(c+N):r.setZoomAround(this._lastMousePos,c+N))}});Yt.addInitHook("addHandler","scrollWheelZoom",es);var zl=600;Yt.mergeOptions({tapHold:bt.touchNative&&bt.safari&&bt.mobile,tapTolerance:15});var Eo=tn.extend({addHooks:function(){kt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var c=r.touches[0];this._startPos=this._newPos=new Q(c.clientX,c.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(kt(document,"touchend",Ge),kt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),zl),kt(document,"touchend touchcancel contextmenu",this._cancel,this),kt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){ie(document,"touchend",Ge),ie(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),ie(document,"touchend touchcancel contextmenu",this._cancel,this),ie(document,"touchmove",this._onMove,this)},_onMove:function(r){var c=r.touches[0];this._newPos=new Q(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,c){var m=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});m._simulated=!0,c.target.dispatchEvent(m)}});Yt.addInitHook("addHandler","tapHold",Eo),Yt.mergeOptions({touchZoom:bt.touch,bounceAtZoomLimits:!0});var Ns=tn.extend({addHooks:function(){Ft(this._map._container,"leaflet-touch-zoom"),kt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var c=this._map;if(!(!r.touches||r.touches.length!==2||c._animatingZoom||this._zooming)){var m=c.mouseEventToContainerPoint(r.touches[0]),x=c.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(m.add(x)._divideBy(2))),this._startDist=m.distanceTo(x),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),kt(document,"touchmove",this._onTouchMove,this),kt(document,"touchend touchcancel",this._onTouchEnd,this),Ge(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var c=this._map,m=c.mouseEventToContainerPoint(r.touches[0]),x=c.mouseEventToContainerPoint(r.touches[1]),S=m.distanceTo(x)/this._startDist;if(this._zoom=c.getScaleZoom(S,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&S<1||this._zoom>c.getMaxZoom()&&S>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var R=m._add(x)._divideBy(2)._subtract(this._centerPoint);if(S===1&&R.x===0&&R.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),nt(this._animRequest);var N=f(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=_t(N,this,!0),Ge(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,nt(this._animRequest),ie(document,"touchmove",this._onTouchMove,this),ie(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Yt.addInitHook("addHandler","touchZoom",Ns),Yt.BoxZoom=xo,Yt.DoubleClickZoom=Tn,Yt.Drag=Pl,Yt.Keyboard=wa,Yt.ScrollWheelZoom=es,Yt.TapHold=Eo,Yt.TouchZoom=Ns,i.Bounds=U,i.Browser=bt,i.CRS=jt,i.Canvas=xa,i.Circle=Al,i.CircleMarker=ma,i.Class=vt,i.Control=Ci,i.DivIcon=Dl,i.DivOverlay=sn,i.DomEvent=vf,i.DomUtil=ic,i.Draggable=Jn,i.Evented=H,i.FeatureGroup=zi,i.GeoJSON=Ii,i.GridLayer=Os,i.Handler=tn,i.Icon=gr,i.ImageOverlay=Cn,i.LatLng=gt,i.LatLngBounds=st,i.Layer=en,i.LayerGroup=Ms,i.LineUtil=hc,i.Map=Yt,i.Marker=_r,i.Mixin=Cf,i.Path=Nn,i.Point=Q,i.PolyUtil=Tf,i.Polygon=pr,i.Polyline=In,i.Popup=va,i.PosAnimation=lo,i.Projection=fc,i.Rectangle=xc,i.Renderer=an,i.SVG=ts,i.SVGOverlay=$n,i.TileLayer=Ds,i.Tooltip=vo,i.Transformation=se,i.Util=ot,i.VideoOverlay=yo,i.bind=f,i.bounds=G,i.canvas=Ea,i.circle=Of,i.circleMarker=mc,i.control=fr,i.divIcon=vc,i.extend=o,i.featureGroup=ga,i.geoJSON=po,i.geoJson=_c,i.gridLayer=rn,i.icon=go,i.imageOverlay=vr,i.latLng=mt,i.latLngBounds=lt,i.layerGroup=gc,i.map=da,i.marker=Ml,i.point=A,i.polygon=Ni,i.polyline=Df,i.popup=Pf,i.rectangle=Gi,i.setOptions=O,i.stamp=g,i.svg=zs,i.svgOverlay=yc,i.tileLayer=ki,i.tooltip=zf,i.transformation=me,i.version=s,i.videoOverlay=pc;var Sr=window.L;i.noConflict=function(){return window.L=Sr,this},window.L=i})}(Cu,Cu.exports)),Cu.exports}var bR=TR();const Eu=X1(bR);async function RR(a){const t=await fetch("/config/api/campos/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){const i=await t.json();throw new Error(i.message||"Error al crear campo")}return await t.json()}async function LR(a,t){const i=await fetch(`/config/api/campos/${a}/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok){const s=await i.json();throw new Error(s.message||"Error al actualizar campo")}return await i.json()}async function MR(a){const t=await fetch(`/config/api/campos/${a}/delete`,{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar el campo");return await t.json()}function AR(){var _t;const[a,t]=Z.useState(!0),[i,s]=Z.useState({}),[o,u]=Z.useState({}),[f,d]=Z.useState({campo_id:"",nombre:"",descripcion:"",lat:"",lon:""}),[g,p]=Z.useState({lat:-36.7916906190708,lon:-64.31396484375}),[v,E]=Z.useState(!1),[w,T]=Z.useState(!1),b=Z.useRef(null),O=Z.useRef([]),D=Z.useRef(null),P=Z.useRef(null);hl();const k=Eu.icon({iconUrl:"/dist/map_pin.svg",iconSize:[32,56],iconAnchor:[16,56],popupAnchor:[0,-28]}),z=nt=>{const ot=document.createElement("div");ot.className="ripple-effect",ot.style.left=`${nt.clientX}px`,ot.style.top=`${nt.clientY}px`,document.body.appendChild(ot),setTimeout(()=>{ot.remove()},600)};Z.useEffect(()=>{ia().then(nt=>{s(nt.campos),u(nt.parcelas),p(nt.center);const ot=nt.campo_preferido_id,vt=ot?nt.campos[ot]:null;vt&&d({campo_id:ot,nombre:vt.nombre,descripcion:vt.descripcion||"",lat:vt.lat,lon:vt.lon}),t(!1)})},[]),Z.useEffect(()=>{if(a)return;const nt=Hm("map",[g.lat,g.lon]);if(D.current=nt,nt.on("click",ot=>{z(ot.originalEvent);const{lat:vt,lng:ht}=ot.latlng;d(F=>({...F,lat:vt,lon:ht})),b.current&&nt.removeLayer(b.current),b.current=Eu.marker([vt,ht],{icon:k}).addTo(nt)}),f.campo_id){const ot=i[f.campo_id];ot&&(it(ot),j(f.campo_id))}},[a]),Z.useEffect(()=>{function nt(ot){P.current&&!P.current.contains(ot.target)&&T(!1)}return document.addEventListener("mousedown",nt),()=>{document.removeEventListener("mousedown",nt)}},[]);const j=nt=>{const ot=D.current,vt=o[nt]||[];$();const ht=[];vt.forEach(F=>{const H=Eu.geoJSON(F,{style:ji.base}).addTo(ot);ht.push(H)}),O.current=ht},X=nt=>{const ot=i[nt];ot&&(d({campo_id:nt,nombre:ot.nombre,descripcion:ot.descripcion||"",lat:ot.lat,lon:ot.lon}),it(ot),j(nt),D.current&&D.current.setView([ot.lat,ot.lon],15))},$=()=>{const nt=D.current;O.current.forEach(ot=>nt.removeLayer(ot)),O.current=[]},it=nt=>{const ot=[nt.lat,nt.lon];D.current&&D.current.setView(ot,15),b.current&&D.current.removeLayer(b.current),b.current=Eu.marker(ot,{icon:k}).addTo(D.current)},rt=nt=>{const{name:ot,value:vt}=nt.target;if(d(ht=>({...ht,[ot]:vt})),ot==="campo_id"){const ht=i[vt];ht?(d({campo_id:vt,nombre:ht.nombre,descripcion:ht.descripcion||"",lat:ht.lat,lon:ht.lon}),it(ht),j(vt)):(d({campo_id:"",nombre:"",descripcion:"",lat:"",lon:""}),$(),b.current&&D.current.removeLayer(b.current))}},dt=async()=>{const{campo_id:nt,nombre:ot,descripcion:vt,lat:ht,lon:F}=f;if(!ot||!vt||!ht||!F){alert("Todos los campos son obligatorios.");return}try{nt?await LR(nt,{nombre:ot,descripcion:vt,lat:ht,lon:F}):await RR({nombre:ot,descripcion:vt,lat:ht,lon:F});const H=await ia();s(H.campos),u(H.parcelas);const Q=nt||Object.keys(H.campos).pop(),yt=H.campos[Q];if(yt){if(d({campo_id:Q,nombre:yt.nombre,descripcion:yt.descripcion||"",lat:yt.lat,lon:yt.lon}),D.current){const A=[yt.lat,yt.lon];D.current.setView(A,15),b.current&&D.current.removeLayer(b.current),b.current=Eu.marker(A,{icon:k}).addTo(D.current)}$(),j(Q)}}catch(H){console.error("Error al guardar campo:",H)}},pt=async()=>{if(!(!f.campo_id||!window.confirm("Ests seguro que quers eliminar este campo?")))try{await MR(f.campo_id);const ot=await ia();s(ot.campos),u(ot.parcelas),d({campo_id:"",nombre:"",descripcion:"",lat:"",lon:""}),$(),b.current&&D.current.removeLayer(b.current)}catch(ot){console.error("Error al eliminar campo:",ot)}};return K.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[K.jsx("div",{id:"map",className:"absolute inset-0 z-0"}),K.jsxs("div",{className:"absolute top-4 left-4 z-40 flex flex-row-reverse items-end gap-2",children:[f.campo_id&&K.jsx("button",{onClick:pt,className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center",title:"Eliminar campo",children:K.jsx(JS,{className:"w-6 h-6"})}),K.jsx("button",{className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center transition-all duration-300",onClick:()=>E(nt=>!nt),children:K.jsx(WS,{className:"w-6 h-6"})})]}),K.jsxs("div",{style:{top:"4.5rem"},className:`absolute left-4 right-4 md:left-4 md:right-auto md:w-[350px] bg-white/60 rounded-2xl shadow-lg p-2 z-10 overflow-y-auto max-h-[90%] max-w-[70%] flex flex-col gap-2 transform transition-all duration-500 ${v?"scale-100 opacity-100":"scale-0 opacity-0 pointer-events-none"}`,children:[K.jsxs("div",{className:"flex flex-col gap-1",children:[K.jsx("label",{className:"block font-medium text-xs",children:"Seleccionar campo existente"}),K.jsxs("select",{name:"campo_id",value:f.campo_id,onChange:rt,className:"form-select w-full border p-1 rounded-full text-xs bg-white/70",children:[K.jsx("option",{value:"",children:"-- Crear nuevo campo --"}),Object.entries(i).map(([nt,ot])=>K.jsx("option",{value:nt,children:ot.nombre},nt))]})]}),K.jsxs("div",{className:"flex flex-col gap-1",children:[K.jsx("label",{className:"block font-medium text-xs",children:"Nombre del campo"}),K.jsx("input",{name:"nombre",value:f.nombre,onChange:rt,className:"w-full border p-1 rounded-full text-xs bg-white/70"})]}),K.jsxs("div",{className:"flex flex-col gap-1",children:[K.jsx("label",{className:"block font-medium text-xs",children:"Descripcin del campo"}),K.jsx("input",{name:"descripcion",value:f.descripcion,onChange:rt,className:"w-full border p-1 rounded-full text-xs bg-white/70"})]}),K.jsx("input",{type:"hidden",name:"lat",value:f.lat}),K.jsx("input",{type:"hidden",name:"lon",value:f.lon})]}),K.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:K.jsxs("div",{ref:P,className:"relative",children:[K.jsx("button",{onClick:()=>T(!w),className:"flex items-center gap-2 px-6 py-3 bg-black/60 backdrop-blur-md rounded-full shadow-lg text-white font-semibold text-sm hover:bg-black/70 transition-all",children:K.jsxs("div",{className:"flex flex-col text-left",children:[K.jsx("span",{className:"text-xs text-gray-300",children:"Campo seleccionado"}),K.jsx("span",{className:"text-sm",children:((_t=i[f.campo_id])==null?void 0:_t.nombre)||"Seleccionar campo"})]})}),w&&K.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-md shadow-md text-sm overflow-hidden z-20 w-full",children:Object.entries(i).map(([nt,ot])=>K.jsx("button",{onClick:()=>{X(nt),T(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100",children:ot.nombre},nt))})]})}),K.jsx("div",{className:"absolute bottom-20 right-4 z-40 flex flex-col-reverse items-end gap-1",children:K.jsx("button",{onClick:dt,className:"bg-white p-3 rounded-full shadow-md flex items-center justify-center",title:"Guardar campo",children:K.jsx(lm,{className:"w-6 h-6"})})})]})}function OR(){const{menuOpen:a,setMenuOpen:t}=dw();return K.jsxs(_S,{children:[K.jsx(fw,{menuOpen:a,setMenuOpen:t}),K.jsxs(XE,{children:[K.jsx(Kr,{path:"/mapa",element:K.jsx(Vv,{})}),K.jsx(Kr,{path:"/collares",element:K.jsx(Pg,{label:"Collares"})}),K.jsx(Kr,{path:"/parcelas",element:K.jsx(wR,{})}),K.jsx(Kr,{path:"/alertas",element:K.jsx(Pg,{label:"Alertas"})}),K.jsx(Kr,{path:"/animales",element:K.jsx(Pg,{label:"Animales"})}),K.jsx(Kr,{path:"/campos",element:K.jsx(AR,{})}),K.jsx(Kr,{path:"*",element:K.jsx(Vv,{})})]}),K.jsx(gw,{setMenuOpen:t})]})}function Pg({label:a}){return K.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gray-100",children:K.jsx("h1",{className:"text-3xl font-bold",children:a})})}iE.createRoot(document.getElementById("root")).render(K.jsx(Z.StrictMode,{children:K.jsx(OR,{})}));
